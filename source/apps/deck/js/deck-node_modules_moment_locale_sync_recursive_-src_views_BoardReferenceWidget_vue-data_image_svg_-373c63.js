/*! For license information please see deck-node_modules_moment_locale_sync_recursive_-src_views_BoardReferenceWidget_vue-data_image_svg_-373c63.js.LICENSE.txt */
(self.webpackChunkdeck=self.webpackChunkdeck||[]).push([["node_modules_moment_locale_sync_recursive_-src_views_BoardReferenceWidget_vue-data_image_svg_-373c63"],{1359:(e,a,r)=>{"use strict";r.d(a,{Z:()=>o});var n=r(64882),i=r(11480),s=r(46544);const o={name:"AvatarList",components:{NcAvatar:n.Xn,NcPopover:n.Fh,AccountMultiple:s.Z},props:{users:{type:Array,default:()=>[]}},data:()=>({popoverVisible:!1}),computed:{firstUsers(){return this.users&&0!==this.users.length?this.users.slice(0,3):[]},avatarUrl:()=>t=>{if(1===t.type)return"icon-group";const e=t.participant.uid,a=(0,i.nu)("/avatar/{user}/{size}",{user:e,size:32});return window.location.protocol+"//"+window.location.host+a},popover(){return this.users&&0!==this.users.length?[...this.users.slice(3).map((e=>({href:"#",icon:this.avatarUrl(e),text:e.participant.displayname+(1===e.type?" "+t("deck","(group)"):"")})))]:[]},avatarUsers(){return this.users?this.users.filter((t=>[0,1,7].includes(t.type))):[]}},methods:{togglePopover(){this.popover.length>0&&(this.popoverVisible=!this.popoverVisible)}}}},38563:(t,e,a)=>{"use strict";a.d(e,{s:()=>r,x:()=>n});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatars"},[e("div",[e("NcPopover",{scopedSlots:t._u([{key:"trigger",fn:function(a){let{attrs:r}=a;return[e("button",t._b({staticClass:"avatar-list",on:{click:function(t){t.stopPropagation()}}},"button",r,!1),[t.popover.length>0?e("div",[e("AccountMultiple",{staticClass:"avatardiv more-avatars",attrs:{size:24}})],1):t._e(),t._v(" "),t._l(t.firstUsers,(function(a){return e("div",{key:a.id},[0===a.type?e("NcAvatar",{attrs:{user:a.participant.uid,"display-name":a.participant.displayname,"disable-menu":!0,"show-user-status":!1,size:32}}):t._e(),t._v(" "),1===a.type?e("NcAvatar",{attrs:{user:a.participant.uid,"display-name":a.participant.displayname,"tooltip-message":a.participant.displayname+" "+t.t("deck","(Group)"),"is-no-user":!0,"disable-":!0,size:32}}):t._e(),t._v(" "),7===a.type?e("NcAvatar",{attrs:{user:a.participant.uid,"display-name":a.participant.displayname,"tooltip-message":a.participant.displayname+" "+t.t("deck","(Team)"),"is-no-user":!0,"disable-":!0,size:32}}):t._e()],1)}))],2)]}}])},[t._v(" "),e("div",t._l(t.users,(function(a){return e("div",{key:a.id,staticClass:"avatar-list-entry"},[e("NcAvatar",{attrs:{user:a.participant.uid,"display-name":a.participant.displayname,"disable-menu":!0,"is-no-user":0!==a.type,size:32}}),t._v(" "),e("div",{staticClass:"avatar-list-entry__label"},[t._v("\n\t\t\t\t\t\t"+t._s(a.participant.displayname)+"\n\t\t\t\t\t")])],1)})),0)])],1),t._v(" "),e("div",{staticClass:"avatar-print-list"},t._l(t.avatarUsers,(function(a){return e("div",{key:a.id,staticClass:"avatar-print-list-item"},[e("NcAvatar",{staticClass:"avatar-print-list-avatar",attrs:{user:a.participant.uid,"display-name":a.participant.displayname,"disable-menu":!0,"is-no-user":0!==a.type,size:24}}),t._v("\n\t\t\t"+t._s(a.participant.displayname)+"\n\t\t")],1)})),0)])},n=[]},94357:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});const r={mixins:[a(79402).Z],computed:{labelStyle(){return t=>({backgroundColor:"#"+t.color,color:this.textColor(t.color)})}}}},58775:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".activity .activity--header[data-v-4d6286d9]{display:flex;padding:10px}.activity .activity--icon[data-v-4d6286d9]{width:16px;height:16px;flex-shrink:0;flex-grow:0}.activity .activity--subject[data-v-4d6286d9]{margin-left:10px}.activity .activity--message[data-v-4d6286d9]{margin-left:44px;color:var(--color-text-light);margin-bottom:10px}.activity .activity--timestamp[data-v-4d6286d9]{flex-grow:1;color:var(--color-text-maxcontrast);text-align:right;font-size:.8em;padding:1px}","",{version:3,sources:["webpack://./src/components/ActivityEntry.vue"],names:[],mappings:"AAGC,6CACC,YAAA,CACA,YAAA,CAGD,2CACC,UAAA,CACA,WAAA,CACA,aAAA,CACA,WAAA,CAED,8CACC,gBAAA,CAED,8CACC,gBAAA,CACA,6BAAA,CACA,kBAAA,CAED,gDACC,WAAA,CACA,mCAAA,CACA,gBAAA,CACA,cAAA,CACA,WAAA",sourcesContent:["\n.activity {\n\n\t.activity--header {\n\t\tdisplay: flex;\n\t\tpadding: 10px;\n\t}\n\n\t.activity--icon {\n\t\twidth: 16px;\n\t\theight: 16px;\n\t\tflex-shrink: 0;\n\t\tflex-grow: 0;\n\t}\n\t.activity--subject {\n\t\tmargin-left: 10px;\n\t}\n\t.activity--message {\n\t\tmargin-left: 44px;\n\t\tcolor: var(--color-text-light);\n\t\tmargin-bottom: 10px;\n\t}\n\t.activity--timestamp {\n\t\tflex-grow: 1;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: right;\n\t\tfont-size: 0.8em;\n\t\tpadding: 1px;\n\t}\n}\n"],sourceRoot:""}]);const o=s},3505:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".controls[data-v-f6667d3c]{display:flex;margin:5px;height:44px;padding-left:44px}.controls .board-title[data-v-f6667d3c]{display:flex;align-items:center}.controls .board-title h2[data-v-f6667d3c]{margin:0;margin-right:10px}.controls .board-title .board-bullet[data-v-f6667d3c]{display:inline-block;width:20px;height:20px;border:none;border-radius:50%;background-color:rgba(0,0,0,0);margin:12px;margin-left:-4px}.controls #stack-add form[data-v-f6667d3c]{display:flex}#app-navigation-toggle-custom[data-v-f6667d3c]{position:static;width:44px;height:44px;cursor:pointer;opacity:1;display:inline-block !important}.board-actions[data-v-f6667d3c]{flex-grow:1;order:100;display:flex;justify-content:flex-end}.board-action-buttons[data-v-f6667d3c]{display:flex}.deck-search[data-v-f6667d3c]{display:flex;align-items:center;justify-content:center}.deck-search input[type=search][data-v-f6667d3c]{background-position:5px;padding-left:24px !important}.filter--item input+label[data-v-f6667d3c]{display:block;padding:6px 0}.filter--item input+label .avatardiv[data-v-f6667d3c]{vertical-align:middle;margin-bottom:2px;margin-right:3px}.filter--item input+label .label[data-v-f6667d3c]{padding:5px;border-radius:3px}.filter[data-v-f6667d3c]{width:240px;max-height:calc(100vh - 150px);position:relative;overflow:auto;padding:8px}.filter h3[data-v-f6667d3c]{margin-top:0px;margin-bottom:5px}.filter-button[data-v-f6667d3c]{padding:0;border-radius:50%;width:44px;height:44px}.filter-button[data-popper-shown][data-v-f6667d3c]{background-color:var(--color-background-hover)}.filter-button[data-popper-shown].button-vue--vue-primary[data-v-f6667d3c]{background-color:var(--color-primary-element)}","",{version:3,sources:["webpack://./src/components/Controls.vue"],names:[],mappings:"AACA,2BACC,YAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CAEA,wCACC,YAAA,CACA,kBAAA,CAEA,2CACC,QAAA,CACA,iBAAA,CAGD,sDACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CACA,8BAAA,CACA,WAAA,CACA,gBAAA,CAIF,2CACC,YAAA,CAIF,+CACC,eAAA,CACA,UAAA,CACA,WAAA,CACA,cAAA,CACA,SAAA,CACA,+BAAA,CAGD,gCACC,WAAA,CACA,SAAA,CACA,YAAA,CACA,wBAAA,CAGD,uCACC,YAAA,CAGD,8BACC,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,iDACC,uBAAA,CACA,4BAAA,CAKD,2CACC,aAAA,CACA,aAAA,CACA,sDACC,qBAAA,CACA,iBAAA,CACA,gBAAA,CAED,kDACC,WAAA,CACA,iBAAA,CAKH,yBACC,WAAA,CACA,8BAAA,CACA,iBAAA,CACA,aAAA,CACA,WAAA,CAGD,4BACC,cAAA,CACA,iBAAA,CAGD,gCACC,SAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,mDACC,8CAAA,CACA,2EACC,6CAAA",sourcesContent:["\n.controls {\n\tdisplay: flex;\n\tmargin: 5px;\n\theight: 44px;\n\tpadding-left: 44px;\n\n\t.board-title {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\th2 {\n\t\t\tmargin: 0;\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t.board-bullet {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 20px;\n\t\t\theight: 20px;\n\t\t\tborder: none;\n\t\t\tborder-radius: 50%;\n\t\t\tbackground-color: transparent;\n\t\t\tmargin: 12px;\n\t\t\tmargin-left: -4px;\n\t\t}\n\t}\n\n\t#stack-add form {\n\t\tdisplay: flex;\n\t}\n}\n\n#app-navigation-toggle-custom {\n\tposition: static;\n\twidth: 44px;\n\theight: 44px;\n\tcursor: pointer;\n\topacity: 1;\n\tdisplay: inline-block !important;\n}\n\n.board-actions {\n\tflex-grow: 1;\n\torder: 100;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n}\n\n.board-action-buttons {\n\tdisplay: flex;\n}\n\n.deck-search {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tinput[type=search] {\n\t\tbackground-position: 5px;\n\t\tpadding-left: 24px !important;\n\t}\n}\n\n.filter--item {\n\tinput + label {\n\t\tdisplay: block;\n\t\tpadding: 6px 0;\n\t\t.avatardiv {\n\t\t\tvertical-align: middle;\n\t\t\tmargin-bottom: 2px;\n\t\t\tmargin-right: 3px;\n\t\t}\n\t\t.label {\n\t\t\tpadding: 5px;\n\t\t\tborder-radius: 3px;\n\t\t}\n\t}\n}\n\n.filter {\n\twidth: 240px;\n\tmax-height: calc(100vh - 150px);\n\tposition: relative;\n\toverflow: auto;\n\tpadding: 8px;\n}\n\n.filter h3 {\n\tmargin-top: 0px;\n\tmargin-bottom: 5px;\n}\n\n.filter-button {\n\tpadding: 0;\n\tborder-radius: 50%;\n\twidth: 44px;\n\theight: 44px;\n\n\t&[data-popper-shown] {\n\t\tbackground-color: var(--color-background-hover);\n\t\t&.button-vue--vue-primary {\n\t\t\tbackground-color: var(--color-primary-element);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const o=s},44975:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".popover:focus{outline:2px solid var(--color-main-text)}","",{version:3,sources:["webpack://./src/components/Controls.vue"],names:[],mappings:"AACA,eACC,wCAAA",sourcesContent:["\n.popover:focus {\n\toutline: 2px solid var(--color-main-text);\n}\n"],sourceRoot:""}]);const o=s},25340:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".avatar-list[data-v-18e0f063]{min-height:44px;align-items:center;padding-right:.5em;border:none;background-color:var(--color-main-background);margin:0;padding-left:6px;display:inline-flex;flex-direction:row-reverse}.avatar-list[data-v-18e0f063]:focus{background-color:#eee}.avatar-wrapper[data-v-18e0f063]{background-color:#b9b9b9;border-radius:50%;border:1px solid var(--color-border-dark);width:var(--size);height:var(--size);text-align:center;color:#fff;line-height:var(--size);font-size:var(--font-size);font-weight:normal;z-index:1;overflow:hidden;box-sizing:content-box !important;margin-left:-8px}","",{version:3,sources:["webpack://./src/components/SessionList.vue"],names:[],mappings:"AAEA,8BACC,eAAA,CACA,kBAAA,CACA,kBAAA,CACA,WAAA,CACA,6CAAA,CACA,QAAA,CACA,gBAAA,CACA,mBAAA,CACA,0BAAA,CAEA,oCACC,qBAAA,CAKF,iCACC,wBAAA,CACA,iBAAA,CACA,yCAAA,CACA,iBAAA,CACA,kBAAA,CACA,iBAAA,CACA,UAAA,CACA,uBAAA,CACA,0BAAA,CACA,kBAAA,CACA,SAAA,CACA,eAAA,CACA,iCAAA,CACA,gBAAA",sourcesContent:["\n\n.avatar-list {\n\tmin-height: 44px;\n\talign-items: center;\n\tpadding-right: 0.5em;\n\tborder: none;\n\tbackground-color: var(--color-main-background);\n\tmargin: 0;\n\tpadding-left: 6px;\n\tdisplay: inline-flex;\n\tflex-direction: row-reverse;\n\n\t&:focus {\n\t\tbackground-color: #eee;\n\t}\n\n}\n\n.avatar-wrapper {\n\tbackground-color: #b9b9b9;\n\tborder-radius: 50%;\n\tborder: 1px solid var(--color-border-dark);\n\twidth: var(--size);\n\theight: var(--size);\n\ttext-align: center;\n\tcolor: #ffffff;\n\tline-height: var(--size);\n\tfont-size: var(--font-size);\n\tfont-weight: normal;\n\tz-index: 1;\n\toverflow: hidden;\n\tbox-sizing: content-box !important;\n\tmargin-left: -8px;\n}\n"],sourceRoot:""}]);const o=s},72664:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".fade-enter-active[data-v-7a5373be]{transition:opacity 250ms}.fade-enter[data-v-7a5373be],.fade-leave-to[data-v-7a5373be]{opacity:0}.zoom-appear-active-class[data-v-7a5373be],.zoom-enter-active[data-v-7a5373be]{animation:zoom-in-7a5373be var(--animation-quick)}.zoom-leave-active[data-v-7a5373be]{animation:zoom-in-7a5373be var(--animation-quick) reverse;will-change:transform}@keyframes zoom-in-7a5373be{0%{transform:scale(0);opacity:0}100%{transform:scale(1);opacity:1}}form[data-v-7a5373be]{text-align:center;display:flex;width:100%;max-width:200px;margin:auto;margin-top:20px}form input[type=text][data-v-7a5373be]{flex-grow:1}.board-wrapper[data-v-7a5373be]{position:relative;width:100%;height:100%;max-height:calc(100vh - 50px);display:flex;flex-direction:column}.board[data-v-7a5373be]{padding-left:16px;position:relative;max-height:calc(100% - 44px);overflow:hidden;overflow-x:auto;flex-grow:1}.smooth-dnd-container.horizontal[data-v-7a5373be]{display:flex;align-items:stretch;height:100%}.smooth-dnd-container.horizontal[data-v-7a5373be] .stack-draggable-wrapper.smooth-dnd-draggable-wrapper{display:flex;height:auto}.smooth-dnd-container.horizontal[data-v-7a5373be] .stack-draggable-wrapper.smooth-dnd-draggable-wrapper .stack{display:flex;flex-direction:column;position:relative}.smooth-dnd-container.horizontal[data-v-7a5373be] .stack-draggable-wrapper.smooth-dnd-draggable-wrapper .stack .smooth-dnd-container.vertical{flex-grow:1;display:flex;flex-direction:column;padding:12px;overflow-x:hidden;overflow-y:auto;padding-top:15px;margin-top:-10px;scrollbar-gutter:stable}.smooth-dnd-container.horizontal[data-v-7a5373be] .stack-draggable-wrapper.smooth-dnd-draggable-wrapper .stack .smooth-dnd-container.vertical>.smooth-dnd-draggable-wrapper{overflow:initial}.smooth-dnd-container.horizontal[data-v-7a5373be] .stack-draggable-wrapper.smooth-dnd-draggable-wrapper .stack .smooth-dnd-container.vertical .smooth-dnd-draggable-wrapper{height:auto}","",{version:3,sources:["webpack://./src/css/animations.scss","webpack://./src/components/board/Board.vue","webpack://./src/css/variables.scss"],names:[],mappings:"AAAA,oCACC,wBAAA,CAGD,6DACC,SAAA,CAGD,+EAEC,iDAAA,CAGD,oCACC,yDAAA,CACA,qBAAA,CAED,4BACC,GACC,kBAAA,CACA,SAAA,CAED,KACC,kBAAA,CACA,SAAA,CAAA,CCpBF,sBACC,iBAAA,CACA,YAAA,CACA,UAAA,CACA,eAAA,CACA,WAAA,CACA,eAAA,CAEA,uCACC,WAAA,CAIF,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,6BAAA,CACA,YAAA,CACA,qBAAA,CAGD,wBACC,iBCvBe,CDwBf,iBAAA,CACA,4BAAA,CACA,eAAA,CACA,eAAA,CACA,WAAA,CAOD,kDACC,YAAA,CACA,mBAAA,CACA,WAAA,CAEA,wGACC,YAAA,CACA,WAAA,CAEA,+GACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,8IACC,WAAA,CACA,YAAA,CACA,qBAAA,CACA,YCvDY,CDwDZ,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,gBAAA,CACA,uBAAA,CAGD,4KACC,gBAAA,CAGD,4KACC,WAAA",sourcesContent:[".fade-enter-active {\n\ttransition: opacity 250ms;\n}\n\n.fade-enter, .fade-leave-to {\n\topacity: 0;\n}\n\n.zoom-appear-active-class,\n.zoom-enter-active {\n\tanimation: zoom-in var(--animation-quick);\n}\n\n.zoom-leave-active {\n\tanimation: zoom-in var(--animation-quick) reverse;\n\twill-change: transform;\n}\n@keyframes zoom-in {\n\t0% {\n\t\ttransform: scale(0);\n\t\topacity: 0;\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t\topacity: 1;\n\t}\n}\n","\n@import '../../css/animations';\n@import '../../css/variables';\n\nform {\n\ttext-align: center;\n\tdisplay: flex;\n\twidth: 100%;\n\tmax-width: 200px;\n\tmargin: auto;\n\tmargin-top: 20px;\n\n\tinput[type=text] {\n\t\tflex-grow: 1;\n\t}\n}\n\n.board-wrapper {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\tmax-height: calc(100vh - 50px);\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.board {\n\tpadding-left: $board-spacing;\n\tposition: relative;\n\tmax-height: calc(100% - 44px);\n\toverflow: hidden;\n\toverflow-x: auto;\n\tflex-grow: 1;\n}\n\n/**\n * Combined rules to handle proper board scrolling and\n * drag and drop behavior\n */\n.smooth-dnd-container.horizontal {\n\tdisplay: flex;\n\talign-items: stretch;\n\theight: 100%;\n\n\t&:deep(.stack-draggable-wrapper.smooth-dnd-draggable-wrapper) {\n\t\tdisplay: flex;\n\t\theight: auto;\n\n\t\t.stack {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tposition: relative;\n\n\t\t\t.smooth-dnd-container.vertical {\n\t\t\t\tflex-grow: 1;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tpadding: $stack-spacing;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: auto;\n\t\t\t\tpadding-top: 15px;\n\t\t\t\tmargin-top: -10px;\n\t\t\t\tscrollbar-gutter: stable;\n\t\t\t}\n\n\t\t\t.smooth-dnd-container.vertical > .smooth-dnd-draggable-wrapper {\n\t\t\t\toverflow: initial;\n\t\t\t}\n\n\t\t\t.smooth-dnd-container.vertical .smooth-dnd-draggable-wrapper {\n\t\t\t\theight: auto;\n\t\t\t}\n\t\t}\n\t}\n}\n\n","$card-spacing: 16px;\n$card-padding: 8px;\n$stack-spacing: 12px;\n$stack-width: 280px;\n$board-spacing: 16px;\n"],sourceRoot:""}]);const o=s},30268:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,'.stack[data-v-3a502c33]{width:316px}.stack__header[data-v-3a502c33]{display:flex;position:sticky;top:0;z-index:100;padding-left:16px;padding-right:16px;cursor:grab;min-height:44px}.stack__header[data-v-3a502c33]:before{content:" ";display:block;position:absolute;width:calc(100% - 16px);height:20px;top:30px;left:0px;z-index:99;transition:top var(--animation-slow);background-image:linear-gradient(180deg, var(--color-main-background) 3px, rgba(255, 255, 255, 0) 100%)}body.theme--dark .stack__header[data-v-3a502c33]:before{background-image:linear-gradient(180deg, var(--color-main-background) 3px, rgba(0, 0, 0, 0) 100%)}.stack__header--add[data-v-3a502c33]:before{height:80px;background-image:linear-gradient(180deg, var(--color-main-background) 68px, rgba(255, 255, 255, 0) 100%)}body.theme--dark .stack__header--add[data-v-3a502c33]:before{background-image:linear-gradient(180deg, var(--color-main-background) 68px, rgba(0, 0, 0, 0) 100%)}.stack__header>*[data-v-3a502c33]{position:relative;z-index:100}.stack__header h3[data-v-3a502c33],.stack__header form[data-v-3a502c33]{flex-grow:1;display:flex;cursor:inherit;margin:0}.stack__header h3 input[type=text][data-v-3a502c33],.stack__header form input[type=text][data-v-3a502c33]{flex-grow:1}.stack__header h3.stack__title[data-v-3a502c33]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:220px;border-radius:3px;margin:6px;padding:4px 4px}.stack__header h3.stack__title[data-v-3a502c33]:focus-visible{outline:2px solid var(--color-border-dark);border-radius:3px}.stack__header form[data-v-3a502c33]{margin:2px 0}.stack__card-add[data-v-3a502c33]{height:44px;flex-shrink:0;z-index:100;display:flex;margin-top:5px;margin-bottom:8px;background-color:var(--color-main-background)}.stack__card-add form[data-v-3a502c33]{display:flex;margin-left:12px;margin-right:12px;width:100%;border:2px solid var(--color-border);border-radius:var(--border-radius-large);overflow:hidden;padding:2px}.stack__card-add.icon-loading-small[data-v-3a502c33]:after,.stack__card-add.icon-loading-small-dark[data-v-3a502c33]:after{margin-left:calc(50% - 25px)}.stack__card-add input[type=text][data-v-3a502c33]{flex-grow:1}.stack__card-add input[data-v-3a502c33]{border:none}.slide-top-enter-active[data-v-3a502c33],.slide-top-leave-active[data-v-3a502c33]{transition:all 100ms ease}.slide-top-enter[data-v-3a502c33],.slide-top-leave-to[data-v-3a502c33]{transform:translateY(-10px);opacity:0;height:0px}.modal__content[data-v-3a502c33]{width:25vw;min-width:250px;min-height:100px;text-align:center;margin:20px 20px 20px 20px}.modal__content button[data-v-3a502c33]{float:right}progress[data-v-3a502c33]{margin-top:3px;margin-bottom:30px}',"",{version:3,sources:["webpack://./src/components/board/Stack.vue","webpack://./src/css/variables.scss"],names:[],mappings:"AAMA,wBACC,WAAA,CAGD,gCACC,YAAA,CACA,eAAA,CACA,KAAA,CACA,WAAA,CACA,iBCfc,CDgBd,kBChBc,CDiBd,WAAA,CACA,eAAA,CAGA,uCACC,WAAA,CACA,aAAA,CACA,iBAAA,CACA,uBAAA,CACA,WAAA,CACA,QAAA,CACA,QAAA,CACA,UAAA,CACA,oCAAA,CAEA,uGAAA,CACA,wDACC,iGAAA,CAIF,4CACC,WAAA,CACA,wGAAA,CACA,6DACC,kGAAA,CAIF,kCACC,iBAAA,CACA,WAAA,CAGD,wEACC,WAAA,CACA,YAAA,CACA,cAAA,CACA,QAAA,CAEA,0GACC,WAAA,CAIF,gDACC,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,eAAA,CAEA,8DACC,0CAAA,CACA,iBAAA,CAIF,qCACC,YAAA,CAIF,kCACC,WAAA,CACA,aAAA,CACA,WAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA,CACA,6CAAA,CAEA,uCACC,YAAA,CACA,gBAAA,CACA,iBAAA,CACA,UAAA,CACA,oCAAA,CACA,wCAAA,CACA,eAAA,CACA,WAAA,CAGD,2HAEC,4BAAA,CAGD,mDACC,WAAA,CAGD,wCACC,WAAA,CAQF,kFAEC,yBAAA,CAGD,uEACC,2BAAA,CACA,SAAA,CACA,UAAA,CAGD,iCACC,UAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CACA,0BAAA,CAGD,wCACC,WAAA,CAGD,0BACC,cAAA,CACA,kBAAA",sourcesContent:["\n\n@use 'sass:math';\n\n@import './../../css/variables';\n\n.stack {\n\twidth: $stack-width + $stack-spacing * 3;\n}\n\n.stack__header {\n\tdisplay: flex;\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 100;\n\tpadding-left: $card-spacing;\n\tpadding-right: $card-spacing;\n\tcursor: grab;\n\tmin-height: 44px;\n\n\t// Smooth fade out of the cards at the top\n\t&:before {\n\t\tcontent: ' ';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\twidth: calc(100% - 16px);\n\t\theight: 20px;\n\t\ttop: 30px;\n\t\tleft: 0px;\n\t\tz-index: 99;\n\t\ttransition: top var(--animation-slow);\n\n\t\tbackground-image: linear-gradient(180deg, var(--color-main-background) 3px, rgba(255, 255, 255, 0) 100%);\n\t\tbody.theme--dark & {\n\t\t\tbackground-image: linear-gradient(180deg, var(--color-main-background) 3px, rgba(0, 0, 0, 0) 100%);\n\t\t}\n\t}\n\n\t&--add:before {\n\t\theight: 80px;\n\t\tbackground-image: linear-gradient(180deg, var(--color-main-background) 68px, rgba(255, 255, 255, 0) 100%);\n\t\tbody.theme--dark & {\n\t\t\tbackground-image: linear-gradient(180deg, var(--color-main-background) 68px, rgba(0, 0, 0, 0) 100%);\n\t\t}\n\t}\n\n\t& > * {\n\t\tposition: relative;\n\t\tz-index: 100;\n\t}\n\n\th3, form {\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tcursor: inherit;\n\t\tmargin: 0;\n\n\t\tinput[type=text] {\n\t\t\tflex-grow: 1;\n\t\t}\n\t}\n\n\th3.stack__title {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tmax-width: calc($stack-width - 60px);\n\t\tborder-radius: 3px;\n\t\tmargin: 6px;\n\t\tpadding: 4px 4px;\n\n\t\t&:focus-visible {\n\t\t\toutline: 2px solid var(--color-border-dark);\n\t\t\tborder-radius: 3px;\n\t\t}\n\t}\n\n\tform {\n\t\tmargin: 2px 0;\n\t}\n}\n\n.stack__card-add {\n\theight: 44px;\n\tflex-shrink: 0;\n\tz-index: 100;\n\tdisplay: flex;\n\tmargin-top: 5px;\n\tmargin-bottom: 8px;\n\tbackground-color: var(--color-main-background);\n\n\tform {\n\t\tdisplay: flex;\n\t\tmargin-left: 12px;\n\t\tmargin-right: 12px;\n\t\twidth: 100%;\n\t\tborder: 2px solid var(--color-border);\n\t\tborder-radius: var(--border-radius-large);\n\t\toverflow: hidden;\n\t\tpadding: 2px;\n\t}\n\n\t&.icon-loading-small:after,\n\t&.icon-loading-small-dark:after {\n\t\tmargin-left: calc(50% - 25px);\n\t}\n\n\tinput[type=text] {\n\t\tflex-grow: 1;\n\t}\n\n\tinput {\n\t\tborder: none;\n\t}\n}\n\n/**\n * Rules to handle scrolling behaviour are inherited from Board.vue\n */\n\n.slide-top-enter-active,\n.slide-top-leave-active {\n\ttransition: all 100ms ease;\n}\n\n.slide-top-enter, .slide-top-leave-to {\n\ttransform: translateY(-10px);\n\topacity: 0;\n\theight: 0px;\n}\n\n.modal__content {\n\twidth: 25vw;\n\tmin-width: 250px;\n\tmin-height: 100px;\n\ttext-align: center;\n\tmargin: 20px 20px 20px 20px;\n}\n\n.modal__content button {\n\tfloat: right;\n}\n\nprogress {\n\tmargin-top: 3px;\n\tmargin-bottom: 30px;\n}\n\n","$card-spacing: 16px;\n$card-padding: 8px;\n$stack-spacing: 12px;\n$stack-width: 280px;\n$board-spacing: 16px;\n"],sourceRoot:""}]);const o=s},43433:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,"section.app-sidebar__tab--active{min-height:auto;display:flex;flex-direction:column;height:100%}.modal__card .app-sidebar{border:0;min-width:calc(100% - 28px);position:relative;top:0;left:0;right:0;max-width:calc(100% - 28px);padding:0 14px;height:auto;overflow:initial;user-select:text;-webkit-user-select:text}.modal__card .app-sidebar:deep .app-sidebar-header{position:sticky;top:0;z-index:100;background-color:var(--color-main-background)}.modal__card .app-sidebar:deep .app-sidebar-tabs__nav{position:sticky;top:87px;margin:0;z-index:100;background-color:var(--color-main-background)}.modal__card .app-sidebar:deep .app-sidebar__tab{overflow:initial}.modal__card .app-sidebar:deep #emptycontent,.modal__card .app-sidebar:deep .emptycontent{margin-top:88px}","",{version:3,sources:["webpack://./src/components/card/CardSidebar.vue"],names:[],mappings:"AAEA,iCACC,eAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CAKD,0BAEC,QAAA,CACA,2BAAA,CACA,iBAAA,CACA,KAAA,CACA,MAAA,CACA,OAAA,CACA,2BAAA,CACA,cAAA,CACA,WAAA,CACA,gBAAA,CACA,gBAAA,CACA,wBAAA,CAIC,mDACC,eAAA,CACA,KAAA,CACA,WAAA,CACA,6CAAA,CAED,sDACC,eAAA,CACA,QAAA,CACA,QAAA,CACA,WAAA,CACA,6CAAA,CAGD,iDACC,gBAAA,CAGD,0FACC,eAAA",sourcesContent:["\n\nsection.app-sidebar__tab--active {\n\tmin-height: auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n}\n\n// FIXME: Obivously we should at some point not randomly reuse the sidebar component\n// since this is not oficially supported\n.modal__card .app-sidebar {\n\t$modal-padding: 14px;\n\tborder: 0;\n\tmin-width: calc(100% - #{$modal-padding * 2});\n\tposition: relative;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tmax-width: calc(100% - #{$modal-padding * 2});\n\tpadding: 0 14px;\n\theight: auto;\n\toverflow: initial;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\n\t// FIXME: test\n\t&:deep {\n\t\t.app-sidebar-header {\n\t\t\tposition: sticky;\n\t\t\ttop: 0;\n\t\t\tz-index: 100;\n\t\t\tbackground-color: var(--color-main-background);\n\t\t}\n\t\t.app-sidebar-tabs__nav {\n\t\t\tposition: sticky;\n\t\t\ttop: 87px;\n\t\t\tmargin: 0;\n\t\t\tz-index: 100;\n\t\t\tbackground-color: var(--color-main-background);\n\t\t}\n\n\t\t.app-sidebar__tab {\n\t\t\toverflow: initial;\n\t\t}\n\n\t\t#emptycontent, .emptycontent {\n\t\t\tmargin-top: 88px;\n\t\t}\n\t}\n}\n\n"],sourceRoot:""}]);const o=s},46360:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".comment-form form[data-v-44c03ab6]{display:flex;flex-grow:1;position:relative}.comment-form form .editor__content[data-v-44c03ab6]{flex-grow:1;margin-left:44px}.comment-form form .editor__content[data-v-44c03ab6] .ProseMirror{width:100%}.comment-form form input[type=submit][data-v-44c03ab6]{width:44px;height:44px;margin:0;padding:13px;background-color:rgba(0,0,0,0);border:none;opacity:.3;position:absolute;bottom:0;right:0}.comment[data-v-44c03ab6]{margin-bottom:10px}.comment--header[data-v-44c03ab6]{display:flex;align-items:center;color:var(--color-text-light)}.comment--header .username[data-v-44c03ab6]{padding:10px}.comment--header .spacer[data-v-44c03ab6]{flex-grow:1}.comment--header .timestamp[data-v-44c03ab6]{color:var(--color-text-maxcontrast)}.comment--content[data-v-44c03ab6]{margin-left:44px;word-break:break-word}","",{version:3,sources:["webpack://./src/css/comments.scss"],names:[],mappings:"AAAA,oCACC,YAAA,CACA,WAAA,CACA,iBAAA,CAEA,qDACC,WAAA,CACA,gBAAA,CAEA,kEACC,UAAA,CAIF,uDACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CACA,QAAA,CACA,OAAA,CAIF,0BACC,kBAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,4CACC,YAAA,CAED,0CACC,WAAA,CAED,6CACC,mCAAA,CAIF,mCACC,gBAAA,CACA,qBAAA",sourcesContent:[".comment-form form {\n\tdisplay: flex;\n\tflex-grow: 1;\n\tposition: relative;\n\n\t.editor__content:deep {\n\t\tflex-grow: 1;\n\t\tmargin-left: 44px;\n\n\t\t.ProseMirror {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\tinput[type='submit'] {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 13px;\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t\topacity: .3;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tright: 0;\n\t}\n}\n\n.comment {\n\tmargin-bottom: 10px;\n}\n\n.comment--header {\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: var(--color-text-light);\n\n\t.username {\n\t\tpadding: 10px;\n\t}\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\t.timestamp {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n\n.comment--content {\n\tmargin-left: 44px;\n\tword-break: break-word;\n}\n"],sourceRoot:""}]);const o=s},37810:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".section-wrapper[data-v-d1f1d148]{display:flex;max-width:100%;margin-top:10px}.section-wrapper .section-label[data-v-d1f1d148]{background-position:0px center;width:28px;margin-left:9px;flex-shrink:0}.section-wrapper .section-details[data-v-d1f1d148]{flex-grow:1;display:flex;flex-wrap:wrap}.section-wrapper .section-details .remove-due-button[data-v-d1f1d148]{margin-top:-2px;margin-left:6px}.button-group[data-v-d1f1d148]{width:100%;display:flex}.button-group button[data-v-d1f1d148]{width:100%}.done[data-v-d1f1d148]{display:flex}.tag[data-v-d1f1d148]{flex-grow:0;flex-shrink:1;overflow:hidden;padding:0px 5px;border-radius:15px;font-size:85%;margin-right:3px}.avatarLabel[data-v-d1f1d148]{padding:6px}.section-details[data-v-d1f1d148] .multiselect__tags-wrap{flex-wrap:wrap}.avatar-list--readonly .avatardiv[data-v-d1f1d148]{margin-right:3px}.avatarlist--inline[data-v-d1f1d148]{display:flex;align-items:center;margin-right:3px}.avatarlist--inline .avatarLabel[data-v-d1f1d148]{padding:0}.multiselect[data-v-d1f1d148] .multiselect__tags-wrap{z-index:2}.multiselect.multiselect--active[data-v-d1f1d148] .multiselect__tags-wrap{z-index:0}","",{version:3,sources:["webpack://./src/components/card/CardSidebarTabDetails.vue"],names:[],mappings:"AACA,kCACC,YAAA,CACA,cAAA,CACA,eAAA,CAEA,iDACC,8BAAA,CACA,UAAA,CACA,eAAA,CACA,aAAA,CAGD,mDACC,WAAA,CACA,YAAA,CACA,cAAA,CAEA,sEACC,eAAA,CACA,eAAA,CAKH,+BACC,UAAA,CACA,YAAA,CAEA,sCACC,UAAA,CAIF,uBACC,YAAA,CAGD,sBACC,WAAA,CACA,aAAA,CACA,eAAA,CACA,eAAA,CACA,kBAAA,CACA,aAAA,CACA,gBAAA,CAGD,8BACC,WAAA,CAGD,0DACC,cAAA,CAGD,mDACC,gBAAA,CAGD,qCACC,YAAA,CACA,kBAAA,CACA,gBAAA,CACA,kDACC,SAAA,CAIF,sDACC,SAAA,CAGD,0EACC,SAAA",sourcesContent:["\n.section-wrapper {\n\tdisplay: flex;\n\tmax-width: 100%;\n\tmargin-top: 10px;\n\n\t.section-label {\n\t\tbackground-position: 0px center;\n\t\twidth: 28px;\n\t\tmargin-left: 9px;\n\t\tflex-shrink: 0;\n\t}\n\n\t.section-details {\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\n\t\t.remove-due-button{\n\t\t\tmargin-top: -2px;\n\t\t\tmargin-left: 6px;\n\t\t}\n\t}\n}\n\n.button-group {\n\twidth: 100%;\n\tdisplay: flex;\n\n\tbutton {\n\t\twidth: 100%;\n\t}\n}\n\n.done {\n\tdisplay: flex;\n}\n\n.tag {\n\tflex-grow: 0;\n\tflex-shrink: 1;\n\toverflow: hidden;\n\tpadding: 0px 5px;\n\tborder-radius: 15px;\n\tfont-size: 85%;\n\tmargin-right: 3px;\n}\n\n.avatarLabel {\n\tpadding: 6px\n}\n\n.section-details:deep(.multiselect__tags-wrap) {\n\tflex-wrap: wrap;\n}\n\n.avatar-list--readonly .avatardiv {\n\tmargin-right: 3px;\n}\n\n.avatarlist--inline {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-right: 3px;\n\t.avatarLabel {\n\t\tpadding: 0;\n\t}\n}\n\n.multiselect:deep(.multiselect__tags-wrap) {\n\tz-index: 2;\n}\n\n.multiselect.multiselect--active:deep(.multiselect__tags-wrap) {\n\tz-index: 0;\n}\n"],sourceRoot:""}]);const o=s},22696:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".comment-form form[data-v-11857953]{display:flex;flex-grow:1;position:relative}.comment-form form .editor__content[data-v-11857953]{flex-grow:1;margin-left:44px}.comment-form form .editor__content[data-v-11857953] .ProseMirror{width:100%}.comment-form form input[type=submit][data-v-11857953]{width:44px;height:44px;margin:0;padding:13px;background-color:rgba(0,0,0,0);border:none;opacity:.3;position:absolute;bottom:0;right:0}.comment[data-v-11857953]{margin-bottom:10px}.comment--header[data-v-11857953]{display:flex;align-items:center;color:var(--color-text-light)}.comment--header .username[data-v-11857953]{padding:10px}.comment--header .spacer[data-v-11857953]{flex-grow:1}.comment--header .timestamp[data-v-11857953]{color:var(--color-text-maxcontrast)}.comment--content[data-v-11857953]{margin-left:44px;word-break:break-word}.comment-form__contenteditable[data-v-11857953]{word-break:break-word;border-radius:var(--border-radius-large)}.atwho-wrap[data-v-11857953]{width:100%}.atwho-wrap>div[contenteditable][data-v-11857953]{width:100%}.atwho-wrap>div[contenteditable][data-v-11857953]>span>div{vertical-align:middle}.comment-form[data-v-11857953] .atwho-li{height:32px}.atwho-li--avatar[data-v-11857953]{margin-right:10px}","",{version:3,sources:["webpack://./src/css/comments.scss","webpack://./src/components/card/CommentForm.vue"],names:[],mappings:"AAAA,oCACC,YAAA,CACA,WAAA,CACA,iBAAA,CAEA,qDACC,WAAA,CACA,gBAAA,CAEA,kEACC,UAAA,CAIF,uDACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CACA,QAAA,CACA,OAAA,CAIF,0BACC,kBAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,4CACC,YAAA,CAED,0CACC,WAAA,CAED,6CACC,mCAAA,CAIF,mCACC,gBAAA,CACA,qBAAA,CC/CD,gDACC,qBAAA,CACA,wCAAA,CAGD,6BACC,UAAA,CACA,kDACC,UAAA,CAEA,2DACC,qBAAA,CAKH,yCACC,WAAA,CAGD,mCACC,iBAAA",sourcesContent:[".comment-form form {\n\tdisplay: flex;\n\tflex-grow: 1;\n\tposition: relative;\n\n\t.editor__content:deep {\n\t\tflex-grow: 1;\n\t\tmargin-left: 44px;\n\n\t\t.ProseMirror {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\tinput[type='submit'] {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 13px;\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t\topacity: .3;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tright: 0;\n\t}\n}\n\n.comment {\n\tmargin-bottom: 10px;\n}\n\n.comment--header {\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: var(--color-text-light);\n\n\t.username {\n\t\tpadding: 10px;\n\t}\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\t.timestamp {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n\n.comment--content {\n\tmargin-left: 44px;\n\tword-break: break-word;\n}\n","\n@import '../../css/comments';\n\n.comment-form__contenteditable {\n\tword-break: break-word;\n\tborder-radius: var(--border-radius-large)\n}\n\n.atwho-wrap {\n\twidth: 100%;\n\t& > div[contenteditable] {\n\t\twidth: 100%;\n\n\t\t&:deep > span > div {\n\t\t\tvertical-align: middle;\n\t\t}\n\t}\n}\n\n.comment-form:deep(.atwho-li) {\n\theight: 32px;\n}\n\n.atwho-li--avatar {\n\tmargin-right: 10px;\n}\n"],sourceRoot:""}]);const o=s},33279:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".comment-form form[data-v-31ec9839]{display:flex;flex-grow:1;position:relative}.comment-form form .editor__content[data-v-31ec9839]{flex-grow:1;margin-left:44px}.comment-form form .editor__content[data-v-31ec9839] .ProseMirror{width:100%}.comment-form form input[type=submit][data-v-31ec9839]{width:44px;height:44px;margin:0;padding:13px;background-color:rgba(0,0,0,0);border:none;opacity:.3;position:absolute;bottom:0;right:0}.comment[data-v-31ec9839]{margin-bottom:10px}.comment--header[data-v-31ec9839]{display:flex;align-items:center;color:var(--color-text-light)}.comment--header .username[data-v-31ec9839]{padding:10px}.comment--header .spacer[data-v-31ec9839]{flex-grow:1}.comment--header .timestamp[data-v-31ec9839]{color:var(--color-text-maxcontrast)}.comment--content[data-v-31ec9839]{margin-left:44px;word-break:break-word}.reply[data-v-31ec9839]{margin:0 0 0 44px}.reply.reply--preview[data-v-31ec9839]{margin:4px 0;padding:8px;background-color:var(--color-background-hover);border-radius:var(--border-radius-large)}.reply.reply--preview .reply--wrapper[data-v-31ec9839]{margin:8px}.reply.reply--preview .reply--cancel[data-v-31ec9839]{margin-right:-12px;margin-top:-12px}.reply .reply--wrapper[data-v-31ec9839]{border-left:4px solid var(--color-border-dark);padding-left:8px}.reply[data-v-31ec9839] .rich-text--wrapper{margin-top:-3px;color:var(--color-text-lighter)}.reply .reply--header[data-v-31ec9839]{display:flex}.reply .reply--hint[data-v-31ec9839]{color:var(--color-text-lighter);flex-grow:1}.reply .comment--content[data-v-31ec9839]{margin:0}.comment--content[data-v-31ec9839] a{text-decoration:underline}.comment--content[data-v-31ec9839] p{margin-bottom:1em}","",{version:3,sources:["webpack://./src/css/comments.scss","webpack://./src/components/card/CommentItem.vue"],names:[],mappings:"AAAA,oCACC,YAAA,CACA,WAAA,CACA,iBAAA,CAEA,qDACC,WAAA,CACA,gBAAA,CAEA,kEACC,UAAA,CAIF,uDACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CACA,QAAA,CACA,OAAA,CAIF,0BACC,kBAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,4CACC,YAAA,CAED,0CACC,WAAA,CAED,6CACC,mCAAA,CAIF,mCACC,gBAAA,CACA,qBAAA,CC/CD,wBACC,iBAAA,CAEA,uCACC,YAAA,CACA,WAAA,CACA,8CAAA,CACA,wCAAA,CAEA,uDACC,UAAA,CAGD,sDACC,kBAAA,CACA,gBAAA,CAIF,wCACC,8CAAA,CACA,gBAAA,CAGD,4CACC,eAAA,CACA,+BAAA,CAGD,uCACC,YAAA,CAGD,qCACC,+BAAA,CACA,WAAA,CAGD,0CACC,QAAA,CAKD,qCACC,yBAAA,CAGD,qCACC,iBAAA",sourcesContent:[".comment-form form {\n\tdisplay: flex;\n\tflex-grow: 1;\n\tposition: relative;\n\n\t.editor__content:deep {\n\t\tflex-grow: 1;\n\t\tmargin-left: 44px;\n\n\t\t.ProseMirror {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\tinput[type='submit'] {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 13px;\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t\topacity: .3;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tright: 0;\n\t}\n}\n\n.comment {\n\tmargin-bottom: 10px;\n}\n\n.comment--header {\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: var(--color-text-light);\n\n\t.username {\n\t\tpadding: 10px;\n\t}\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n\t.timestamp {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n\n.comment--content {\n\tmargin-left: 44px;\n\tword-break: break-word;\n}\n","\n@import '../../css/comments';\n\n.reply {\n\tmargin: 0 0 0 44px;\n\n\t&.reply--preview {\n\t\tmargin: 4px 0;\n\t\tpadding: 8px;\n\t\tbackground-color: var(--color-background-hover);\n\t\tborder-radius: var(--border-radius-large);\n\n\t\t.reply--wrapper {\n\t\t\tmargin: 8px;\n\t\t}\n\n\t\t.reply--cancel {\n\t\t\tmargin-right: -12px;\n\t\t\tmargin-top: -12px;\n\t\t}\n\t}\n\n\t.reply--wrapper {\n\t\tborder-left: 4px solid var(--color-border-dark);\n\t\tpadding-left: 8px;\n\t}\n\n\t&:deep(.rich-text--wrapper) {\n\t\tmargin-top: -3px;\n\t\tcolor: var(--color-text-lighter);\n\t}\n\n\t.reply--header {\n\t\tdisplay: flex;\n\t}\n\n\t.reply--hint {\n\t\tcolor: var(--color-text-lighter);\n\t\tflex-grow: 1;\n\t}\n\n\t.comment--content {\n\t\tmargin: 0;\n\t}\n}\n\n.comment--content:deep {\n\ta {\n\t\ttext-decoration: underline;\n\t}\n\n\tp {\n\t\tmargin-bottom: 1em;\n\t}\n}\n"],sourceRoot:""}]);const o=s},81808:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".avatars[data-v-c0f7e9f2]{position:relative;flex-grow:1}.avatars[data-v-c0f7e9f2] .popovermenu{margin-right:-4px}.avatars[data-v-c0f7e9f2] .popovermenu img{padding:0;width:32px !important;height:32px !important;margin:6px;border-radius:50%}.avatar-list[data-v-c0f7e9f2]{float:right;display:inline-flex;flex-direction:row-reverse;padding:0;padding-right:12px;margin:0;border:0;background:rgba(0,0,0,0)}.avatar-list>div[data-v-c0f7e9f2]{height:32px}.avatar-list .avatardiv[data-v-c0f7e9f2],.avatar-list[data-v-c0f7e9f2] .avatardiv{width:32px;height:32px;box-sizing:content-box !important;margin-right:-12px;transition:margin-right .2s ease-in-out;border:2px solid var(--color-main-background)}.avatar-list .more-avatars[data-v-c0f7e9f2]{width:32px;height:32px;background-color:var(--color-background-dark) !important;cursor:pointer;color:var(--color-text-maxcontrast)}.avatar-list-entry[data-v-c0f7e9f2]{display:flex;padding:6px 12px}.avatar-list-entry__label[data-v-c0f7e9f2]{padding:4px 12px}.popovermenu[data-v-c0f7e9f2]{display:block;margin:40px -6px}.avatar-print-list[data-v-c0f7e9f2]{display:none}@media print{.avatar-list[data-v-c0f7e9f2]{display:none}.avatar-print-list-item[data-v-c0f7e9f2]{align-items:center;display:flex;gap:10px;margin-bottom:10px}.avatar-print-list[data-v-c0f7e9f2]{display:block;padding-top:5px}}","",{version:3,sources:["webpack://./src/components/cards/AvatarList.vue"],names:[],mappings:"AACA,0BACC,iBAAA,CACA,WAAA,CACA,uCACC,iBAAA,CACA,2CACC,SAAA,CACA,qBAAA,CACA,sBAAA,CACA,UAAA,CACA,iBAAA,CAOH,8BACC,WAAA,CACA,mBAAA,CACA,0BAAA,CACA,SAAA,CACA,kBAPe,CAQf,QAAA,CACA,QAAA,CACA,wBAAA,CAEA,kCACC,WAAA,CAGD,kFAEC,UAAA,CACA,WAAA,CACA,iCAAA,CACA,kBAAA,CACA,uCAAA,CACA,6CAAA,CAGD,4CACC,UAAA,CACA,WAAA,CACA,wDAAA,CACA,cAAA,CACA,mCAAA,CAKF,oCACC,YAAA,CACA,gBAAA,CAEA,2CACC,gBAAA,CAIF,8BACC,aAAA,CACA,gBAAA,CAGD,oCACC,YAAA,CAGD,aACC,8BACC,YAAA,CAGD,yCACC,kBAAA,CACA,YAAA,CACA,QAAA,CACA,kBAAA,CAGD,oCACC,aAAA,CACA,eAAA,CAAA",sourcesContent:["\n.avatars {\n\tposition: relative;\n\tflex-grow: 1;\n\t:deep(.popovermenu) {\n\t\tmargin-right: -4px;\n\t\timg {\n\t\t\tpadding: 0;\n\t\t\twidth: 32px !important;\n\t\t\theight: 32px !important;\n\t\t\tmargin: 6px;\n\t\t\tborder-radius: 50%;\n\t\t}\n\t}\n}\n\n$avatar-offset: 12px;\n\n.avatar-list {\n\tfloat: right;\n\tdisplay: inline-flex;\n\tflex-direction: row-reverse;\n\tpadding: 0;\n\tpadding-right: $avatar-offset;\n\tmargin: 0;\n\tborder: 0;\n\tbackground: transparent;\n\n\t& > div {\n\t\theight: 32px;\n\t}\n\n\t.avatardiv,\n\t:deep(.avatardiv) {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tbox-sizing: content-box !important;\n\t\tmargin-right: -$avatar-offset;\n\t\ttransition: margin-right 0.2s ease-in-out;\n\t\tborder: 2px solid var(--color-main-background);\n\t}\n\n\t.more-avatars {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tbackground-color: var(--color-background-dark) !important;\n\t\tcursor: pointer;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n}\n\n.avatar-list-entry {\n\tdisplay: flex;\n\tpadding: 6px 12px;\n\n\t&__label {\n\t\tpadding: 4px 12px;\n\t}\n}\n\n.popovermenu {\n\tdisplay: block;\n\tmargin: 40px -6px;\n}\n\n.avatar-print-list {\n\tdisplay: none;\n}\n\n@media print {\n\t.avatar-list {\n\t\tdisplay: none;\n\t}\n\n\t.avatar-print-list-item {\n\t\talign-items: center;\n\t\tdisplay: flex;\n\t\tgap: 10px;\n\t\tmargin-bottom: 10px;\n\t}\n\n\t.avatar-print-list {\n\t\tdisplay: block;\n\t\tpadding-top: 5px;\n\t}\n}\n"],sourceRoot:""}]);const o=s},3025:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".badges[data-v-1cd7fbf0]{display:flex;width:100%;flex-grow:1;flex-direction:row;gap:3px}.badges .icon-badge[data-v-1cd7fbf0]{color:var(--color-text-maxcontrast);display:flex;margin-right:2px}.badges .icon-badge span[data-v-1cd7fbf0],.badges .icon-badge[data-v-1cd7fbf0] span{padding:2px}.inline-badges[data-v-1cd7fbf0]{display:flex;flex-direction:row;flex-wrap:wrap;gap:3px}.badges .icon.due[data-v-1cd7fbf0]{background-position:4px center;border-radius:var(--border-radius);padding:4px;font-size:13px;display:flex;align-items:center;opacity:.5;flex-shrink:1}.badges .icon.due .icon[data-v-1cd7fbf0]{background-size:contain}.badges .icon.due.overdue[data-v-1cd7fbf0]{background-color:var(--color-error);color:var(--color-primary-element-text);opacity:.7}.badges .icon.due.now[data-v-1cd7fbf0]{background-color:var(--color-warning);opacity:.7}.badges .icon.due.next[data-v-1cd7fbf0]{background-color:var(--color-background-dark);opacity:.7}.badges .icon.due span[data-v-1cd7fbf0]{margin-left:20px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.badge-left[data-v-1cd7fbf0],.badge-right[data-v-1cd7fbf0]{display:flex}.badge-left[data-v-1cd7fbf0]{align-self:end;margin-bottom:8px;flex-basis:auto;flex-grow:1;flex-shrink:1;flex-wrap:wrap;align-content:flex-end;gap:3px}.badge-right[data-v-1cd7fbf0]{align-items:center;align-self:flex-end;display:flex;justify-items:center;max-width:165px;flex-grow:0;flex-shrink:0}.fade-enter-active[data-v-1cd7fbf0],.fade-leave-active[data-v-1cd7fbf0]{transition:opacity .125s}.fade-enter[data-v-1cd7fbf0],.fade-leave-to[data-v-1cd7fbf0]{opacity:0}@media print{.badges[data-v-1cd7fbf0]{align-items:flex-start;max-height:none !important}}","",{version:3,sources:["webpack://./src/components/cards/CardBadges.vue"],names:[],mappings:"AACA,yBACC,YAAA,CACA,UAAA,CACA,WAAA,CACA,kBAAA,CACA,OAAA,CAEA,qCACC,mCAAA,CACA,YAAA,CACA,gBAAA,CAEA,oFAEC,WAAA,CAKH,gCACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,OAAA,CAGD,mCACC,8BAAA,CACA,kCAAA,CACA,WAAA,CACA,cAAA,CACA,YAAA,CACA,kBAAA,CACA,UAAA,CACA,aAAA,CAEA,yCACC,uBAAA,CAGD,2CACC,mCAAA,CACA,uCAAA,CACA,UAAA,CAED,uCACC,qCAAA,CACA,UAAA,CAED,wCACC,6CAAA,CACA,UAAA,CAGD,wCACC,gBAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CAIF,2DACC,YAAA,CAGD,6BACC,cAAA,CACA,iBAAA,CACA,eAAA,CACA,WAAA,CACA,aAAA,CACA,cAAA,CACA,sBAAA,CACA,OAAA,CAGD,8BACC,kBAAA,CACA,mBAAA,CACA,YAAA,CACA,oBAAA,CACA,eAAA,CACA,WAAA,CACA,aAAA,CAGD,wEACC,wBAAA,CAGD,6DACC,SAAA,CAGD,aACC,yBACC,sBAAA,CACA,0BAAA,CAAA",sourcesContent:["\n.badges {\n\tdisplay: flex;\n\twidth: 100%;\n\tflex-grow: 1;\n\tflex-direction: row;\n\tgap: 3px;\n\n\t.icon-badge {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tdisplay: flex;\n\t\tmargin-right: 2px;\n\n\t\tspan,\n\t\t&:deep(span) {\n\t\t\tpadding: 2px;\n\t\t}\n\t}\n}\n\n.inline-badges {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n\tgap: 3px;\n}\n\n.badges .icon.due {\n\tbackground-position: 4px center;\n\tborder-radius: var(--border-radius);\n\tpadding: 4px;\n\tfont-size: 13px;\n\tdisplay: flex;\n\talign-items: center;\n\topacity: .5;\n\tflex-shrink: 1;\n\n\t.icon {\n\t\tbackground-size: contain;\n\t}\n\n\t&.overdue {\n\t\tbackground-color: var(--color-error);\n\t\tcolor: var(--color-primary-element-text);\n\t\topacity: .7;\n\t}\n\t&.now {\n\t\tbackground-color: var(--color-warning);\n\t\topacity: .7;\n\t}\n\t&.next {\n\t\tbackground-color: var(--color-background-dark);\n\t\topacity: .7;\n\t}\n\n\tspan {\n\t\tmargin-left: 20px;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t}\n}\n\n.badge-left, .badge-right {\n\tdisplay: flex;\n}\n\n.badge-left {\n\talign-self: end;\n\tmargin-bottom: 8px;\n\tflex-basis: auto;\n\tflex-grow: 1;\n\tflex-shrink: 1;\n\tflex-wrap: wrap;\n\talign-content: flex-end;\n\tgap: 3px;\n}\n\n.badge-right {\n\talign-items: center;\n\talign-self: flex-end;\n\tdisplay: flex;\n\tjustify-items: center;\n\tmax-width: 165px;\n\tflex-grow: 0;\n\tflex-shrink: 0;\n}\n\n.fade-enter-active, .fade-leave-active {\n\ttransition: opacity .125s;\n}\n\n.fade-enter, .fade-leave-to {\n\topacity: 0;\n}\n\n@media print {\n\t.badges {\n\t\talign-items: flex-start;\n\t\tmax-height: none !important;\n\t}\n}\n"],sourceRoot:""}]);const o=s},94388:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".card-cover[data-v-868099ce]{height:100px;display:flex;margin-top:-8px;margin-left:-8px;margin-right:-8px}.card-cover .image-wrapper[data-v-868099ce]{flex:1;position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center}.card-cover .image-wrapper.rounded-left[data-v-868099ce]{border-top-left-radius:10px}.card-cover .image-wrapper.rounded-right[data-v-868099ce]{border-top-right-radius:10px}","",{version:3,sources:["webpack://./src/components/cards/CardCover.vue"],names:[],mappings:"AAGA,6BACC,YAAA,CACA,YAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CAEA,4CACC,MAAA,CACA,iBAAA,CACA,qBAAA,CACA,2BAAA,CACA,iCAAA,CACA,yDACC,2BAAA,CAED,0DACC,4BAAA",sourcesContent:["\n@import '../../css/variables';\n\n.card-cover {\n\theight: 100px;\n\tdisplay: flex;\n\tmargin-top: -8px;\n\tmargin-left: -8px;\n\tmargin-right: -8px;\n\n\t.image-wrapper {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tbackground-size: cover;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: center center;\n\t\t&.rounded-left {\n\t\t\tborder-top-left-radius: 10px;\n\t\t}\n\t\t&.rounded-right {\n\t\t\tborder-top-right-radius: 10px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const o=s},61620:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".fade-enter-active[data-v-9aacc27e]{transition:opacity 250ms}.fade-enter[data-v-9aacc27e],.fade-leave-to[data-v-9aacc27e]{opacity:0}.zoom-appear-active-class[data-v-9aacc27e],.zoom-enter-active[data-v-9aacc27e]{animation:zoom-in-9aacc27e var(--animation-quick)}.zoom-leave-active[data-v-9aacc27e]{animation:zoom-in-9aacc27e var(--animation-quick) reverse;will-change:transform}@keyframes zoom-in-9aacc27e{0%{transform:scale(0);opacity:0}100%{transform:scale(1);opacity:1}}.card[data-v-9aacc27e]{transition:border .1s ease-in-out;border-radius:var(--border-radius-large);font-size:100%;background-color:var(--color-main-background);margin-bottom:16px;padding:var(--default-grid-baseline) 8px;border:2px solid var(--color-border);width:100%;display:flex;flex-direction:column;gap:6px}.card[data-v-9aacc27e] *{cursor:pointer}.card.current-card[data-v-9aacc27e]{border:2px solid var(--color-primary-element)}.card[data-v-9aacc27e]:focus,.card[data-v-9aacc27e]:focus-visible,.card[data-v-9aacc27e]:focus-within{outline:none;border:2px solid var(--color-border-maxcontrast)}.card:focus.current-card[data-v-9aacc27e],.card:focus-visible.current-card[data-v-9aacc27e],.card:focus-within.current-card[data-v-9aacc27e]{border:2px solid var(--color-primary-element)}.card .card-upper[data-v-9aacc27e]{display:flex}.card .card-upper h3[data-v-9aacc27e]{margin:0;padding:6px;flex-grow:1;font-size:100%;overflow:hidden;word-wrap:break-word;padding-left:4px;align-self:center}.card .card-upper h3.editable span[data-v-9aacc27e]{cursor:text;padding-right:8px;padding-top:3px;padding-bottom:3px}.card .card-upper h3.editable span[data-v-9aacc27e]:focus,.card .card-upper h3.editable span[data-v-9aacc27e]:focus-visible{outline:none}.card .card-upper h3.editable[data-v-9aacc27e]:focus-within{outline:2px solid var(--color-border-dark);border-radius:3px}.card .card-upper .card-menu[data-v-9aacc27e]{height:44px;align-self:end}.card .labels[data-v-9aacc27e]{flex-grow:1;flex-shrink:1;min-width:0;display:flex;flex-direction:row;gap:3px}.card .labels li[data-v-9aacc27e]{flex-grow:0;flex-shrink:1;display:flex;flex-direction:row;overflow:hidden;padding:1px 8px;border-radius:15px;font-size:13px}.card .labels li[data-v-9aacc27e]:hover{overflow:unset}.card .labels li span[data-v-9aacc27e]{flex-grow:0;flex-shrink:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.card .card-controls[data-v-9aacc27e]{display:flex}.card.card__editable .card-controls[data-v-9aacc27e]{margin-right:0}.card.card__archived[data-v-9aacc27e]{background-color:var(--color-background-dark)}.card .card-labels[data-v-9aacc27e]{display:flex;align-items:end;margin-bottom:var(--default-grid-baseline)}.card .card-labels .labels[data-v-9aacc27e]{flex-wrap:wrap;align-self:flex-start}.right[data-v-9aacc27e]{display:flex;align-items:flex-start}.card-related[data-v-9aacc27e]{display:flex;padding:12px;padding-bottom:0px;color:var(--color-text-maxcontrast)}.card-related .board-bullet[data-v-9aacc27e]{display:inline-block;width:12px;height:12px;border:none;border-radius:50%;background-color:rgba(0,0,0,0);margin-top:4px;margin-right:4px}.compact[data-v-9aacc27e]{min-height:44px}.compact .duedate[data-v-9aacc27e]{margin-right:0;display:flex;height:32px;width:32px;margin-top:6px}.compact.has-labels[data-v-9aacc27e]{padding-bottom:8px}.compact .labels[data-v-9aacc27e]{height:6px;margin-top:-7px;margin-bottom:3px}.compact .labels li[data-v-9aacc27e]{width:30px;height:6px;font-size:0;color:rgba(0,0,0,0)}.compact .card-menu[data-v-9aacc27e]{align-self:start !important}@media(prefers-color-scheme: dark){.card[data-v-9aacc27e]{border:2px solid var(--color-border-dark);box-shadow:none}}@media print{.card-menu[data-v-9aacc27e]{display:none}}","",{version:3,sources:["webpack://./src/css/animations.scss","webpack://./src/components/cards/CardItem.vue","webpack://./src/css/variables.scss","webpack://./src/css/labels.scss"],names:[],mappings:"AAAA,oCACC,wBAAA,CAGD,6DACC,SAAA,CAGD,+EAEC,iDAAA,CAGD,oCACC,yDAAA,CACA,qBAAA,CAED,4BACC,GACC,kBAAA,CACA,SAAA,CAED,KACC,kBAAA,CACA,SAAA,CAAA,CCfF,uBACC,iCAAA,CACA,wCAAA,CACA,cAAA,CACA,6CAAA,CACA,kBCdc,CDed,wCAAA,CACA,oCAAA,CACA,UAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CAEA,yBACC,cAAA,CAGD,oCACC,6CAAA,CAGD,sGACC,YAAA,CACA,gDAAA,CACA,6IACC,6CAAA,CAIF,mCACC,YAAA,CACA,sCACC,QAAA,CACA,WAAA,CACA,WAAA,CACA,cAAA,CACA,eAAA,CACA,oBAAA,CACA,gBAAA,CACA,iBAAA,CAEC,oDACC,WAAA,CACA,iBAAA,CACA,eAAA,CACA,kBAAA,CAEA,4HACC,YAAA,CAIF,4DACC,0CAAA,CACA,iBAAA,CAIH,8CACC,WAAA,CACA,cAAA,CElEH,+BACC,WAAA,CACA,aAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,kCACC,WAAA,CACA,aAAA,CACA,YAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CACA,kBAAA,CACA,cAAA,CAEA,wCACC,cAAA,CAGD,uCACC,WAAA,CACA,aAAA,CACA,WAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CF6CF,sCACC,YAAA,CAED,qDACC,cAAA,CAED,sCACC,6CAAA,CAED,oCACC,YAAA,CACA,eAAA,CACA,0CAAA,CAEA,4CACC,cAAA,CACA,qBAAA,CAKH,wBACC,YAAA,CACA,sBAAA,CAGD,+BACC,YAAA,CACA,YAAA,CACA,kBAAA,CACA,mCAAA,CAEA,6CACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CACA,8BAAA,CACA,cAAA,CACA,gBAAA,CAIF,0BACC,eAAA,CAEA,mCACC,cAAA,CACA,YAAA,CACA,WAAA,CACA,UAAA,CACA,cAAA,CAED,qCACC,kBClIa,CDoId,kCACC,UAAA,CACA,eAAA,CACA,iBAAA,CAED,qCACC,UAAA,CACA,UAAA,CACA,WAAA,CACA,mBAAA,CAED,qCACC,2BAAA,CAIF,mCACC,uBAjJA,yCAAA,CACA,eAAA,CAAA,CAqJD,aACC,4BACC,YAAA,CAAA",sourcesContent:[".fade-enter-active {\n\ttransition: opacity 250ms;\n}\n\n.fade-enter, .fade-leave-to {\n\topacity: 0;\n}\n\n.zoom-appear-active-class,\n.zoom-enter-active {\n\tanimation: zoom-in var(--animation-quick);\n}\n\n.zoom-leave-active {\n\tanimation: zoom-in var(--animation-quick) reverse;\n\twill-change: transform;\n}\n@keyframes zoom-in {\n\t0% {\n\t\ttransform: scale(0);\n\t\topacity: 0;\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t\topacity: 1;\n\t}\n}\n","\n@import './../../css/animations';\n@import './../../css/variables';\n\n@mixin dark-card {\n\tborder: 2px solid var(--color-border-dark);\n\tbox-shadow: none;\n}\n\n.card {\n\ttransition: border 0.1s ease-in-out;\n\tborder-radius: var(--border-radius-large);\n\tfont-size: 100%;\n\tbackground-color: var(--color-main-background);\n\tmargin-bottom: $card-spacing;\n\tpadding: var(--default-grid-baseline) $card-padding;\n\tborder: 2px solid var(--color-border);\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 6px;\n\n\t&:deep(*) {\n\t\tcursor: pointer;\n\t}\n\n\t&.current-card {\n\t\tborder: 2px solid var(--color-primary-element);\n\t}\n\n\t&:focus, &:focus-visible, &:focus-within {\n\t\toutline: none;\n\t\tborder: 2px solid var(--color-border-maxcontrast);\n\t\t&.current-card {\n\t\t\tborder: 2px solid var(--color-primary-element);\n\t\t}\n\t}\n\n\t.card-upper {\n\t\tdisplay: flex;\n\t\th3 {\n\t\t\tmargin: 0;\n\t\t\tpadding: 6px;\n\t\t\tflex-grow: 1;\n\t\t\tfont-size: 100%;\n\t\t\toverflow: hidden;\n\t\t\tword-wrap: break-word;\n\t\t\tpadding-left: 4px;\n\t\t\talign-self: center;\n\t\t\t&.editable {\n\t\t\t\tspan {\n\t\t\t\t\tcursor: text;\n\t\t\t\t\tpadding-right: 8px;\n\t\t\t\t\tpadding-top: 3px;\n\t\t\t\t\tpadding-bottom: 3px;\n\n\t\t\t\t\t&:focus, &:focus-visible {\n\t\t\t\t\t\toutline: none;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t&:focus-within {\n\t\t\t\t\toutline: 2px solid var(--color-border-dark);\n\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.card-menu {\n\t\t\theight: 44px;\n\t\t\talign-self: end;\n\t\t}\n\t}\n\n\t/* stylelint-disable-next-line no-invalid-position-at-import-rule */\n\t@import './../../css/labels';\n\n\t.card-controls {\n\t\tdisplay: flex;\n\t}\n\t&.card__editable .card-controls {\n\t\tmargin-right: 0;\n\t}\n\t&.card__archived {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n\t.card-labels {\n\t\tdisplay: flex;\n\t\talign-items: end;\n\t\tmargin-bottom: var(--default-grid-baseline);\n\n\t\t.labels {\n\t\t\tflex-wrap: wrap;\n\t\t\talign-self: flex-start;\n\t\t}\n\t}\n}\n\n.right {\n\tdisplay: flex;\n\talign-items: flex-start;\n}\n\n.card-related {\n\tdisplay: flex;\n\tpadding: 12px;\n\tpadding-bottom: 0px;\n\tcolor: var(--color-text-maxcontrast);\n\n\t.board-bullet {\n\t\tdisplay: inline-block;\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder: none;\n\t\tborder-radius: 50%;\n\t\tbackground-color: transparent;\n\t\tmargin-top: 4px;\n\t\tmargin-right: 4px;\n\t}\n}\n\n.compact {\n\tmin-height: 44px;\n\n\t.duedate {\n\t\tmargin-right: 0;\n\t\tdisplay: flex;\n\t\theight: 32px;\n\t\twidth: 32px;\n\t\tmargin-top: 6px;\n\t}\n\t&.has-labels {\n\t\tpadding-bottom: $card-padding;\n\t}\n\t.labels {\n\t\theight: 6px;\n\t\tmargin-top: -7px;\n\t\tmargin-bottom: 3px;\n\t}\n\t.labels li {\n\t\twidth: 30px;\n\t\theight: 6px;\n\t\tfont-size: 0;\n\t\tcolor: transparent;\n\t}\n\t.card-menu {\n\t\talign-self: start !important;\n\t}\n}\n\n@media (prefers-color-scheme: dark) {\n\t.card {\n\t\t@include dark-card;\n\t}\n}\n\n@media print {\n\t.card-menu {\n\t\tdisplay: none;\n\t}\n}\n","$card-spacing: 16px;\n$card-padding: 8px;\n$stack-spacing: 12px;\n$stack-width: 280px;\n$board-spacing: 16px;\n","$card-spacing: 10px;\n$card-padding: 10px;\n\n.labels {\n\tflex-grow: 1;\n\tflex-shrink: 1;\n\tmin-width: 0;\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: 3px;\n\n\tli {\n\t\tflex-grow: 0;\n\t\tflex-shrink: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\toverflow: hidden;\n\t\tpadding: 1px 8px;\n\t\tborder-radius: 15px;\n\t\tfont-size: 13px;\n\n\t\t&:hover {\n\t\t\toverflow: unset;\n\t\t}\n\n\t\tspan {\n\t\t\tflex-grow: 0;\n\t\t\tflex-shrink: 1;\n\t\t\tmin-width: 0;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const o=s},53710:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".cardid[data-v-f56db06c]{font-size:.9em}","",{version:3,sources:["webpack://./src/components/cards/badges/CardId.vue"],names:[],mappings:"AACA,yBACC,cAAA",sourcesContent:["\n.cardid {\n\tfont-size: .9em;\n}\n"],sourceRoot:""}]);const o=s},79029:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".due[data-v-1afd2267]{background-position:4px center;border-radius:var(--border-radius-pill);padding:1px 8px;font-size:90%;display:flex;align-items:center;flex-shrink:1;z-index:2}[data-due-state=Overdue] .due[data-v-1afd2267]{color:var(--color-error-text);background-color:rgba(var(--color-error-rgb), 0.1)}[data-due-state=Now] .due[data-v-1afd2267]{color:var(--color-warning-text);background-color:rgba(var(--color-warning-rgb), 0.1)}[data-due-state=Done] .due[data-v-1afd2267]{color:var(--color-success-text);background-color:rgba(var(--color-success-rgb), 0.1)}.due .due--label[data-v-1afd2267]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin-left:4px;font-size:13px}@media print{.icon.due[data-v-1afd2267]{background-color:rgba(0,0,0,0) !important}.icon.due span[data-v-1afd2267]{display:none}.icon.due[data-v-1afd2267]::before{content:attr(title)}}","",{version:3,sources:["webpack://./src/components/cards/badges/DueDate.vue"],names:[],mappings:"AACA,sBACC,8BAAA,CACA,uCAAA,CACA,eAAA,CACA,aAAA,CACA,YAAA,CACA,kBAAA,CACA,aAAA,CACA,SAAA,CAEA,+CACC,6BAAA,CACA,kDAAA,CAED,2CACC,+BAAA,CACA,oDAAA,CAED,4CACC,+BAAA,CACA,oDAAA,CAGD,kCACC,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,eAAA,CACA,cAAA,CAIF,aACC,2BACC,yCAAA,CAEA,gCACC,YAAA,CAGD,mCACC,mBAAA,CAAA",sourcesContent:["\n.due {\n\tbackground-position: 4px center;\n\tborder-radius: var(--border-radius-pill);\n\tpadding: 1px 8px;\n\tfont-size: 90%;\n\tdisplay: flex;\n\talign-items: center;\n\tflex-shrink: 1;\n\tz-index: 2;\n\n\t[data-due-state='Overdue'] & {\n\t\tcolor: var(--color-error-text);\n\t\tbackground-color: rgba(var(--color-error-rgb), .1);\n\t}\n\t[data-due-state='Now'] & {\n\t\tcolor: var(--color-warning-text);\n\t\tbackground-color: rgba(var(--color-warning-rgb), .1);\n\t}\n\t[data-due-state='Done'] & {\n\t\tcolor: var(--color-success-text);\n\t\tbackground-color: rgba(var(--color-success-rgb), .1);\n\t}\n\n\t.due--label {\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\tmargin-left: 4px;\n\t\tfont-size: 13px;\n\t}\n}\n\n@media print {\n\t.icon.due {\n\t\tbackground-color: transparent !important;\n\n\t\tspan {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t&::before {\n\t\t\tcontent: attr(title);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const o=s},97254:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".global-search[data-v-7d9e2f4e]{width:100%;padding:28px;padding-bottom:0;overflow:hidden;min-height:35vh;max-height:50vh;flex-shrink:1;flex-grow:1;border-top:1px solid var(--color-border);z-index:1010;position:relative}.global-search .action-item.icon-close[data-v-7d9e2f4e]{position:absolute;top:10px;right:10px}.global-search .search-wrapper[data-v-7d9e2f4e]{overflow:scroll;height:100%;position:relative;padding:10px}.global-search h2>div[data-v-7d9e2f4e]{display:inline-block}.global-search h2>div.icon-loading-small[data-v-7d9e2f4e]{margin-right:20px}.global-search h2[data-v-7d9e2f4e] span{background-color:var(--color-background-dark);padding:3px;border-radius:var(--border-radius)}.global-search .search-results[data-v-7d9e2f4e]{display:flex;flex-wrap:wrap}.global-search .search-results>div[data-v-7d9e2f4e]{flex-grow:0}.global-search[data-v-7d9e2f4e] .card{width:280px;margin-right:12px}","",{version:3,sources:["webpack://./src/components/search/GlobalSearchResults.vue","webpack://./src/css/variables.scss"],names:[],mappings:"AAGA,gCACC,UAAA,CACA,YAAA,CACA,gBAAA,CACA,eAAA,CACA,eAAA,CACA,eAAA,CACA,aAAA,CACA,WAAA,CACA,wCAAA,CACA,YAAA,CACA,iBAAA,CAEA,wDACC,iBAAA,CACA,QAAA,CACA,UAAA,CAED,gDACC,eAAA,CACA,WAAA,CACA,iBAAA,CACA,YAAA,CAGD,uCACC,oBAAA,CAEA,0DACC,iBAAA,CAGF,wCACC,6CAAA,CACA,WAAA,CACA,kCAAA,CAGD,gDACC,YAAA,CACA,cAAA,CAEA,oDACC,WAAA,CAGF,sCACC,WC/CY,CDgDZ,iBCjDc",sourcesContent:["\n@import '../../css/variables';\n\n.global-search {\n\twidth: 100%;\n\tpadding: $board-spacing + $stack-spacing;\n\tpadding-bottom: 0;\n\toverflow: hidden;\n\tmin-height: 35vh;\n\tmax-height: 50vh;\n\tflex-shrink: 1;\n\tflex-grow: 1;\n\tborder-top: 1px solid var(--color-border);\n\tz-index: 1010;\n\tposition: relative;\n\n\t.action-item.icon-close {\n\t\tposition: absolute;\n\t\ttop: 10px;\n\t\tright: 10px;\n\t}\n\t.search-wrapper {\n\t\toverflow: scroll;\n\t\theight: 100%;\n\t\tposition: relative;\n\t\tpadding: 10px;\n\t}\n\n\th2 > div {\n\t\tdisplay: inline-block;\n\n\t\t&.icon-loading-small {\n\t\t\tmargin-right: 20px;\n\t\t}\n\t}\n\th2:deep(span) {\n\t\tbackground-color: var(--color-background-dark);\n\t\tpadding: 3px;\n\t\tborder-radius: var(--border-radius);\n\t}\n\n\t.search-results {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\n\t\t& > div {\n\t\t\tflex-grow: 0;\n\t\t}\n\t}\n\t&:deep(.card) {\n\t\twidth: $stack-width;\n\t\tmargin-right: $stack-spacing;\n\t}\n}\n","$card-spacing: 16px;\n$card-padding: 8px;\n$stack-spacing: 12px;\n$stack-width: 280px;\n$board-spacing: 16px;\n"],sourceRoot:""}]);const o=s},97649:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".card--placeholder[data-v-43bfbf02]{width:280px;margin-right:12px;padding:8px;transition:box-shadow .1s ease-in-out;box-shadow:0 0 2px 0 var(--color-box-shadow);border-radius:var(--border-radius-large);font-size:100%;margin-bottom:16px;height:100px}.card-placeholder__gradient[data-v-43bfbf02]{position:fixed;height:0;width:0;z-index:-1}.card-placeholder__placeholder[data-v-43bfbf02]{width:100%}.card-placeholder__placeholder-line-header[data-v-43bfbf02],.card-placeholder__placeholder-line-one[data-v-43bfbf02],.card-placeholder__placeholder-line-two[data-v-43bfbf02]{width:100%;height:1em;x:0}.card-placeholder__placeholder-line-header[data-v-43bfbf02]{visibility:hidden}.card-placeholder__placeholder-line-one[data-v-43bfbf02]{y:5px}.card-placeholder__placeholder-line-two[data-v-43bfbf02]{y:25px}.card-placeholder__placeholder.standalone .card-placeholder__placeholder-line-header[data-v-43bfbf02]{visibility:visible;y:5px}.card-placeholder__placeholder.standalone .card-placeholder__placeholder-line-one[data-v-43bfbf02]{y:40px}.card-placeholder__placeholder.standalone .card-placeholder__placeholder-line-two[data-v-43bfbf02]{y:60px}","",{version:3,sources:["webpack://./src/components/search/Placeholder.vue","webpack://./src/css/variables.scss"],names:[],mappings:"AAIA,oCACC,WCFa,CDGb,iBCJe,CDKf,WCNc,CDOd,qCAAA,CACA,4CAAA,CACA,wCAAA,CACA,cAAA,CACA,kBCZc,CDad,YAAA,CAGD,6CACC,cAAA,CACA,QAAA,CACA,OAAA,CACA,UAAA,CAGD,gDACC,UAAA,CACA,8KAGC,UAAA,CACA,UAAA,CACA,GAAA,CAED,4DACC,iBAAA,CAED,yDACC,KAAA,CAGD,yDACC,MAAA,CAIA,sGACC,kBAAA,CACA,KAAA,CAED,mGACC,MAAA,CAGD,mGACC,MAAA",sourcesContent:["\n@import '../../css/variables';\n$clickable-area: 44px;\n\n.card--placeholder {\n\twidth: $stack-width;\n\tmargin-right: $stack-spacing;\n\tpadding: $card-padding;\n\ttransition: box-shadow 0.1s ease-in-out;\n\tbox-shadow: 0 0 2px 0 var(--color-box-shadow);\n\tborder-radius: var(--border-radius-large);\n\tfont-size: 100%;\n\tmargin-bottom: $card-spacing;\n\theight: 100px;\n}\n\n.card-placeholder__gradient {\n\tposition: fixed;\n\theight: 0;\n\twidth: 0;\n\tz-index: -1;\n}\n\n.card-placeholder__placeholder {\n\twidth: 100%;\n\t&-line-header,\n\t&-line-one,\n\t&-line-two {\n\t\twidth: 100%;\n\t\theight: 1em;\n\t\tx: 0;\n\t}\n\t&-line-header {\n\t\tvisibility: hidden;\n\t}\n\t&-line-one {\n\t\ty: 5px;\n\t}\n\n\t&-line-two {\n\t\ty: 25px;\n\t}\n\n\t&.standalone {\n\t\t.card-placeholder__placeholder-line-header {\n\t\t\tvisibility: visible;\n\t\t\ty: 5px;\n\t\t}\n\t\t.card-placeholder__placeholder-line-one {\n\t\t\ty: 40px;\n\t\t}\n\n\t\t.card-placeholder__placeholder-line-two {\n\t\t\ty: 60px;\n\t\t}\n\t}\n}\n\n","$card-spacing: 16px;\n$card-padding: 8px;\n$stack-spacing: 12px;\n$stack-width: 280px;\n$board-spacing: 16px;\n"],sourceRoot:""}]);const o=s},96230:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,".deck-board-reference[data-v-16b47a8d]{width:100%;white-space:normal;padding:12px}.editor__content .deck-board-reference[data-v-16b47a8d]{width:calc(100% - 24px)}.deck-board-reference .link[data-v-16b47a8d]{text-decoration:underline;color:var(--color-main-text) !important;padding:0 !important}.deck-board-reference .line[data-v-16b47a8d]{display:flex;align-items:center}.deck-board-reference .line .icon[data-v-16b47a8d]{margin-right:4px}.deck-board-reference .line .title-icon[data-v-16b47a8d]{margin-right:8px}.deck-board-reference-interactive[data-v-16b47a8d]{width:100%;min-height:min(50vh,100vh - 100px);max-height:calc(100vh - 120px)}.deck-board-reference-interactive[data-v-16b47a8d] .controls{padding-left:12px}.deck-board-reference-interactive[data-v-16b47a8d] .board{padding-left:0}.deck-board-reference-interactive[data-v-16b47a8d] *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}","",{version:3,sources:["webpack://./src/views/BoardReferenceWidget.vue"],names:[],mappings:"AACA,uCACC,UAAA,CAKA,kBAAA,CACA,YAAA,CAJA,wDACC,uBAAA,CAKD,6CACC,yBAAA,CACA,uCAAA,CACA,oBAAA,CAGD,6CACC,YAAA,CACA,kBAAA,CACA,mDACC,gBAAA,CAED,yDACC,gBAAA,CAKH,mDACC,UAAA,CACA,kCAAA,CACA,8BAAA,CACA,6DACC,iBAAA,CAED,0DACC,cAAA,CAED,qDACC,6BAAA,CACA,0BAAA,CACA,qBAAA",sourcesContent:["\n.deck-board-reference {\n\twidth: 100%;\n\t// needed for the specific case of Text\n\t.editor__content & {\n\t\twidth: calc(100% - 24px);\n\t}\n\twhite-space: normal;\n\tpadding: 12px;\n\n\t.link {\n\t\ttext-decoration: underline;\n\t\tcolor: var(--color-main-text) !important;\n\t\tpadding: 0 !important;\n\t}\n\n\t.line {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t.icon {\n\t\t\tmargin-right: 4px;\n\t\t}\n\t\t.title-icon {\n\t\t\tmargin-right: 8px;\n\t\t}\n\t}\n}\n\n.deck-board-reference-interactive {\n\twidth: 100%;\n\tmin-height: min(50vh, calc(100vh - 100px));\n\tmax-height: calc(100vh - 120px);\n\t&:deep(.controls) {\n\t\tpadding-left: 12px;\n\t}\n\t&:deep(.board) {\n\t\tpadding-left: 0;\n\t}\n\t&:deep(*) {\n\t\t-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */\n\t\t-moz-box-sizing: border-box;    /* Firefox, other Gecko */\n\t\tbox-sizing: border-box;         /* Opera/IE 8+ */\n\t}\n}\n"],sourceRoot:""}]);const o=s},95346:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,"\n.visualdiff ins {\n\tcolor: green;\n}\n.visualdiff del {\n\tcolor: darkred;\n}\n","",{version:3,sources:["webpack://./src/components/ActivityEntry.vue"],names:[],mappings:";AAkKA;CACA,YAAA;AACA;AAEA;CACA,cAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n  -\n  - @author Julius Hrtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  --\x3e\n\n<template>\n\t<div v-if=\"activity\" class=\"activity\">\n\t\t<div class=\"activity--header\">\n\t\t\t<img :src=\"activity.icon\" class=\"activity--icon\">\n\t\t\t<NcRichText class=\"activity--subject\" :text=\"message.subject\" :arguments=\"message.parameters\" />\n\t\t\t<div class=\"activity--timestamp\" :name=\"formatReadableDate(activity.datetime)\">\n\t\t\t\t{{ relativeDate(activity.datetime) }}\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!-- FIXME ins/del tags do no longer work with activity so we should get rid of that --\x3e\n\t\t<p v-if=\"activity.message\" class=\"activity--message\" v-html=\"sanitizedMessage\" />\n\t</div>\n</template>\n\n<script>\nimport { NcRichText, NcUserBubble } from '@nextcloud/vue'\nimport moment from '@nextcloud/moment'\nimport DOMPurify from 'dompurify'\nimport relativeDate from '../mixins/relativeDate.js'\nimport formatReadableDate from '../mixins/readableDate.js'\n\nconst InternalLink = {\n\tname: 'InternalLink',\n\tfunctional: true,\n\tprops: {\n\t\thref: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tname: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\trender(createElement, context) {\n\t\treturn createElement('a', { attrs: { href: context.props.href }, style: { 'font-weight': 600 } }, context.props.name)\n\t},\n}\nexport default {\n\tname: 'ActivityEntry',\n\tcomponents: {\n\t\tNcRichText,\n\t},\n\tmixins: [relativeDate, formatReadableDate],\n\tprops: {\n\t\tactivity: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tcomputed: {\n\t\tmessage() {\n\t\t\tconst subject = this.activity.subject_rich[0]\n\t\t\tconst parameters = JSON.parse(JSON.stringify(this.activity.subject_rich[1]))\n\t\t\tif (parameters.after && typeof parameters.after.id === 'string' && parameters.after.id.startsWith('dt:')) {\n\t\t\t\tconst dateTime = parameters.after.id.slice(3)\n\t\t\t\tparameters.after.name = moment(dateTime).format('L LTS')\n\t\t\t}\n\n\t\t\tObject.keys(parameters).forEach(function(key, index) {\n\t\t\t\tconst { type } = parameters[key]\n\t\t\t\tswitch (type) {\n\t\t\t\tcase 'highlight':\n\t\t\t\t\tparameters[key] = {\n\t\t\t\t\t\tcomponent: InternalLink,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\thref: parameters[key].link,\n\t\t\t\t\t\t\tname: parameters[key].name,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'user':\n\t\t\t\t\tparameters[key] = {\n\t\t\t\t\t\tcomponent: NcUserBubble,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tuser: parameters[key].id,\n\t\t\t\t\t\t\tdisplayName: parameters[key].name,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tparameters[key] = `{${key}}`\n\t\t\t\t}\n\n\t\t\t})\n\n\t\t\treturn {\n\t\t\t\tsubject, parameters,\n\t\t\t}\n\t\t},\n\n\t\tsanitizedMessage() {\n\t\t\treturn DOMPurify.sanitize(this.activity.message, { ALLOWED_TAGS: ['ins', 'del'], ALLOWED_ATTR: ['class'] })\n\t\t},\n\n\t},\n}\n<\/script>\n\n<style scoped lang=\"scss\">\n\t.activity {\n\n\t\t.activity--header {\n\t\t\tdisplay: flex;\n\t\t\tpadding: 10px;\n\t\t}\n\n\t\t.activity--icon {\n\t\t\twidth: 16px;\n\t\t\theight: 16px;\n\t\t\tflex-shrink: 0;\n\t\t\tflex-grow: 0;\n\t\t}\n\t\t.activity--subject {\n\t\t\tmargin-left: 10px;\n\t\t}\n\t\t.activity--message {\n\t\t\tmargin-left: 44px;\n\t\t\tcolor: var(--color-text-light);\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\t\t.activity--timestamp {\n\t\t\tflex-grow: 1;\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\ttext-align: right;\n\t\t\tfont-size: 0.8em;\n\t\t\tpadding: 1px;\n\t\t}\n\t}\n</style>\n<style>\n\t.visualdiff ins {\n\t\tcolor: green;\n\t}\n\n\t.visualdiff del {\n\t\tcolor: darkred;\n\t}\n</style>\n"],sourceRoot:""}]);const o=s},83123:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var r=a(87537),n=a.n(r),i=a(23645),s=a.n(i)()(n());s.push([t.id,"\n.activity-list[data-v-d2d5aa18] {\n\tmargin-bottom: 100px;\n}\n","",{version:3,sources:["webpack://./src/components/ActivityList.vue"],names:[],mappings:";AA4IA;CACA,oBAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright Copyright (c) 2020 Julius Hrtl <jus@bitgrid.net>\n  -\n  - @author Julius Hrtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  --\x3e\n\n<template>\n\t<div class=\"activity-list\">\n\t\t<div v-if=\"isLoading\" class=\"icon icon-loading\" />\n\t\t<ActivityEntry v-for=\"activity in activities\"\n\t\t\t:key=\"activity.activity_id\"\n\t\t\t:activity=\"activity\" />\n\t\t<InfiniteLoading :identifier=\"objectId\" @infinite=\"infiniteHandler\" @change=\"changeObject\">\n\t\t\t<div slot=\"spinner\" class=\"icon-loading\" />\n\t\t\t<div slot=\"no-more\" />\n\t\t\t<div slot=\"no-results\" />\n\t\t</InfiniteLoading>\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport ActivityEntry from './ActivityEntry.vue'\nimport InfiniteLoading from 'vue-infinite-loading'\n\nconst ACTIVITY_FETCH_LIMIT = 50\n\nexport default {\n\tname: 'ActivityList',\n\tcomponents: {\n\t\tActivityEntry,\n\t\tInfiniteLoading,\n\t},\n\tprops: {\n\t\tfilter: {\n\t\t\ttype: String,\n\t\t\tdefault: 'deck',\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tobjectId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tobjectType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tactivities: [],\n\t\t\tisLoading: false,\n\t\t\tsince: 0,\n\t\t\tendReached: false,\n\t\t}\n\t},\n\tmethods: {\n\t\tasync loadActivity() {\n\t\t\tconst params = new URLSearchParams()\n\t\t\tparams.append('format', 'json')\n\t\t\tparams.append('type', this.type)\n\t\t\tparams.append('since', this.since)\n\t\t\tparams.append('object_type', this.objectType)\n\t\t\tparams.append('object_id', '' + this.objectId)\n\t\t\tparams.append('limit', ACTIVITY_FETCH_LIMIT)\n\n\t\t\tconst response = await axios.get(\n\t\t\t\tgenerateOcsUrl(`apps/activity/api/v2/activity/${this.filter}`) + '?' + params,\n\t\t\t\t{\n\t\t\t\t\tvalidateStatus: (status) => {\n\t\t\t\t\t\treturn (status >= 200 && status < 300) || status === 304\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\n\t\t\tif (response.status === 304) {\n\t\t\t\tthis.endReached = true\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tlet activities = response.data.ocs.data\n\t\t\tif (this.filter === 'deck') {\n\t\t\t\t// We need to manually filter activities here, since currently we use two different types and there is no way\n\t\t\t\t// to tell the backend to fetch all activites related to cards of a given board\n\t\t\t\tactivities = activities.filter((activity) => {\n\t\t\t\t\treturn (activity.object_type === 'deck_board' && activity.object_id === this.objectId)\n\t\t\t\t\t\t\t|| (activity.object_type === 'deck_card' && activity.subject_rich[1].board.id === this.objectId)\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.activities.push(...activities)\n\t\t\tif (activities.length === 0) {\n\t\t\t\tthis.endReached = true\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tthis.since = (activities[activities.length - 1].activity_id)\n\t\t\treturn activities\n\t\t},\n\t\tasync infiniteHandler($state) {\n\t\t\tawait this.loadActivity()\n\t\t\tif (!this.endReached) {\n\t\t\t\t$state.loaded()\n\t\t\t} else {\n\t\t\t\t$state.complete()\n\t\t\t}\n\t\t},\n\t\tchangeObject() {\n\t\t\tthis.since = 0\n\t\t\tthis.activities = []\n\t\t\tthis.endReached = false\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n\t.activity-list {\n\t\tmargin-bottom: 100px;\n\t}\n</style>\n"],sourceRoot:""}]);const o=s},46700:(t,e,a)=>{var r={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-ps":20315,"./ar-ps.js":20315,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":15596,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":15596,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku-kmr":90563,"./ku-kmr.js":90563,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=i,t.exports=n,n.id=46700},6010:(t,e,a)=>{"use strict";var r=a(93379),n=a.n(r),i=a(7795),s=a.n(i),o=a(90569),d=a.n(o),c=a(3565),l=a.n(c),A=a(19216),p=a.n(A),m=a(44589),u=a.n(m),C=a(81808),h={};h.styleTagTransform=u(),h.setAttributes=l(),h.insert=d().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=p();n()(C.Z,h),C.Z&&C.Z.locals&&C.Z.locals},80767:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});var r=a(38563),n=a(3087);a(14809);const i=(0,a(51900).Z)(n.Z,r.s,r.x,!1,null,"c0f7e9f2",null).exports},8746:(e,a,r)=>{"use strict";r.d(a,{default:()=>Ka});var n=r(7796),i=r(20629),s=r(69183),o=r(64882),d=r(94357),c=r(85644),l=r(12575),A=r(78857),p=r(81829),m=r(30320),u=r(36481);const C={name:"SessionList",components:{NcAvatar:o.Xn},props:{sessions:{type:Array,default:()=>[]},size:{type:Number,default:()=>32}},computed:{sessionsVisible(){return this.sessions?this.sessions.slice(0,5):[]},sessionAvatarStyle(){return{"--size":this.size+"px","--font-size":this.size/2+"px"}}}};var h=r(93379),g=r.n(h),v=r(7795),f=r.n(v),b=r(90569),x=r.n(b),k=r(3565),y=r.n(k),w=r(19216),_=r.n(w),B=r(44589),I=r.n(B),S=r(25340),D={};D.styleTagTransform=I(),D.setAttributes=y(),D.insert=x().bind(null,"head"),D.domAPI=f(),D.insertStyleElement=_();g()(S.Z,D);S.Z&&S.Z.locals&&S.Z.locals;var T=r(51900);const E=(0,T.Z)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar-list",attrs:{title:t.t("text","Currently present people")}},t._l(t.sessionsVisible,(function(a){return e("div",{key:a.uid,staticClass:"avatar-wrapper",style:t.sessionAvatarStyle},[e("NcAvatar",{attrs:{user:a.uid,"display-name":a.displayname,"disable-menu":!0,"show-user-status":!1,"disable-tooltip":!0,size:t.size}})],1)})),0)}),[],!1,null,"18e0f063",null).exports;var $=r(22534),j=r(97040),Z=r(11480);const N=new class{url(t){return(0,Z.Ii)(`apps/deck/api/v1.0${t}`)}async createSession(t){return(await j.ZP.put(this.url("/session/create"),{boardId:t})).data.ocs.data}async syncSession(t,e){return await j.ZP.post(this.url("/session/sync"),{boardId:t,token:e})}async closeSession(t,e){return await j.ZP.post(this.url("/session/close"),{boardId:t,token:e})}async closeSessionViaBeacon(t,e){const a={boardId:t,token:e},r=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(this.url("/session/close"),r)}};r(35449);var L=r(17963),F=r(20144),M=r(80681);const P={state:{actions:{card:[]}},getters:{cardActions:t=>t.actions.card},mutations:{ADD_CARD_ACTION(t,e){t.actions.card.push(e)}},actions:{async addCardAction(t,e){let{commit:a}=t;a("ADD_CARD_ACTION",e)}}};class z{url(t){return t=`/apps/deck${t}`,(0,Z.nu)(t)}loadStacks(t){return j.ZP.get(this.url(`/stacks/${t}`)).then((t=>Promise.resolve(t.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}deletedStacks(t){return j.ZP.get(this.url(`/${t}/stacks/deleted`)).then((t=>Promise.resolve(t.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}loadArchivedStacks(t){return j.ZP.get(this.url(`/stacks/${t}/archived`)).then((t=>Promise.resolve(t.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}createStack(t){return j.ZP.post(this.url("/stacks"),t).then((t=>Promise.resolve(t.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}reorderStack(t,e){return j.ZP.put(this.url(`/stacks/${t}/reorder`),{order:e}).then((t=>Promise.resolve(t.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}deleteStack(t){return j.ZP.delete(this.url(`/stacks/${t}`)).then((t=>Promise.resolve(t.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}updateStack(t){return j.ZP.put(this.url(`/stacks/${t.id}`),t).then((t=>Promise.resolve(t.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}}const U=function(t,e,a){if(null===e&&null===a)return t;const r=[...t];let n=t[e];return null!==e&&(n=r.splice(e,1)[0]),null!==a&&r.splice(a,0,n),r},O=new z,G={state:{stacks:[]},getters:{stacksByBoard:t=>e=>t.stacks.filter((t=>t.boardId===e)).sort(((t,e)=>t.order-e.order)),stackById:t=>e=>t.stacks.find((t=>t.id===e))},mutations:{addStack(t,e){const a=t.stacks.findIndex((t=>t.id===e.id));if(-1!==a){const r=t.stacks.find((t=>t.id===e.id));F.default.set(t.stacks,a,Object.assign({},r,e))}else t.stacks.push(e)},orderStack(t,e){let{stack:a,removedIndex:r,addedIndex:n}=e;const i=t.stacks.filter((t=>t.boardId===a.boardId)).sort(((t,e)=>t.order-e.order)),s=U(i,r,n);for(let t=0;t<s.length;t++)s[t].order=parseInt(t)},deleteStack(t,e){const a=t.stacks.findIndex((t=>t.id===e.id));-1!==a&&t.stacks.splice(a,1)},updateStack(t,e){const a=t.stacks.findIndex((t=>t.id===e.id));-1!==a&&(t.stacks[a].title=e.title)}},actions:{orderStack(t,e){let{commit:a}=t,{stack:r,removedIndex:n,addedIndex:i}=e;a("orderStack",{stack:r,removedIndex:n,addedIndex:i}),O.reorderStack(r.id,i).catch((t=>{OC.Notification.showTemporary("Failed to change order"),console.error(t.response.data.message),a("orderStack",{stack:r,addedIndex:i,removedIndex:n})}))},async loadStacks(t,e){let{commit:a}=t,r="loadStacks";!0===this.state.showArchived&&(r="loadArchivedStacks");const n=await O[r](e),i=[];for(const t in n){const e=n[t];for(const t in e.cards)i.push(e.cards[t]);delete e.cards,a("addStack",e)}a("setCards",i)},createStack(t,e){let{commit:a}=t;e.boardId=this.state.currentBoard.id,O.createStack(e).then((t=>{a("addStack",t)}))},deleteStack(t,e){let{commit:a}=t;O.deleteStack(e.id).then((t=>{a("deleteStack",t),a("moveStackToTrash",t)}))},updateStack(t,e){let{commit:a}=t;O.updateStack(e).then((t=>{a("updateStack",t)}))}}};var R=r(12660),W=r(30381),Y=r.n(W);const q=new R.E,H={state:{cards:[]},getters:{cardsByStack:(t,e,a)=>r=>t.cards.filter((t=>{const{tags:e,users:r,due:n,unassigned:i,completed:s}=a.filter;if("open"===s&&null!==t.done)return!1;if("completed"===s&&null==t.done)return!1;let o=!0,d=!0;if(e.length>0&&(e.forEach((e=>{-1===t.labels.findIndex((t=>t.id===e))&&(o=!1)})),!o))return!1;if(r.length>0&&(r.forEach((e=>{t?.assignedUsers&&-1!==t.assignedUsers.findIndex((t=>t.participant.uid===e))||(d=!1)})),!d))return!1;if(i&&t.assignedUsers.length>0)return!1;if(""!==n){const e=(new Date(t.duedate)-new Date)/3600/1e3;switch(n){case"noDue":return null===t.duedate;case"overdue":return 3===t.overdue;case"dueToday":return t.overdue>=2;case"dueWeek":return e<=168&&null!==t.duedate;case"dueMonth":return e<=720&&null!==t.duedate}}return!0})).filter((t=>t.stackId===r)).filter((t=>{if(""===e.getSearchQuery)return!0;let a=!0;const r=e.getSearchQuery.match(/(?:[^\s"]+|"[^"]*")+/g),n=t=>'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t;for(const i of r){let[r,s]=-1!==i.indexOf(":")?i.split(/:(.*)/):[null,i];const o=void 0===s||""===n(s);if("title"===r){if(o)continue;a=a&&t.title.toLowerCase().includes(n(s).toLowerCase())}else if("description"===r){if(o){a=a&&!!t.description;continue}a=a&&t.description.toLowerCase().includes(n(s).toLowerCase())}else if("list"===r){if(o)continue;const r=e.stackById(t.stackId);if(!r)return!1;a=a&&r.title.toLowerCase().includes(n(s).toLowerCase())}else if("tag"===r){if(o){a=a&&t.labels.length>0;continue}a=a&&-1!==t.labels.findIndex((t=>t.title.toLowerCase().includes(n(s).toLowerCase())))}else if("date"===r){const e=(new Date(t.duedate)-new Date)/3600/1e3;switch(s=n(s),s){case"overdue":a=a&&3===t.overdue;break;case"today":a=a&&e>0&&e<=24&&null!==t.duedate;break;case"week":a=a&&e>0&&e<=168&&null!==t.duedate;break;case"month":a=a&&e>0&&e<=720&&null!==t.duedate;break;case"none":a=a&&null===t.duedate}if(null===t.duedate||!a)return!1;const r=s[0]+("="===s[1]?"=":""),i=-1!==["<","<=",">",">="].indexOf(r),o=Y()(t.duedate),d=Y()(s.slice(i?r.length:0));switch(r){case"<":a=a&&o.isBefore(d);break;case"<=":a=a&&o.isSameOrBefore(d);break;case">":a=a&&o.isAfter(d);break;case">=":a=a&&o.isSameOrAfter(d);break;default:a=a&&o.isSame(d)}}else if("assigned"===r){if(o){a=a&&t.assignedUsers.length>0;continue}a=a&&-1!==t.assignedUsers.findIndex((t=>t.participant.primaryKey.toLowerCase()===n(s).toLowerCase()||t.participant.displayname.toLowerCase()===n(s).toLowerCase()))}else a=a&&(t.title.toLowerCase().includes(n(i).toLowerCase())||t.description.toLowerCase().includes(n(i).toLowerCase())||t.id===parseInt(n(i)));if(!a)return!1}return!0})).sort(((t,e)=>t.order-e.order||t.createdAt-e.createdAt)),cardById:t=>e=>t.cards.find((t=>t.id===e))},mutations:{addCard(t,e){e.labels=e.labels||[],e.assignedUsers=e.assignedUsers||[];const a=t.cards.findIndex((t=>t.id===e.id));if(-1!==a){const r=t.cards.find((t=>t.id===e.id));F.default.set(t.cards,a,Object.assign({},r,e))}else t.cards.push(e)},deleteCard(t,e){const a=t.cards.findIndex((t=>t.id===e.id));-1!==a&&t.cards.splice(a,1)},updateCard(t,e){const a=t.cards.findIndex((t=>t.id===e.id));-1!==a&&F.default.set(t.cards,a,Object.assign({},t.cards[a],e))},updateCardsReorder(t,e){for(const a of e){const e=t.cards.findIndex((t=>t.id===a.id));-1!==e&&(F.default.set(t.cards[e],"order",a.order),F.default.set(t.cards[e],"stackId",a.stackId))}},assignCardToUser(t,e){const a=t.cards.findIndex((t=>t.id===e.cardId));-1!==a&&t.cards[a].assignedUsers.push(e)},removeUserFromCard(t,e){const a=t.cards.findIndex((t=>t.id===e.cardId));if(-1!==a){const r=t.cards[a].assignedUsers.findIndex((t=>t.id===e.id));-1!==r&&t.cards[a].assignedUsers.splice(r,1)}},updateCardProperty(t,e){let{card:a,property:r}=e;const n=t.cards.findIndex((t=>t.id===a.id));-1!==n&&(F.default.set(t.cards[n],r,a[r]),F.default.set(t.cards[n],"lastModified",Date.now()/1e3))},cardSetAttachmentCount(t,e){let{cardId:a,count:r}=e;const n=t.cards.findIndex((t=>t.id===a));-1!==n&&F.default.set(t.cards[n],"attachmentCount",r)},cardIncreaseAttachmentCount(t,e){const a=t.cards.findIndex((t=>t.id===e));-1!==a&&F.default.set(t.cards[a],"attachmentCount",t.cards[a].attachmentCount+1)},cardDecreaseAttachmentCount(t,e){const a=t.cards.findIndex((t=>t.id===e));-1!==a&&F.default.set(t.cards[a],"attachmentCount",t.cards[a].attachmentCount-1)},addNewCard(t,e){t.cards.push(e)},setCards(t,e){const a=t.cards.filter((t=>-1===e.findIndex((e=>t.id===e.id))));for(const t of a)this.commit("deleteCard",t);for(const t of e)this.commit("addCard",t)}},actions:{async addCard(t,e){let{commit:a}=t;const r=await q.addCard(e);return a("addCard",r),r},async updateCardTitle(t,e){let{commit:a}=t;a("updateCardProperty",{property:"title",card:await q.updateCard(e)})},async moveCard(t,e){let{commit:a}=t;a("deleteCard",await q.updateCard(e))},async reorderCard(t,e){let{commit:a,getters:r}=t,n=0;const i=[];for(const t of r.cardsByStack(e.stackId))t.id===e.id&&i.push(e),n===e.order&&n++,t.id!==e.id&&i.push({...t,order:n++});i.push(e),await a("updateCardsReorder",i),q.reorderCard(e).then((t=>{a("updateCardsReorder",Object.values(t))}))},async deleteCard(t,e){let{commit:a}=t;await q.deleteCard(e.id),a("deleteCard",e),a("moveCardToTrash",e)},async archiveUnarchiveCard(t,e){let{commit:a}=t,r="archiveCard";!1===e.archived&&(r="unArchiveCard");a("updateCard",await q[r](e))},async changeCardDoneStatus(t,e){let{commit:a}=t,r="markCardAsDone";!1===e.done&&(r="markCardAsUndone");a("updateCardProperty",{property:"done",card:await q[r](e)})},async assignCardToUser(t,e){let{commit:a}=t,{card:r,assignee:n}=e;a("assignCardToUser",await q.assignUser(r.id,n.userId,n.type))},async removeUserFromCard(t,e){let{commit:a}=t,{card:r,assignee:n}=e;a("removeUserFromCard",await q.removeUser(r.id,n.userId,n.type))},async addLabel(t,e){let{commit:a}=t;await q.assignLabelToCard(e),a("updateCardProperty",{property:"labels",card:e.card})},async removeLabel(t,e){let{commit:a}=t;await q.removeLabelFromCard(e),a("updateCardProperty",{property:"labels",card:e.card})},async updateCardDesc(t,e){let{commit:a}=t;a("updateCardProperty",{property:"description",card:await q.updateCard(e)})},async updateCardDue(t,e){let{commit:a}=t;a("updateCardProperty",{property:"duedate",card:await q.updateCard(e)})},addCardData(t,e){let{commit:a}=t;const r={...e};a("addStack",r.relatedStack),a("addBoard",r.relatedBoard),delete r.relatedStack,delete r.relatedBoard,a("addCard",r)}}};const Q=new class{url(t){return t=`dav/comments/deckCard/${t}`,(0,Z.c)(t)}async loadComments(t){let{cardId:e,limit:a,offset:r}=t;return(await j.ZP.get((0,Z.Ii)(`apps/deck/api/v1.0/cards/${e}/comments`),{params:{limit:a,offset:r},headers:{"OCS-APIRequest":"true"}})).data.ocs.data}async createComment(t){let{cardId:e,comment:a,replyTo:r}=t;return(await j.ZP.post((0,Z.Ii)(`apps/deck/api/v1.0/cards/${e}/comments`),{message:`${a}`,parentId:r?r.id:null})).data.ocs.data}async updateComment(t){let{cardId:e,id:a,comment:r}=t;return(await j.ZP.put((0,Z.Ii)(`apps/deck/api/v1.0/cards/${e}/comments/${a}`),{message:`${r}`})).data.ocs.data}async deleteComment(t){let{cardId:e,id:a}=t;return(await j.ZP.delete((0,Z.Ii)(`apps/deck/api/v1.0/cards/${e}/comments/${a}`))).data.ocs.data}async markCommentsAsRead(t){const e=(new Date).toUTCString();return(await(0,j.ZP)({method:"PROPPATCH",url:this.url(`${t}`),data:`<?xml version="1.0"?>\n\t\t\t\t<d:propertyupdate  xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns">\n\t\t\t\t  <d:set>\n\t\t\t\t   <d:prop>\n\t\t\t\t\t  <oc:readMarker>${e}</oc:readMarker>\n\t\t\t\t\t</d:prop>\n\t\t\t\t  </d:set>\n\t\t\t\t</d:propertyupdate>`})).data}},K={state:{comments:{},replyTo:null},getters:{getCommentsForCard:t=>e=>t.comments[e]?[...t.comments[e].comments].sort(((t,e)=>e.id-t.id)):[],hasMoreComments:t=>e=>t.comments[e]&&t.comments[e].hasMore},mutations:{endReached(t,e){let{cardId:a}=e;t.comments[a]&&(t.comments[a].hasMore=!1)},addComments(t,e){let{comments:a,cardId:r}=e;if(void 0===t.comments[r])F.default.set(t.comments,r,{hasMore:a.length>0,comments:[...a]});else{const e=a.filter((e=>-1===t.comments[r].comments.findIndex((t=>t.id===e.id))));t.comments[r].comments.push(...e)}},updateComment(t,e){let{cardId:a,comment:r}=e;const n=t.comments[a].comments.findIndex((t=>t.id===r.id));-1!==n&&Object.assign(t.comments[a].comments[n],r)},deleteComment(t,e){const a=t.comments[e.cardId].comments.findIndex((t=>t.id===e.id));-1!==a&&t.comments[e.cardId].comments.splice(a,1)},markCommentsAsRead(t,e){t.comments[e].comments.forEach((t=>{F.default.set(t,"isUnread",!1)}))},setReplyTo(t,e){F.default.set(t,"replyTo",e)}},actions:{async fetchComments(t,e){let{commit:a}=t,{cardId:r,offset:n}=e;const i=await Q.loadComments({cardId:r,limit:10,offset:n||0});a("addComments",{cardId:r,comments:i}),i.length<10&&a("endReached",{cardId:r})},async fetchMore(t,e){let{commit:a,dispatch:r,getters:n}=t,{cardId:i}=e;await r("fetchComments",{cardId:i}),await r("fetchComments",{cardId:i,offset:n.getCommentsForCard(i).length})},async createComment(t,e){let{commit:a,dispatch:r,state:n}=t,{cardId:i,comment:s}=e;await Q.createComment({cardId:i,comment:s,replyTo:n.replyTo}),await r("fetchComments",{cardId:i})},async deleteComment(t,e){let{commit:a}=t;await Q.deleteComment(e),a("deleteComment",e)},async updateComment(t,e){let{commit:a}=t;const r=await Q.updateComment(e);await a("updateComment",{cardId:e.cardId,comment:r})},async markCommentsAsRead(t,e){let{commit:a}=t;await Q.markCommentsAsRead(e),await a("markCommentsAsRead",e)},setReplyTo(t,e){let{commit:a}=t;a("setReplyTo",e)}}},V=new z,J=new R.E,X={state:{deletedStacks:[],deletedCards:[]},mutations:{setDeletedStacks(t,e){t.deletedStacks=[],e.length>0&&(t.deletedStacks=e)},moveStackToTrash(t,e){e.deletedAt=Math.floor(Date.now()/1e3),t.deletedStacks.push(e)},removeStackFromTrash(t,e){const a=t.deletedStacks.findIndex((t=>t.id===e.id));-1!==a&&t.deletedStacks.splice(a,1)},setDeletedCards(t,e){t.deletedCards=[],t.deletedCards=e},moveCardToTrash(t,e){e.deletedAt=Math.floor(Date.now()/1e3),t.deletedCards.push(e)},removeCardFromTrash(t,e){const a=t.deletedCards.findIndex((t=>t.id===e.id));-1!==a&&t.deletedCards.splice(a,1)}},actions:{fetchDeletedItems(t,e){let{commit:a}=t;V.deletedStacks(e).then((t=>{a("setDeletedStacks",t)})),J.deletedCards(e).then((t=>{a("setDeletedCards",t)}))},stackUndoDelete(t,e){let{commit:a}=t;V.updateStack(e).then((t=>{a("addStack",t),a("removeStackFromTrash",t)}))},cardUndoDelete(t,e){let{commit:a}=t;J.updateCard(e).then((t=>{a("removeCardFromTrash",t),a("addCard",t)}))}}};const tt=new class{url(t){return(0,Z.nu)(`/apps/deck${t}`)}async fetchAttachments(t){return(await(0,j.ZP)({method:"GET",url:this.url(`/cards/${t}/attachments`)})).data}async createAttachment(t){let{cardId:e,formData:a,onUploadProgress:r}=t;return(await(0,j.ZP)({method:"POST",url:this.url(`/cards/${e}/attachment`),data:a,onUploadProgress:r})).data}async updateAttachment(t){let{cardId:e,attachment:a,formData:r}=t;return(await(0,j.ZP)({method:"POST",url:this.url(`/cards/${e}/attachment/${a.type}:${a.id}`),data:r})).data}async deleteAttachment(t){await(0,j.ZP)({method:"DELETE",url:this.url(`/cards/${t.cardId}/attachment/${t.type}:${t.id}`)})}async restoreAttachment(t){return(await(0,j.ZP)({method:"GET",url:this.url(`/cards/${t.cardId}/attachment/${t.type}:${t.id}/restore`)})).data}async displayAttachment(t){return(await(0,j.ZP)({method:"GET",url:this.url(`/cards/${t.cardId}/attachment/${t.type}:${t.id}`)})).data}},et={state:{attachments:{}},getters:{attachmentsByCard:t=>e=>void 0===t.attachments[e]?[]:t.attachments[e]},mutations:{createAttachment(t,e){let{cardId:a,attachment:r}=e;void 0===t.attachments[a]?F.default.set(t.attachments,a,[r]):t.attachments[a].push(r)},createAttachments(t,e){let{cardId:a,attachments:r}=e;F.default.set(t.attachments,a,r)},updateAttachment(t,e){let{cardId:a,attachment:r}=e;const n=t.attachments[r.cardId].findIndex((t=>t.id===r.id&&t.type===r.type));-1!==n&&F.default.set(t.attachments[a],n,r)},deleteAttachment(t,e){const a=t.attachments[e.cardId].findIndex((t=>t.id===e.id&&t.type===e.type));-1!==a&&(t.attachments[e.cardId][a].deletedAt=Date.now()/1e3|0)},unshareAttachment(t,e){const a=t.attachments[e.cardId].findIndex((t=>t.id===e.id&&t.type===e.type));-1!==a&&(t.attachments[e.cardId][a].deletedAt=-1)},restoreAttachment(t,e){const a=t.attachments[e.cardId].findIndex((t=>t.id===e.id&&t.type===e.type));-1!==a&&(t.attachments[e.cardId][a].deletedAt=0)}},actions:{async fetchAttachments(t,e){let{commit:a}=t;const r=await tt.fetchAttachments(e);a("createAttachments",{cardId:e,attachments:r}),a("cardSetAttachmentCount",{cardId:e,count:r.length})},async createAttachment(t,e){let{commit:a}=t,{cardId:r,formData:n,onUploadProgress:i}=e;a("createAttachment",{cardId:r,attachment:await tt.createAttachment({cardId:r,formData:n,onUploadProgress:i})}),a("cardIncreaseAttachmentCount",r)},async updateAttachment(t,e){let{commit:a}=t,{cardId:r,attachment:n,formData:i}=e;a("updateAttachment",{cardId:r,attachment:await tt.updateAttachment({cardId:r,attachment:n,formData:i})})},async deleteAttachment(t,e){let{commit:a}=t;await tt.deleteAttachment(e),a("deleteAttachment",e),a("cardDecreaseAttachmentCount",e.cardId)},async unshareAttachment(t,e){let{commit:a}=t;await tt.deleteAttachment(e),a("unshareAttachment",e),a("cardDecreaseAttachmentCount",e.cardId)},async restoreAttachment(t,e){let{commit:a}=t;a("restoreAttachment",await tt.restoreAttachment(e)),a("cardIncreaseAttachmentCount",e.cardId)}}};F.default.use(i.default);const at=new class{url(t){return(0,Z.Ii)(`apps/deck/api/v1.0/${t}`)}get(t){return j.ZP.get(this.url(`overview/${t}`),{headers:{"OCS-APIRequest":"true"}}).then((t=>Promise.resolve(t.data.ocs.data)),(t=>Promise.reject(t))).catch((t=>Promise.reject(t)))}},rt={state:{assignedCards:[],loading:!1},getters:{assignedCardsDashboard:t=>t.assignedCards},mutations:{setAssignedCards(t,e){t.assignedCards=e},setLoading(t,e){t.loading=e}},actions:{async loadUpcoming(t){let{state:e,commit:a}=t;if(e.loading)return e.loading;const r=(async()=>{a("setCurrentBoard",null);const t=await at.get("upcoming"),e=Object.values(t).flat();for(const t in e)a("addCard",e[t]);a("setAssignedCards",t),a("setLoading",!1)})();return a("setLoading",r),r}}};F.default.use(i.default);const nt=new M.A,it="",st="archived",ot="shared",dt=new i.default.Store({modules:{actions:P,stack:G,card:H,comment:K,trashbin:X,attachment:et,overview:rt},strict:!1,state:{isFullApp:!0,config:(0,L.j)("deck","config",{}),showArchived:!1,navShown:null===localStorage.getItem("deck.navShown")||"true"===localStorage.getItem("deck.navShown"),compactMode:"true"===localStorage.getItem("deck.compactMode"),showCardCover:"true"===localStorage.getItem("deck.showCardCover"),sidebarShown:!1,currentBoard:null,currentCard:null,boards:(0,L.j)("deck","initialBoards",[]),sharees:[],assignableUsers:[],boardFilter:it,searchQuery:"",activity:[],activityLoadMore:!0,filter:{tags:[],users:[],due:"",completed:"both"},shortcutLock:!1},getters:{config:t=>e=>!t.isFullApp&&"cardDetailsInModal"===e||t.config[e],getSearchQuery:t=>t.searchQuery,getFilter:t=>t.filter,boards:t=>t.boards,boardById:t=>e=>t.boards.find((t=>t.id===e)),assignables:t=>[...t.assignableUsers.map((t=>({...t,type:0}))),...t.currentBoard.acl.filter((t=>1===t.type&&"object"==typeof t.participant)).map((t=>({...t.participant,type:1}))),...t.currentBoard.acl.filter((t=>7===t.type&&"object"==typeof t.participant)).map((t=>({...t.participant,type:7})))],noneArchivedBoards:t=>t.boards.filter((t=>!1===t.archived&&!t.deletedAt)),archivedBoards:t=>t.boards.filter((t=>!0===t.archived&&!t.deletedAt)),sharedBoards:t=>t.boards.filter((t=>t.shared&&!t.deletedAt)),filteredBoards:t=>t.boards.filter((e=>t.boardFilter===it&&!1===e.archived||t.boardFilter===st&&!0===e.archived||t.boardFilter===ot&&1===e.shared)),currentBoardLabels:t=>t.currentBoard?t.currentBoard.labels:[],canEdit:t=>!!t.currentBoard&&t.currentBoard.permissions.PERMISSION_EDIT,canManage:t=>!!t.currentBoard&&t.currentBoard.permissions.PERMISSION_MANAGE,canShare:t=>!!t.currentBoard&&t.currentBoard.permissions.PERMISSION_SHARE,isArchived:t=>t.currentBoard&&t.currentBoard.archived},mutations:{setFullApp(t,e){F.default.set(t,"isFullApp",e)},SET_CONFIG(t,e){let{key:a,value:r}=e;const[n,i,s]=a.split(":",3);let o=-1;if("board"===n)o=t.boards.findIndex((t=>i===""+t.id)),o>-1&&F.default.set(t.boards[o].settings,s,r);else F.default.set(t.config,a,r)},setSearchQuery(t,e){t.searchQuery=e},SET_FILTER(t,e){Object.assign(t.filter,e)},TOGGLE_FILTER(t,e){Object.keys(e).forEach((a=>{if("due"===a)F.default.set(t.filter,a,e.due);else e[a].forEach((e=>{-1===t.filter[a].indexOf(e)?t.filter[a].push(e):t.filter[a].splice(t.filter[a].indexOf(e),1)}))}))},toggleShowArchived(t){t.showArchived=!t.showArchived},addBoard(t,e){const a=t.boards.findIndex((t=>e.id===t.id));a>-1?F.default.set(t.boards,a,e):t.boards.push(e)},cloneBoard(t,e){const a=t.boards.findIndex((t=>e.id===t.id));a>-1?F.default.set(t.boards,a,e):t.boards.push(e)},removeBoard(t,e){t.boards=t.boards.filter((t=>e.id!==t.id))},toggleNav(t,e){t.navShown=e,localStorage.setItem("deck.navShown",e)},toggleSidebar(t){t.sidebarShown=!t.sidebarShown},toggleCompactMode(t){t.compactMode=!t.compactMode,localStorage.setItem("deck.compactMode",t.compactMode)},toggleShowCardCover(t){t.showCardCover=!t.showCardCover,localStorage.setItem("deck.showCardCover",t.showCardCover)},setBoards(t,e){t.boards=e},setSharees(t,e){F.default.set(t,"sharees",e.exact.users),t.sharees.push(...e.exact.groups),t.sharees.push(...e.exact.circles),t.sharees.push(...e.users),t.sharees.push(...e.groups),t.sharees.push(...e.circles)},setAssignableUsers(t,e){t.assignableUsers=e},setBoardFilter(t,e){t.boardFilter=e},setCurrentBoard(t,e){t.currentBoard=e},setCurrentCard(t,e){t.currentCard=e},removeLabelFromCurrentBoard(t,e){const a=t.currentBoard.labels.findIndex((t=>e===t.id));a>-1&&t.currentBoard.labels.splice(a,1)},updateLabelFromCurrentBoard(t,e){const a=t.currentBoard.labels.find((t=>e.id===t.id));a.title=e.title,a.color=e.color},addLabelToCurrentBoard(t,e){t.currentBoard.labels.push(e)},addAclToCurrentBoard(t,e){t.currentBoard.acl.push(e)},updateAclFromCurrentBoard(t,e){for(const a in t.currentBoard.acl)if(t.currentBoard.acl[a].participant.uid===e.participant.uid){F.default.set(t.currentBoard.acl,a,e);break}},deleteAclFromCurrentBoard(t,e){let a=-1;for(const r in t.currentBoard.acl){const n=t.currentBoard.acl[r];if(e.id===n.id){a=r;break}}a>-1&&F.default.delete(t.currentBoard.acl,a)},TOGGLE_SHORTCUT_LOCK(t,e){t.shortcutLock=e}},actions:{setFullApp(t,e){let{commit:a}=t;a("setFullApp",e)},async setConfig(t,e){let{commit:a}=t;for(const t in e)try{await j.ZP.post((0,Z.Ii)(`apps/deck/api/v1.0/config/${t}`),{value:e[t]}),a("SET_CONFIG",{key:t,value:e[t]})}catch(e){throw console.error(`Error while saving ${t}`,e.response),e}},setFilter(t,e){let{commit:a}=t;a("SET_FILTER",e)},toggleFilter(t,e){let{commit:a}=t;a("TOGGLE_FILTER",e)},async loadBoardById(t,e){let{commit:a,dispatch:r}=t;r("setFilter",{tags:[],users:[],due:""}),a("setCurrentBoard",null);const n=await nt.loadById(e);a("setCurrentBoard",n),a("setAssignableUsers",n.users)},async refreshBoard(t,e){let{commit:a,dispatch:r}=t;const n=await nt.loadById(e),i=n.ETag!==this.state.currentBoard.ETag;a("setCurrentBoard",n),a("setAssignableUsers",n.users),i&&r("loadStacks",e)},toggleShowArchived(t){let{commit:e}=t;e("toggleShowArchived")},archiveBoard(t,e){let{commit:a}=t;const r=JSON.parse(JSON.stringify(e));r.archived=!0,nt.updateBoard(r).then((t=>{a("addBoard",t)}))},unarchiveBoard(t,e){let{commit:a}=t;const r=JSON.parse(JSON.stringify(e));r.archived=!1,nt.updateBoard(r).then((t=>{a("addBoard",t)}))},async updateBoard(t,e){let{commit:a}=t;a("addBoard",await nt.updateBoard(e))},async createBoard(t,e){let{commit:a}=t;try{a("addBoard",await nt.createBoard(e))}catch(t){return t}},async cloneBoard(t,e){let{commit:a}=t;try{const t=await nt.cloneBoard(e);return a("cloneBoard",t),t}catch(t){return t}},removeBoard(t,e){let{commit:a}=t;a("removeBoard",e)},async loadBoards(t){let{commit:e}=t;e("setBoards",await nt.loadBoards())},async loadSharees(t,e){let{commit:a}=t;const r=new URLSearchParams;if(void 0===e)return;r.append("search",e),r.append("format","json"),r.append("perPage",20),r.append("itemType",[0,1,4,7]),r.append("lookup",!1);a("setSharees",(await j.ZP.get((0,Z.Ii)("apps/files_sharing/api/v1/sharees"),{params:r})).data.ocs.data)},setBoardFilter(t,e){let{commmit:a}=t;a("setBoardFilter",e)},toggleNav(t,e){let{commit:a}=t;a("toggleNav",e)},toggleSidebar(t){let{commit:e}=t;e("toggleSidebar")},toggleCompactMode(t){let{commit:e}=t;e("toggleCompactMode")},toggleShowCardCover(t){let{commit:e}=t;e("toggleShowCardCover")},setCurrentBoard(t,e){let{commit:a}=t;a("setCurrentBoard",e)},setAssignableUsers(t,e){let{commit:a}=t;a("setAssignableUsers",e)},setCurrentCard(t,e){let{commit:a}=t;a("setCurrentCard",e)},removeLabelFromCurrentBoard(t,e){let{commit:a}=t;nt.deleteLabel(e).then((t=>{a("removeLabelFromCurrentBoard",t.id)}))},updateLabelFromCurrentBoard(t,e){let{commit:a}=t;nt.updateLabel(e).then((t=>{a("updateLabelFromCurrentBoard",t)}))},addLabelToCurrentBoard(t,e){let{commit:a}=t;e.boardId=this.state.currentBoard.id,nt.createLabel(e).then((t=>{a("addLabelToCurrentBoard",t)}))},async addLabelToCurrentBoardAndCard(t,e){let{dispatch:a,commit:r}=t,{newLabel:n,card:i}=e;n.boardId=this.state.currentBoard.id;const s=await nt.createLabel(n);return r("addLabelToCurrentBoard",s),a("addLabel",{card:i,labelId:s.id}),s},async addAclToCurrentBoard(t,e){let{dispatch:a,commit:r}=t;e.boardId=this.state.currentBoard.id;r("addAclToCurrentBoard",await nt.addAcl(e)),a("refreshBoard",e.boardId)},updateAclFromCurrentBoard(t,e){let{commit:a}=t;e.boardId=this.state.currentBoard.id,nt.updateAcl(e).then((t=>{a("updateAclFromCurrentBoard",t)}))},deleteAclFromCurrentBoard(t,e){let{dispatch:a,commit:r}=t;e.boardId=this.state.currentBoard.id,nt.deleteAcl(e).then((t=>{r("deleteAclFromCurrentBoard",t),a("loadBoardById",t.boardId)}))},async transferOwnership(t,e){let{commit:a}=t,{boardId:r,newOwner:n}=e;await j.ZP.put((0,Z.nu)(`apps/deck/boards/${r}/transferOwner`),{newOwner:n})},toggleShortcutLock(t,e){let{commit:a}=t;a("TOGGLE_SHORTCUT_LOCK",e)}}});let ct=!1,lt=!1;function At(t){return!(!j.ZP.defaults.headers["x-nc-deck-session"]||!j.ZP.defaults.headers["x-nc-deck-session"].startsWith(t))}function pt(){return ct}function mt(t){if(!pt())return{async close(){}};let e,a;const r=()=>{e=N.createSession(t).then((t=>t.token)),e.then((t=>{a=t,j.ZP.defaults.headers["x-nc-deck-session"]=t}))};r();const n=async()=>{if(e){if(!lt)try{lt=!0,await N.syncSession(t,await e)}catch(t){404===t.response.status?r():console.error("Failed to sync deck session",t)}finally{lt=!1}}else r()};let i=setInterval(n,9e4);const s=()=>{"hidden"===document.visibilityState&&a?(N.closeSessionViaBeacon(t,a),e=null,a=null,delete j.ZP.defaults.headers["x-nc-deck-session"],clearInterval(i)):(n(),dt.dispatch("refreshBoard",dt.state.currentBoard?.id),clearInterval(i),i=setInterval(n,9e4))};return document.addEventListener("visibilitychange",s),{async close(){clearInterval(i),document.removeEventListener("visibilitychange",s),a&&(await N.closeSession(t,a),e=null,a=null,delete j.ZP.defaults.headers["x-nc-deck-session"])}}}ct=(0,$.listen)("deck_board_update",((t,e)=>{if(At(e._causingSessionToken))return;const a=dt.state.currentBoard?.id;e.id===a&&dt.dispatch("refreshBoard",a)})),(0,$.listen)("deck_card_update",((t,e)=>{if(At(e._causingSessionToken))return;const a=dt.state.currentBoard?.id;e.boardId===a&&dt.dispatch("loadStacks",a)}));var ut=r(23739),Ct=r(33907);const ht={name:"Controls",components:{CreateNewCardCustomPicker:ut.default,NcModal:o.Jc,NcActions:o.O3,NcActionButton:o.Js,NcButton:o.P2,NcPopover:o.Fh,NcAvatar:o.Xn,ArchiveIcon:c.Z,ImageIcon:l.Z,FilterIcon:A.Z,FilterOffIcon:p.Z,ArrowCollapseVerticalIcon:m.Z,ArrowExpandVerticalIcon:u.Z,SessionList:E},mixins:[d.Z],props:{board:{type:Object,required:!1,default:null},overviewName:{type:String,required:!1,default:null}},data:()=>({newStackTitle:"",stack:"",filterVisible:!1,showArchived:!1,isAddStackVisible:!1,filter:{tags:[],users:[],due:"",unassigned:!1,completed:"both"},showAddCardModal:!1,defaultPageTitle:!1,isNotifyPushEnabled:pt()}),computed:{...(0,i.Se)(["canEdit","canManage"]),...(0,i.rn)({isFullApp:t=>t.isFullApp,compactMode:t=>t.compactMode,showCardCover:t=>t.showCardCover,searchQuery:t=>t.searchQuery}),detailsRoute:()=>({name:"board.details"}),isFilterActive(){return 0!==this.filter.tags.length||0!==this.filter.users.length||""!==this.filter.due||"both"!==this.filter.completed},labelsSorted(){return[...this.board.labels].sort(((t,e)=>t.title<e.title?-1:1))},presentUsers(){return this.board?this.board.users.filter((t=>this.board.activeSessions.includes(t.uid))):[]}},watch:{board(t,e){t?.id!==e?.id&&this.clearFilter(),t&&this.setPageTitle(t.title)}},beforeMount(){(0,s.Ld)("deck:board:show-new-card",this.clickShowAddCardModel),(0,s.Ld)("deck:board:toggle-filter-popover",this.triggerOpenFilters),(0,s.Ld)("deck:board:clear-filter",this.triggerClearFilter),(0,s.Ld)("deck:board:toggle-filter-by-me",this.triggerFilterByMe)},beforeDestroy(){(0,s.r1)("deck:board:show-new-card",this.clickShowAddCardModel),(0,s.r1)("deck:board:toggle-filter-popover",this.triggerOpenFilters),(0,s.r1)("deck:board:clear-filter",this.triggerClearFilter),(0,s.r1)("deck:board:toggle-filter-by-me",this.triggerFilterByMe),this.setPageTitle("")},methods:{beforeSetFilter(t){this.filter.due===t.target.value&&(this.filter.due="",this.$store.dispatch("setFilter",{...this.filter})),"unassigned"===t.target.value?(this.filter.users=[],this.$store.dispatch("setFilter",{...this.filter})):(this.filter.completed="both",this.$store.dispatch("setFilter",{...this.filter})),this.$store.dispatch("setFilter",{...this.filter})},setFilter(){this.filter.users.length>0&&(this.filter.unassigned=!1),this.$nextTick((()=>this.$store.dispatch("setFilter",{...this.filter})))},toggleNav(){this.$store.dispatch("toggleNav")},toggleCompactMode(){this.$store.dispatch("toggleCompactMode")},toggleShowCardCover(){this.$store.dispatch("toggleShowCardCover")},toggleShowArchived(){this.$store.dispatch("toggleShowArchived"),this.showArchived=!this.showArchived},addNewStack(){this.stack={title:this.newStackTitle},this.$store.dispatch("createStack",this.stack),this.newStackTitle="",this.stack=null,this.isAddStackVisible=!1},showAddStack(){this.isAddStackVisible=!0},hideAddStack(){this.isAddStackVisible=!1},toggleDetailsView(){"board.details"===this.$route.name?this.$router.push({name:"board"}):this.$router.push({name:"board.details"})},clearFilter(){const t={tags:[],users:[],due:"",completed:"both"};this.$store.dispatch("setFilter",{...t}),this.filter=t},clickShowAddCardModel(){this.showAddCardModal=!0},clickHideAddCardModel(){this.showAddCardModal=!1},setPageTitle(t){if(!this.isFullApp)return;!1===this.defaultPageTitle&&(this.defaultPageTitle=window.document.title,-1!==this.defaultPageTitle.indexOf(" - Deck - ")&&(this.defaultPageTitle=this.defaultPageTitle.substring(this.defaultPageTitle.indexOf(" - Deck - ")+3)),0!==this.defaultPageTitle.indexOf("Deck - ")&&(this.defaultPageTitle="Deck - "+this.defaultPageTitle));let e=this.defaultPageTitle;""!==t&&(e=`${t} - ${e}`),window.document.title=e},triggerOpenFilters(){this.$refs.filterPopover.$el.click()},triggerOpenSearch(){this.$refs.search.focus()},triggerClearFilter(){this.clearFilter()},triggerFilterByMe(){this.isFilterActive?this.clearFilter():(this.filter.users=[(0,Ct.ts)().uid],this.setFilter())}}};var gt=r(3505),vt={};vt.styleTagTransform=I(),vt.setAttributes=y(),vt.insert=x().bind(null,"head"),vt.domAPI=f(),vt.insertStyleElement=_();g()(gt.Z,vt);gt.Z&&gt.Z.locals&&gt.Z.locals;var ft=r(44975),bt={};bt.styleTagTransform=I(),bt.setAttributes=y(),bt.insert=x().bind(null,"head"),bt.domAPI=f(),bt.insertStyleElement=_();g()(ft.Z,bt);ft.Z&&ft.Z.locals&&ft.Z.locals;const xt=(0,T.Z)(ht,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"controls"},[t.showAddCardModal?e("NcModal",{staticClass:"card-selector",on:{close:t.clickHideAddCardModel}},[e("CreateNewCardCustomPicker",{attrs:{"show-created-notice":""},on:{cancel:t.clickHideAddCardModel}})],1):t._e(),t._v(" "),t.overviewName?e("div",{staticClass:"board-title"},[e("div",{staticClass:"board-bullet icon-calendar-dark"}),t._v(" "),e("h2",{attrs:{dir:"auto"}},[t._v("\n\t\t\t"+t._s(t.overviewName)+"\n\t\t")]),t._v(" "),e("NcActions",[e("NcActionButton",{attrs:{icon:"icon-add"},on:{click:t.clickShowAddCardModel}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Add card"))+"\n\t\t\t")])],1)],1):t.board?e("div",{staticClass:"board-title"},[e("div",{staticClass:"board-bullet",style:{backgroundColor:"#"+t.board.color}}),t._v(" "),e("h2",{attrs:{dir:"auto"}},[t._v("\n\t\t\t"+t._s(t.board.title)+"\n\t\t")]),t._v(" "),t.showArchived?e("p",[t._v("\n\t\t\t("+t._s(t.t("deck","Archived cards"))+")\n\t\t")]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"board-actions"},[t.isNotifyPushEnabled&&t.presentUsers.length?e("SessionList",{attrs:{sessions:t.presentUsers}}):t._e(),t._v(" "),(t.searchQuery,e("div",{staticClass:"deck-search"},[e("input",{ref:"search",staticClass:"icon-search",attrs:{id:"deck-search-input",tabindex:0,type:"search"},domProps:{value:t.searchQuery},on:{focus:function(e){return t.$store.dispatch("toggleShortcutLock",!0)},blur:function(e){return t.$store.dispatch("toggleShortcutLock",!1)},input:function(e){return t.$store.commit("setSearchQuery",e.target.value)}}})])),t._v(" "),t.board&&t.canManage&&!t.showArchived&&!t.board.archived?e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideAddStack,expression:"hideAddStack"}],attrs:{id:"stack-add"}},[t.isAddStackVisible?e("form",{on:{submit:function(e){return e.preventDefault(),t.addNewStack()}}},[e("label",{staticClass:"hidden-visually",attrs:{for:"new-stack-input-main"}},[t._v(t._s(t.t("deck","Add list")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStackTitle,expression:"newStackTitle"},{name:"focus",rawName:"v-focus"}],staticClass:"no-close",attrs:{id:"new-stack-input-main",type:"text",placeholder:t.t("deck","List name"),required:""},domProps:{value:t.newStackTitle},on:{focus:function(e){return t.$store.dispatch("toggleShortcutLock",!0)},blur:function(e){return t.$store.dispatch("toggleShortcutLock",!1)},input:function(e){e.target.composing||(t.newStackTitle=e.target.value)}}}),t._v(" "),e("input",{staticClass:"icon-confirm",attrs:{title:t.t("deck","Add list"),type:"submit",value:""}})]):e("NcActions",[e("NcActionButton",{attrs:{icon:"icon-add"},on:{click:function(e){return e.stopPropagation(),t.showAddStack.apply(null,arguments)}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("deck","Add list"))+"\n\t\t\t\t")])],1)],1):t._e(),t._v(" "),t.board?e("div",{staticClass:"board-action-buttons"},[e("div",{staticClass:"board-action-buttons__filter"},[e("NcPopover",{attrs:{placement:"bottom-end","aria-label":t.t("deck","Active filters"),name:t.t("deck","Active filters")},on:{show:function(e){t.filterVisible=!0},hide:function(e){t.filterVisible=!1}},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("NcButton",{ref:"filterPopover",staticClass:"filter-button",attrs:{title:t.t("deck","Apply filter"),"aria-label":t.t("deck","Apply filter"),type:t.isFilterActive?"primary":"tertiary"},scopedSlots:t._u([{key:"icon",fn:function(){return[t.isFilterActive?e("FilterIcon",{attrs:{size:20,decorative:""}}):e("FilterOffIcon",{attrs:{size:20,decorative:""}})]},proxy:!0}],null,!1,2332309571)})]},proxy:!0}],null,!1,2069517790)},[t._v(" "),t.filterVisible?e("div",{staticClass:"filter"},[e("h3",[t._v(t._s(t.t("deck","Filter by tag")))]),t._v(" "),t._l(t.labelsSorted,(function(a){return e("div",{key:a.id,staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.tags,expression:"filter.tags"}],staticClass:"checkbox",attrs:{id:a.id,type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(t.filter.tags)?t._i(t.filter.tags,a.id)>-1:t.filter.tags},on:{change:[function(e){var r=t.filter.tags,n=e.target,i=!!n.checked;if(Array.isArray(r)){var s=a.id,o=t._i(r,s);n.checked?o<0&&t.$set(t.filter,"tags",r.concat([s])):o>-1&&t.$set(t.filter,"tags",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.filter,"tags",i)},t.setFilter]}}),t._v(" "),e("label",{attrs:{for:a.id}},[e("span",{staticClass:"label",style:t.labelStyle(a)},[t._v(t._s(a.title))])])])})),t._v(" "),e("h3",[t._v(t._s(t.t("deck","Filter by assigned user")))]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.unassigned,expression:"filter.unassigned"}],staticClass:"checkbox",attrs:{id:"unassigned",type:"checkbox",value:"unassigned"},domProps:{checked:Array.isArray(t.filter.unassigned)?t._i(t.filter.unassigned,"unassigned")>-1:t.filter.unassigned},on:{change:[function(e){var a=t.filter.unassigned,r=e.target,n=!!r.checked;if(Array.isArray(a)){var i="unassigned",s=t._i(a,i);r.checked?s<0&&t.$set(t.filter,"unassigned",a.concat([i])):s>-1&&t.$set(t.filter,"unassigned",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.filter,"unassigned",n)},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"unassigned"}},[t._v(t._s(t.t("deck","Unassigned")))])]),t._v(" "),t._l(t.board.users,(function(a){return e("div",{key:a.uid,staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.users,expression:"filter.users"}],staticClass:"checkbox",attrs:{id:a.uid,type:"checkbox"},domProps:{value:a.uid,checked:Array.isArray(t.filter.users)?t._i(t.filter.users,a.uid)>-1:t.filter.users},on:{change:[function(e){var r=t.filter.users,n=e.target,i=!!n.checked;if(Array.isArray(r)){var s=a.uid,o=t._i(r,s);n.checked?o<0&&t.$set(t.filter,"users",r.concat([s])):o>-1&&t.$set(t.filter,"users",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.filter,"users",i)},t.setFilter]}}),t._v(" "),e("label",{attrs:{for:a.uid}},[e("NcAvatar",{attrs:{user:a.uid,size:24,"disable-menu":!0}}),t._v(" "+t._s(a.displayname))],1)])})),t._v(" "),e("h3",[t._v(t._s(t.t("deck","Filter by completed")))]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.completed,expression:"filter.completed"}],staticClass:"radio",attrs:{id:"filter-option-both",type:"radio",value:"both"},domProps:{checked:t._q(t.filter.completed,"both")},on:{change:[function(e){return t.$set(t.filter,"completed","both")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"filter-option-both"}},[t._v(t._s(t.t("deck","Open and completed")))])]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.completed,expression:"filter.completed"}],staticClass:"radio",attrs:{id:"filter-option-open",type:"radio",value:"open"},domProps:{checked:t._q(t.filter.completed,"open")},on:{change:[function(e){return t.$set(t.filter,"completed","open")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"filter-option-open"}},[t._v(t._s(t.t("deck","Open")))])]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.completed,expression:"filter.completed"}],staticClass:"radio",attrs:{id:"filter-option-completed",type:"radio",value:"completed"},domProps:{checked:t._q(t.filter.completed,"completed")},on:{change:[function(e){return t.$set(t.filter,"completed","completed")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"filter-option-completed"}},[t._v(t._s(t.t("deck","Completed")))])]),t._v(" "),e("h3",[t._v(t._s(t.t("deck","Filter by due date")))]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.due,expression:"filter.due"}],staticClass:"radio",attrs:{id:"overdue",type:"radio",value:"overdue"},domProps:{checked:t._q(t.filter.due,"overdue")},on:{change:[function(e){return t.$set(t.filter,"due","overdue")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"overdue"}},[t._v(t._s(t.t("deck","Overdue")))])]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.due,expression:"filter.due"}],staticClass:"radio",attrs:{id:"dueToday",type:"radio",value:"dueToday"},domProps:{checked:t._q(t.filter.due,"dueToday")},on:{change:[function(e){return t.$set(t.filter,"due","dueToday")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"dueToday"}},[t._v(t._s(t.t("deck","Next 24 hours")))])]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.due,expression:"filter.due"}],staticClass:"radio",attrs:{id:"dueWeek",type:"radio",value:"dueWeek"},domProps:{checked:t._q(t.filter.due,"dueWeek")},on:{change:[function(e){return t.$set(t.filter,"due","dueWeek")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"dueWeek"}},[t._v(t._s(t.t("deck","Next 7 days")))])]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.due,expression:"filter.due"}],staticClass:"radio",attrs:{id:"dueMonth",type:"radio",value:"dueMonth"},domProps:{checked:t._q(t.filter.due,"dueMonth")},on:{change:[function(e){return t.$set(t.filter,"due","dueMonth")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"dueMonth"}},[t._v(t._s(t.t("deck","Next 30 days")))])]),t._v(" "),e("div",{staticClass:"filter--item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.due,expression:"filter.due"}],staticClass:"radio",attrs:{id:"noDue",type:"radio",value:"noDue"},domProps:{checked:t._q(t.filter.due,"noDue")},on:{change:[function(e){return t.$set(t.filter,"due","noDue")},t.setFilter],click:t.beforeSetFilter}}),t._v(" "),e("label",{attrs:{for:"noDue"}},[t._v(t._s(t.t("deck","No due date")))])]),t._v(" "),e("NcButton",{attrs:{disabled:!t.isFilterActive,wide:!0},on:{click:t.clearFilter}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("deck","Clear filter"))+"\n\t\t\t\t\t\t")])],2):t._e()])],1),t._v(" "),e("NcActions",{attrs:{"aria-label":t.t("deck","View Modes"),name:t.t("deck","Toggle View Modes")}},[e("NcActionButton",{on:{click:t.toggleShowArchived},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{size:20,decorative:""}})]},proxy:!0}],null,!1,2522540071)},[t._v("\n\t\t\t\t\t"+t._s(t.showArchived?t.t("deck","Hide archived cards"):t.t("deck","Show archived cards"))+"\n\t\t\t\t")]),t._v(" "),t.compactMode?e("NcActionButton",{on:{click:t.toggleCompactMode}},[e("ArrowExpandVerticalIcon",{attrs:{slot:"icon",size:20,decorative:""},slot:"icon"}),t._v("\n\t\t\t\t\t"+t._s(t.t("deck","Toggle compact mode"))+"\n\t\t\t\t")],1):e("NcActionButton",{on:{click:t.toggleCompactMode}},[e("ArrowCollapseVerticalIcon",{attrs:{slot:"icon",size:20,decorative:""},slot:"icon"}),t._v("\n\t\t\t\t\t"+t._s(t.t("deck","Toggle compact mode"))+"\n\t\t\t\t")],1),t._v(" "),e("NcActionButton",{on:{click:t.toggleShowCardCover},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ImageIcon",{attrs:{size:20,decorative:""}})]},proxy:!0}],null,!1,4228331746)},[t._v("\n\t\t\t\t\t"+t._s(t.showCardCover?t.t("deck","Hide card cover images"):t.t("deck","Show card cover images"))+"\n\t\t\t\t")])],1),t._v(" "),t.isFullApp?e("NcActions",[e("NcActionButton",{attrs:{icon:"icon-menu-sidebar","aria-label":t.t("deck","Open details"),name:t.t("deck","Details")},on:{click:t.toggleDetailsView}})],1):t._e()],1):t._e()],1)],1)}),[],!1,null,"f6667d3c",null).exports;var kt=r(51029),yt=r(2649),wt=r.n(yt),_t=r(64024),Bt=r(80767);const It={name:"CardId",props:{card:{type:Object,default:null}}};var St=r(53710),Dt={};Dt.styleTagTransform=I(),Dt.setAttributes=y(),Dt.insert=x().bind(null,"head"),Dt.domAPI=f(),Dt.insertStyleElement=_();g()(St.Z,Dt);St.Z&&St.Z.locals&&St.Z.locals;const Tt=(0,T.Z)(It,(function(){var t=this,e=t._self._c;return t.card?e("div",{staticClass:"cardid"},[e("span",[t._v("#"+t._s(t.card.id))])]):t._e()}),[],!1,null,"f56db06c",null).exports;var Et=r(4946),$t=r(12646),jt=r(7578),Zt=r(97386),Nt=r(70984),Lt=r(57883),Ft=r(19261),Mt=r(70145),Pt=r(61935);const zt="Done",Ut="Future",Ot="Next",Gt="Now",Rt="Overdue",Wt={name:"DueDate",components:{CheckCircle:Pt.Z,Clock:Ft.Z,ClockOutline:Mt.Z},props:{card:{type:Object,default:null}},computed:{...(0,i.rn)({compactMode:t=>t.compactMode}),dueState(){if(this.card.done)return zt;const t=Math.floor((0,Lt.Z)(this.card.duedate).diff(this.$root.time,"seconds")/60/60/24);return t<0?Rt:0===t?Gt:1===t?Ot:Ut},overdue(){return this.dueState===Rt},relativeDate(){const e=this.card.done?this.card.done:this.card.duedate,a=(0,Lt.Z)(this.$root.time).diff(e,"seconds");return a>=0&&a<45?t("core","seconds ago"):(0,Lt.Z)(e).fromNow()},absoluteDate(){const t=this.card.done?this.card.done:this.card.duedate;return(0,Lt.Z)(t).format("LLLL")}}};var Yt=r(79029),qt={};qt.styleTagTransform=I(),qt.setAttributes=y(),qt.insert=x().bind(null,"head"),qt.domAPI=f(),qt.insertStyleElement=_();g()(Yt.Z,qt);Yt.Z&&Yt.Z.locals&&Yt.Z.locals;const Ht=(0,T.Z)(Wt,(function(){var t=this,e=t._self._c;return t.card?e("div",{staticClass:"duedate",attrs:{"data-due-state":t.dueState}},[e("transition",{attrs:{name:"zoom"}},[t.card.duedate||t.card.done?e("div",{staticClass:"due",attrs:{name:t.absoluteDate}},[t.card.done?e("CheckCircle",{attrs:{size:16}}):t.overdue?e("Clock",{attrs:{size:16}}):e("ClockOutline",{attrs:{size:16}}),t._v(" "),t.compactMode?t._e():e("span",{staticClass:"due--label"},[t._v(t._s(t.relativeDate))])],1):t._e()])],1):t._e()}),[],!1,null,"1afd2267",null).exports,Qt={name:"CardBadges",components:{DueDate:Ht,NcAvatarList:Bt.Z,TextIcon:Et.Z,AttachmentIcon:$t.Z,CheckmarkIcon:jt.Z,CommentIcon:Zt.Z,CommentUnreadIcon:Nt.Z,CardId:Tt},props:{card:{type:Object,default:null}},computed:{checkListCount(){return(this.card.description.match(/^\s*([*+-]|(\d\.))\s+\[\s*(\s|x)\s*\](.*)$/gim)||[]).length},checkListCheckedCount(){return(this.card.description.match(/^\s*([*+-]|(\d\.))\s+\[\s*x\s*\](.*)$/gim)||[]).length},commentsHint(){return this.card.commentsUnread>0?t("deck","{count} comments, {unread} unread",{count:this.card.commentsCount,unread:this.card.commentsUnread}):null},idBadge(){return this.$store.getters.config("cardIdBadge")}},methods:{openComments(){const t=this.card&&this.card.boardId?this.card.boardId:this.$route.params.id;this.$router.push({name:"card",params:{id:t,cardId:this.card.id,tabId:"comments"}})}}};var Kt=r(3025),Vt={};Vt.styleTagTransform=I(),Vt.setAttributes=y(),Vt.insert=x().bind(null,"head"),Vt.domAPI=f(),Vt.insertStyleElement=_();g()(Kt.Z,Vt);Kt.Z&&Kt.Z.locals&&Kt.Z.locals;const Jt=(0,T.Z)(Qt,(function(){var t=this,e=t._self._c;return t.card?e("div",{staticClass:"badges"},[e("div",{staticClass:"badge-left"},[t.card.duedate||t.card.done?e("DueDate",{attrs:{card:t.card}}):t._e(),t._v(" "),e("div",{staticClass:"inline-badges"},[t.idBadge?e("CardId",{staticClass:"icon-badge",attrs:{card:t.card}}):t._e(),t._v(" "),t.card.commentsCount>0?e("div",{staticClass:"icon-badge",attrs:{title:t.commentsHint},on:{click:function(e){return e.stopPropagation(),t.openComments.apply(null,arguments)}}},[t.card.commentsUnread>0?e("CommentUnreadIcon",{attrs:{size:16}}):e("CommentIcon",{attrs:{size:16}}),t._v(" "),e("span",[t._v(t._s(t.card.commentsCount))])],1):t._e(),t._v(" "),t.card.description&&t.checkListCount>0?e("div",{staticClass:"icon-badge"},[e("CheckmarkIcon",{attrs:{size:16,title:t.t("deck","Todo items")}}),t._v(" "),e("span",[t._v(t._s(t.checkListCheckedCount)+"/"+t._s(t.checkListCount))])],1):t.card.description&&t.card.description.trim()&&0==t.checkListCount?e("div",{staticClass:"icon-badge"},[e("TextIcon",{attrs:{size:16,decorative:""}})],1):t._e(),t._v(" "),t.card.attachmentCount>0?e("div",{staticClass:"icon-badge"},[e("AttachmentIcon",{attrs:{size:16}}),t._v(" "),e("span",[t._v(t._s(t.card.attachmentCount))])],1):t._e()],1)],1),t._v(" "),e("div",{staticClass:"badge-right"},[e("NcAvatarList",{attrs:{users:t.card.assignedUsers,size:32}}),t._v(" "),t._t("default")],2)]):t._e()}),[],!1,null,"1cd7fbf0",null).exports;var Xt=r(79402),te=r(88752),ee=r(57303);r(32316);const ae={name:"CardMenuEntries",components:{NcActionButton:o.Js,ArchiveIcon:c.Z,CardBulletedIcon:ee.Z},props:{card:{type:Object,default:null},hideDetailsEntry:{type:Boolean,default:!1}},data:()=>({modalShow:!1,selectedBoard:"",selectedStack:"",stacksFromBoard:[]}),computed:{...(0,i.Se)(["isArchived","boards","cardActions","stackById","boardById"]),...(0,i.rn)({showArchived:t=>t.showArchived,currentBoard:t=>t.currentBoard}),canEdit(){return!this.card.archived},canEditBoard(){if(this.currentBoard)return this.$store.getters.canEdit;const t=this.$store.getters.boards.find((t=>t.id===this.card.boardId));return!!t?.permissions?.PERMISSION_EDIT},isCurrentUserAssigned(){return this.card.assignedUsers.find((t=>0===t.type&&t.participant.uid===(0,Ct.ts)()?.uid))},boardId(){return this.card?.boardId?this.card.boardId:Number(this.$route.params.id)},cardRichObject(){return{id:""+this.card.id,name:this.card.title,boardname:this.boardById(this.boardId)?.title,stackname:this.stackById(this.card.stackId)?.title,link:window.location.protocol+"//"+window.location.host+(0,Z.nu)("/apps/deck/")+`card/${this.card.id}`}}},methods:{openCard(){const t=this.card?.boardId?this.card.boardId:this.$route?.params.id??this.currentBoard.id;this.$router?this.$router?.push({name:"card",params:{id:t,cardId:this.card.id}}).catch((()=>{})):this.$root.$emit("open-card",this.card.id)},deleteCard(){this.$store.dispatch("deleteCard",this.card);const e={...this.card,deletedAt:0};(0,_t.yl)(t("deck","Card deleted"),(()=>this.$store.dispatch("cardUndoDelete",e)))},changeCardDoneStatus(){this.$store.dispatch("changeCardDoneStatus",{...this.card,done:!this.card.done})},archiveUnarchiveCard(){this.$store.dispatch("archiveUnarchiveCard",{...this.card,archived:!this.card.archived})},assignCardToMe(){this.$store.dispatch("assignCardToUser",{card:this.card,assignee:{userId:(0,Ct.ts)()?.uid,type:0}})},unassignCardFromMe(){this.$store.dispatch("removeUserFromCard",{card:this.card,assignee:{userId:(0,Ct.ts)()?.uid,type:0}})},openCardMoveDialog(){(0,s.j8)("deck:card:show-move-dialog",this.card)}}};const re=(0,T.Z)(ae,(function(){var t=this,e=t._self._c;return e("div",[t.hideDetailsEntry?t._e():e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:t.openCard}},[e("CardBulletedIcon",{attrs:{slot:"icon",size:20,decorative:""},slot:"icon"}),t._v("\n\t\t"+t._s(t.t("deck","Card details"))+"\n\t")],1),t._v(" "),t.canEdit&&!t.isCurrentUserAssigned?e("NcActionButton",{attrs:{icon:"icon-user","close-after-click":!0},on:{click:function(e){return t.assignCardToMe()}}},[t._v("\n\t\t"+t._s(t.t("deck","Assign to me"))+"\n\t")]):t._e(),t._v(" "),t.canEdit&&t.isCurrentUserAssigned?e("NcActionButton",{attrs:{icon:"icon-user","close-after-click":!0},on:{click:function(e){return t.unassignCardFromMe()}}},[t._v("\n\t\t"+t._s(t.t("deck","Unassign myself"))+"\n\t")]):t._e(),t._v(" "),t.canEdit?e("NcActionButton",{attrs:{icon:"icon-checkmark","close-after-click":!0},on:{click:function(e){return t.changeCardDoneStatus()}}},[t._v("\n\t\t"+t._s(t.card.done?t.t("deck","Mark as not done"):t.t("deck","Mark as done"))+"\n\t")]):t._e(),t._v(" "),t.canEdit?e("NcActionButton",{attrs:{icon:"icon-external","close-after-click":!0},on:{click:t.openCardMoveDialog}},[t._v("\n\t\t"+t._s(t.t("deck","Move card"))+"\n\t")]):t._e(),t._v(" "),t._l(t.cardActions,(function(a){return e("NcActionButton",{key:a.label,attrs:{"close-after-click":!0,icon:a.icon},on:{click:function(e){return a.callback(t.cardRichObject)}}},[t._v("\n\t\t"+t._s(a.label)+"\n\t")])})),t._v(" "),t.canEditBoard?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return t.archiveUnarchiveCard()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{size:20,decorative:""}})]},proxy:!0}],null,!1,2522540071)},[t._v("\n\t\t"+t._s(t.card.archived?t.t("deck","Unarchive card"):t.t("deck","Archive card"))+"\n\t")]):t._e(),t._v(" "),t.canEdit?e("NcActionButton",{attrs:{icon:"icon-delete","close-after-click":!0},on:{click:function(e){return t.deleteCard()}}},[t._v("\n\t\t"+t._s(t.t("deck","Delete card"))+"\n\t")]):t._e()],2)}),[],!1,null,null,null).exports,ne={name:"CardMenu",components:{NcActions:o.O3,CardMenuEntries:re},props:{card:{type:Object,default:null}}};const ie=(0,T.Z)(ne,(function(){var t=this,e=t._self._c;return t.card?e("div",{staticClass:"card-menu",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[e("NcActions",[e("CardMenuEntries",{attrs:{card:t.card}})],1)],1):t._e()}),[],!1,null,null,null).exports;const se={name:"CardCover",props:{cardId:{type:Number,required:!0}},computed:{attachments(){return[...this.$store.getters.attachmentsByCard(this.cardId)].filter((t=>t.deletedAt>=0&&t.extendedData.hasPreview)).sort(((t,e)=>e.id-t.id)).slice(0,3)},attachmentPreview(){const t=getComputedStyle(document.documentElement).getPropertyValue("--stack-width").trim(),e=260|Math.ceil(parseInt(t)/this.attachments.length);return t=>t.extendedData.fileid?(0,Z.nu)(`/core/preview?fileId=${t.extendedData.fileid}&x=${e}&y=100&a=1`):null}},watch:{cardId:{immediate:!0,handler(){this.$store.getters.cardById(this.cardId)?.attachmentCount>0&&this.fetchAttachments(this.cardId)}}},methods:{...(0,i.nv)(["fetchAttachments"])}},oe=se;var de=r(94388),ce={};ce.styleTagTransform=I(),ce.setAttributes=y(),ce.insert=x().bind(null,"head"),ce.domAPI=f(),ce.insertStyleElement=_();g()(de.Z,ce);de.Z&&de.Z.locals&&de.Z.locals;var le=(0,T.Z)(oe,(function(){var t=this,e=t._self._c;return t.cardId&&t.attachments.length>0?e("div",{staticClass:"card-cover"},t._l(t.attachments,(function(a,r){return e("div",{key:a.id,class:["image-wrapper",{"rounded-left":0===r},{"rounded-right":r===t.attachments.length-1}],style:{backgroundImage:`url(${t.attachmentPreview(a)})`}})})),0):t._e()}),[],!1,null,"868099ce",null);const Ae=le.exports,pe={name:"CardItem",components:{CardBadges:Jt,AttachmentDragAndDrop:te.Z,CardMenu:ie,CardCover:Ae,DueDate:Ht},directives:{ClickOutside:wt()},mixins:[Xt.Z,d.Z],props:{id:{type:Number,default:null},item:{type:Object,default:null},standalone:{type:Boolean,default:!1},dragging:{type:Boolean,default:!1}},computed:{...(0,i.rn)({compactMode:t=>t.compactMode,showArchived:t=>t.showArchived,currentBoard:t=>t.currentBoard,showCardCover:t=>t.showCardCover}),...(0,i.Se)(["isArchived"]),board(){return this.$store.getters.boardById(this?.stack?.boardId)},stack(){return this.$store.getters.stackById(this?.card?.stackId)},canEdit(){if(this.currentBoard)return!this.currentBoard.archived&&this.$store.getters.canEdit;const t=this.$store.getters.boards.find((t=>t.id===this.card.boardId));return!!t&&(!t.archived&&t.permissions.PERMISSION_EDIT)},inlineEditingBlocked(){return this.isArchived||this.showArchived||!this.canEdit||this.standalone},card(){return this.item?this.item:this.$store.getters.cardById(this.id)},currentCard(){return this.card&&this.$route&&this.$route.params.cardId===this.card.id},labelsSorted(){return[...this.card.labels].sort(((t,e)=>t.title<e.title?-1:1))},hasLabels(){return this.card.labels.length>0},hasBadges(){return this.card.done||this.card.duedate||this.idBadge||this.card.commentsCount>0||this.card.description||this.card.attachmentCount>0||this.card.assignedUsers.length>0},idBadge(){return this.$store.getters.config("cardIdBadge")},showMenuAtTitle(){return this.compactMode||!this.compactMode&&!this.hasBadges&&!this.hasLabels},showMenuAtLabels(){return!this.compactMode&&(!this.hasBadges&&this.hasLabels)},showMenuAtBadges(){return!this.compactMode&&this.hasBadges}},watch:{currentCard(t){t&&this.$nextTick((()=>this.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})))},"card.title"(t){document.activeElement!==this.$refs.titleContentEditable&&this.$refs.titleContentEditable.textContent!==t&&(this.$refs.titleContentEditable.textContent=t)}},methods:{focus(t){(t=this.$refs[`card${t}`]).focus()},openCard(){if(this.dragging)return;const t=this.card&&this.card.boardId?this.card.boardId:this.$route?.params.id??this.currentBoard.id;this.$router?this.$router.push({name:"card",params:{id:t,cardId:this.card.id}}).catch((()=>{})):this.$root.$emit("open-card",this.card.id)},onTitleBlur(t){t.target.innerText!==this.card.title&&this.$store.dispatch("updateCardTitle",{...this.card,title:t.target.innerText}),this.$store.dispatch("toggleShortcutLock",!1)},onTitleFocus(){this.$store.dispatch("toggleShortcutLock",!0)},cancelEdit(){this.$refs.titleContentEditable.textContent=this.card.title,this.$store.dispatch("toggleShortcutLock",!1)},handleCardKeyboardShortcut(t){if(!OCP.Accessibility.disableKeyboardShortcuts()&&!(!this.canEdit||this.$store.state.shortcutLock||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))switch(t.code){case"KeyE":this.$refs.titleContentEditable?.focus();break;case"KeyA":this.$store.dispatch("archiveUnarchiveCard",{...this.card,archived:!this.card.archived});break;case"KeyO":this.$store.dispatch("changeCardDoneStatus",{...this.card,done:!this.card.done});break;case"KeyM":this.$el.querySelector("button.action-item__menutoggle")?.click();break;case"Enter":case"Space":this.openCard().then((()=>document.getElementById("app-sidebar-vue")?.focus()));break;case"KeyS":this.toggleSelfAsignment()}},applyLabelFilter(t){this.dragging||this.$nextTick((()=>this.$store.dispatch("toggleFilter",{tags:[t.id]})))},toggleSelfAsignment(){const t=this.card.assignedUsers.find((t=>0===t.type&&t.participant.uid===(0,Ct.ts)()?.uid));this.$store.dispatch(t?"removeUserFromCard":"assignCardToUser",{card:this.card,assignee:{userId:(0,Ct.ts)()?.uid,type:0}})}}},me=pe;var ue=r(61620),Ce={};Ce.styleTagTransform=I(),Ce.setAttributes=y(),Ce.insert=x().bind(null,"head"),Ce.domAPI=f(),Ce.insertStyleElement=_();g()(ue.Z,Ce);ue.Z&&ue.Z.locals&&ue.Z.locals;const he=(0,T.Z)(me,(function(){var t=this,e=t._self._c;return t.card?e("AttachmentDragAndDrop",{staticClass:"drop-upload--card",attrs:{"card-id":t.card.id}},[e("div",{ref:`card${t.card.id}`,staticClass:"card",class:{compact:t.compactMode,"current-card":t.currentCard,"has-labels":t.card.labels&&t.card.labels.length>0,card__editable:t.canEdit,card__archived:t.card.archived},attrs:{tag:"div",tabindex:0},on:{click:t.openCard,keyup:function(e){return e.target!==e.currentTarget?null:t.handleCardKeyboardShortcut.apply(null,arguments)},mouseenter:function(e){return t.focus(t.card.id)}}},[t.standalone?e("div",{staticClass:"card-related"},[e("div",{staticClass:"board-bullet",style:{backgroundColor:"#"+t.board.color},attrs:{dir:"auto"}}),t._v("\n\t\t\t"+t._s(t.board.title)+"  "+t._s(t.stack.title)+"\n\t\t")]):t._e(),t._v(" "),t.showCardCover?e("CardCover",{attrs:{"card-id":t.card.id}}):t._e(),t._v(" "),e("div",{staticClass:"card-upper"},[t.inlineEditingBlocked?e("h3",{attrs:{dir:"auto"}},[t._v("\n\t\t\t\t"+t._s(t.card.title)+"\n\t\t\t")]):e("h3",{staticClass:"editable",attrs:{dir:"auto","aria-label":t.t("deck","Edit card title")}},[e("span",{ref:"titleContentEditable",attrs:{tabindex:"0",contenteditable:"true",role:"textbox"},on:{focus:t.onTitleFocus,blur:t.onTitleBlur,click:function(t){t.stopPropagation()},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEdit.apply(null,arguments)},function(t){t.stopPropagation()}]}},[t._v(t._s(t.card.title))])]),t._v(" "),t.compactMode?e("DueDate",{attrs:{card:t.card}}):t._e(),t._v(" "),t.showMenuAtTitle?e("CardMenu",{staticClass:"right card-menu",attrs:{card:t.card}}):t._e()],1),t._v(" "),t.hasLabels?e("div",{staticClass:"card-labels"},[t.card.labels&&t.card.labels.length?e("transition-group",{staticClass:"labels",attrs:{name:"zoom",tag:"ul"},on:{click:function(e){return e.stopPropagation(),t.openCard.apply(null,arguments)}}},t._l(t.labelsSorted,(function(a){return e("li",{key:a?.id??a?.title,style:t.labelStyle(a)},[e("span",{on:{click:function(e){return e.stopPropagation(),t.applyLabelFilter(a)}}},[t._v(t._s(a.title))])])})),0):t._e(),t._v(" "),t.showMenuAtLabels?e("CardMenu",{staticClass:"right",attrs:{card:t.card}}):t._e()],1):t._e(),t._v(" "),t.hasBadges?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.compactMode,expression:"!compactMode"}],staticClass:"card-controls compact-item",on:{click:t.openCard}},[e("CardBadges",{attrs:{card:t.card}},[t.showMenuAtBadges?e("CardMenu",{staticClass:"right",attrs:{card:t.card}}):t._e()],1)],1):t._e()],1)]):t._e()}),[],!1,null,"9aacc27e",null).exports,ge={name:"Stack",components:{NcActions:o.O3,NcActionButton:o.Js,CardItem:he,Container:n.Container,Draggable:n.Draggable,NcModal:o.Jc,ArchiveIcon:c.Z},directives:{ClickOutside:wt()},props:{dragging:{type:Boolean,default:!1},stack:{type:Object,default:void 0}},data:()=>({editing:!1,draggingCard:!1,copiedStack:"",newCardTitle:"",showAddCard:!1,stateCardCreating:!1,animate:!1,modalArchivAllCardsShow:!1,stackTransfer:{total:0,current:null}}),computed:{...(0,i.Se)(["canManage","canEdit","isArchived"]),...(0,i.rn)({showArchived:t=>t.showArchived}),cardsByStack(){return this.$store.getters.cardsByStack(this.stack.id).filter((t=>this.showArchived?t.archived:!t.archived))},dragHandleSelector(){return this.canEdit&&!this.showArchived?null:".no-drag"},cardDetailsInModal:{get(){return this.$store.getters.config("cardDetailsInModal")},set(t){this.$store.dispatch("setConfig",{cardDetailsInModal:t})}}},methods:{stopCardCreation(t){return t.stopPropagation(),this.$refs.newCardInput&&this.$refs.newCardInput.parentElement===t.target.parentElement||(this.showAddCard=!1),!1},async onDropCard(t,e){const{addedIndex:a,removedIndex:r,payload:n}=e,i=Object.assign({},n);this.stack.id===t&&(null!==a&&null===r&&(i.stackId=t,i.order=a,console.debug("move card to stack",i.stackId,i.order),await this.$store.dispatch("reorderCard",i)),null!==a&&null!==r&&(i.order=a,console.debug("move card in stack",i.stackId,i.order),await this.$store.dispatch("reorderCard",i)))},payloadForCard(t){return t=>this.cardsByStack[t]},deleteStack(e){this.$store.dispatch("deleteStack",e),(0,_t.yl)(t("deck","List deleted"),(()=>this.$store.dispatch("stackUndoDelete",e)))},setArchivedToAllCardsFromStack(t,e){this.stackTransfer.total=this.cardsByStack.length,this.cardsByStack.forEach(((t,a)=>{this.stackTransfer.current=a,this.$store.dispatch("archiveUnarchiveCard",{...t,archived:e})})),this.modalArchivAllCardsShow=!1},startEditing(t){this.dragging||(this.copiedStack=Object.assign({},t),this.editing=!0)},finishedEdit(t){this.copiedStack.title!==t.title&&this.$store.dispatch("updateStack",this.copiedStack),this.editing=!1},cancelEdit(){this.editing=!1},async clickAddCard(){this.stateCardCreating=!0;try{this.animate=!0;const t=await this.$store.dispatch("addCard",{title:this.newCardTitle,stackId:this.stack.id,boardId:this.stack.boardId});this.newCardTitle="",this.showAddCard=!0,this.$nextTick((()=>{this.$refs.newCardInput.focus(),this.animate=!1})),this.cardDetailsInModal||this.$router.push({name:"card",params:{cardId:t.id}})}catch(t){(0,_t.x2)("Could not create card: "+t.response.data.message)}finally{this.stateCardCreating=!1}}}},ve=ge;var fe=r(30268),be={};be.styleTagTransform=I(),be.setAttributes=y(),be.insert=x().bind(null,"head"),be.domAPI=f(),be.insertStyleElement=_();g()(fe.Z,be);fe.Z&&fe.Z.locals&&fe.Z.locals;var xe=(0,T.Z)(ve,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"stack",attrs:{"data-cy-stack":t.stack.title}},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.stopCardCreation,expression:"stopCardCreation"}],staticClass:"stack__header",class:{"stack__header--add":t.showAddCard},attrs:{"aria-label":t.stack.title}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[!t.canManage||t.isArchived?e("h3",{attrs:{tabindex:"0"}},[t._v("\n\t\t\t\t"+t._s(t.stack.title)+"\n\t\t\t")]):t.editing?t.editing?e("form",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.cancelEdit,expression:"cancelEdit"}],attrs:{"data-cy":"editStackTitleForm"},on:{submit:function(e){return e.preventDefault(),t.finishedEdit(t.stack)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEdit.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.copiedStack.title,expression:"copiedStack.title"},{name:"focus",rawName:"v-focus"}],attrs:{dir:"auto",type:"text",required:"required"},domProps:{value:t.copiedStack.title},on:{input:function(e){e.target.composing||t.$set(t.copiedStack,"title",e.target.value)}}}),t._v(" "),e("input",{staticClass:"icon-confirm",attrs:{title:"t('deck', 'Edit list title')",type:"submit",value:""}})]):t._e():e("h3",{staticClass:"stack__title",attrs:{title:"stack.title",dir:"auto",tabindex:"0","aria-label":t.stack.title},on:{click:function(e){return t.startEditing(t.stack)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.startEditing(t.stack)}}},[t._v("\n\t\t\t\t"+t._s(t.stack.title)+"\n\t\t\t")])]),t._v(" "),t.canManage&&!t.isArchived?e("NcActions",{attrs:{"force-menu":!0}},[t.showArchived?t._e():e("NcActionButton",{attrs:{icon:"icon-archive"},on:{click:function(e){t.modalArchivAllCardsShow=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{decorative:""}})]},proxy:!0}],null,!1,2570557878)},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Archive all cards"))+"\n\t\t\t")]),t._v(" "),t.showArchived?e("NcActionButton",{on:{click:function(e){t.modalArchivAllCardsShow=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{decorative:""}})]},proxy:!0}],null,!1,2570557878)},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Unarchive all cards"))+"\n\t\t\t")]):t._e(),t._v(" "),e("NcActionButton",{attrs:{icon:"icon-delete"},on:{click:function(e){return t.deleteStack(t.stack)}}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Delete list"))+"\n\t\t\t")])],1):t._e(),t._v(" "),!t.canEdit||t.showArchived||t.isArchived?t._e():e("NcActions",[e("NcActionButton",{attrs:{icon:"icon-add","data-cy":"action:add-card"},on:{click:function(e){e.stopPropagation(),t.showAddCard=!0}}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Add card"))+"\n\t\t\t")])],1)],1),t._v(" "),t.modalArchivAllCardsShow?e("NcModal",{on:{close:function(e){t.modalArchivAllCardsShow=!1}}},[e("div",{staticClass:"modal__content"},[t.showArchived?e("h3",[t._v("\n\t\t\t\t"+t._s(t.t("deck","Unarchive all cards in this list"))+"\n\t\t\t")]):e("h3",[t._v("\n\t\t\t\t"+t._s(t.t("deck","Archive all cards in this list"))+"\n\t\t\t")]),t._v(" "),e("progress",{attrs:{max:t.stackTransfer.total},domProps:{value:t.stackTransfer.current}}),t._v(" "),t.showArchived?e("button",{staticClass:"primary",on:{click:function(e){return t.setArchivedToAllCardsFromStack(t.stack,!t.showArchived)}}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Unarchive all cards"))+"\n\t\t\t")]):e("button",{staticClass:"primary",on:{click:function(e){return t.setArchivedToAllCardsFromStack(t.stack,!t.showArchived)}}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Archive all cards"))+"\n\t\t\t")]),t._v(" "),e("button",{on:{click:function(e){t.modalArchivAllCardsShow=!1}}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Cancel"))+"\n\t\t\t")])])]):t._e(),t._v(" "),e("transition",{attrs:{name:"slide-top",appear:""}},[t.showAddCard?e("div",{staticClass:"stack__card-add"},[e("form",{class:{"icon-loading-small":t.stateCardCreating},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.clickAddCard()}}},[e("label",{staticClass:"hidden-visually",attrs:{for:"new-stack-input-main"}},[t._v(t._s(t.t("deck","Add a new card")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newCardTitle,expression:"newCardTitle"},{name:"focus",rawName:"v-focus"}],ref:"newCardInput",staticClass:"no-close",attrs:{id:"new-stack-input-main",type:"text",disabled:t.stateCardCreating,placeholder:t.t("deck","Card name"),required:"",pattern:".*\\S+.*"},domProps:{value:t.newCardTitle},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.stopCardCreation.apply(null,arguments)},input:function(e){e.target.composing||(t.newCardTitle=e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"show",rawName:"v-show",value:!t.stateCardCreating,expression:"!stateCardCreating"}],staticClass:"icon-confirm",attrs:{type:"submit",value:""}})])]):t._e()]),t._v(" "),e("Container",{attrs:{"get-child-payload":t.payloadForCard(t.stack.id),"group-name":"stack","data-click-closes-sidebar":"true","non-drag-area-selector":".dragDisabled","drag-handle-selector":t.dragHandleSelector,"data-dragscroll-enabled":""},on:{"should-accept-drop":t.canEdit,"drag-start":function(e){t.draggingCard=!0},"drag-end":function(e){t.draggingCard=!1},drop:e=>t.onDropCard(t.stack.id,e)}},t._l(t.cardsByStack,(function(a){return e("Draggable",{key:a.id},[e("transition",{attrs:{appear:t.animate&&!a.animated&&(a.animated=!0),"appear-class":"zoom-appear-class","appear-active-class":"zoom-appear-active-class"}},[e("CardItem",{attrs:{id:a.id,dragging:t.draggingCard}})],1)],1)})),1)],1)}),[],!1,null,"3a502c33",null);const ke=xe.exports;var ye=r(30306),we=r.n(ye);const _e={name:"Placeholder",data:()=>({light:null,dark:null,standalone:!0}),mounted(){const t=getComputedStyle(document.documentElement);this.dark=t.getPropertyValue("--color-placeholder-dark"),this.light=t.getPropertyValue("--color-placeholder-light")},methods:{randWidth:()=>Math.floor(20*Math.random())+40}};var Be=r(97649),Ie={};Ie.styleTagTransform=I(),Ie.setAttributes=y(),Ie.insert=x().bind(null,"head"),Ie.domAPI=f(),Ie.insertStyleElement=_();g()(Be.Z,Ie);Be.Z&&Be.Z.locals&&Be.Z.locals;const Se=(0,T.Z)(_e,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card--placeholder"},[e("svg",{staticClass:"card-placeholder__gradient"},[e("defs",[e("linearGradient",{attrs:{id:"card-placeholder__gradient"}},[e("stop",{attrs:{offset:"0%","stop-color":t.light}},[e("animate",{attrs:{attributeName:"stop-color",values:`${t.light}; ${t.light}; ${t.dark}; ${t.dark}; ${t.light}`,dur:"2s",repeatCount:"indefinite"}})]),t._v(" "),e("stop",{attrs:{offset:"100%","stop-color":t.dark}},[e("animate",{attrs:{attributeName:"stop-color",values:`${t.dark}; ${t.light}; ${t.light}; ${t.dark}; ${t.dark}`,dur:"2s",repeatCount:"indefinite"}})])],1)],1)]),t._v(" "),e("svg",{staticClass:"card-placeholder__placeholder",class:{standalone:t.standalone},attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"url(#card-placeholder__gradient)"}},[e("rect",{staticClass:"card-placeholder__placeholder-line-header",style:{width:`calc(${t.randWidth()}%)`}}),t._v(" "),e("rect",{staticClass:"card-placeholder__placeholder-line-one"}),t._v(" "),e("rect",{staticClass:"card-placeholder__placeholder-line-two",style:{width:`calc(${t.randWidth()}%)`}})])])}),[],!1,null,"43bfbf02",null).exports;function De(t){let{query:e,cursor:a}=t;const r=j.ZP.CancelToken.source();return{request:async()=>j.ZP.get((0,Z.Ii)("apps/deck/api/v1.0/search"),{cancelToken:r.token,params:{term:e,limit:20,cursor:a}}),cancel:r.cancel}}const Te={name:"GlobalSearchResults",components:{CardItem:he,InfiniteLoading:we(),NcRichText:o.rE,Placeholder:Se,NcActions:o.O3,NcActionButton:o.Js},data:()=>({results:[],cancel:null,loading:!1,cursor:null}),computed:{...(0,i.rn)({searchQuery:t=>t.searchQuery}),filteredResults(){const t=(t,e)=>t.archived-e.archived||e.lastModified-t.lastModified;return this.$route.params.id?this.results.filter((t=>t.relatedBoard.id.toString()!==this.$route.params.id.toString())).sort(t):[...this.results].sort(t)},queryStringArgs(){return{searchQuery:this.searchQuery}}},watch:{async searchQuery(){this.cursor=null,this.loading=!0;try{await this.search(),this.loading=!1}catch(t){j.ZP.isCancel(t)||(console.error("Search request failed",t),this.loading=!1)}}},methods:{async infiniteHandler(t){this.loading=!0;try{(await this.search()).length?t.loaded():t.complete(),this.loading=!1}catch(e){j.ZP.isCancel(e)||(console.error("Search request failed",e),t.complete(),this.loading=!1)}},async search(){this.cancel&&this.cancel();const{request:t,cancel:e}=await De({query:this.searchQuery,cursor:this.cursor});this.cancel=e;const{data:a}=await t();return null===this.cursor&&(this.results=[]),a.ocs.data.length>0&&(a.ocs.data.forEach((t=>{this.$store.dispatch("addCardData",t)})),this.results=[...this.results,...a.ocs.data],this.cursor=a.ocs.data[a.ocs.data.length-1].lastModified),a.ocs.data}}},Ee=Te;var $e=r(97254),je={};je.styleTagTransform=I(),je.setAttributes=y(),je.insert=x().bind(null,"head"),je.domAPI=f(),je.insertStyleElement=_();g()($e.Z,je);$e.Z&&$e.Z.locals&&$e.Z.locals;var Ze=(0,T.Z)(Ee,(function(){var t=this,e=t._self._c;return""!==t.searchQuery?e("div",{staticClass:"global-search"},[e("h2",[e("NcRichText",{attrs:{text:t.t("deck","Search for {searchQuery} in all boards"),arguments:t.queryStringArgs}}),t._v(" "),t.loading?e("div",{staticClass:"icon-loading-small"}):t._e()],1),t._v(" "),e("NcActions",[e("NcActionButton",{attrs:{icon:"icon-close"},on:{click:function(e){return t.$store.commit("setSearchQuery","")}}})],1),t._v(" "),e("div",{staticClass:"search-wrapper"},[t.loading||t.filteredResults.length>0?e("div",{staticClass:"search-results"},[t._l(t.filteredResults,(function(t){return e("CardItem",{key:t.id,attrs:{id:t.id,standalone:!0}})})),t._v(" "),t.loading?e("Placeholder"):t._e(),t._v(" "),e("InfiniteLoading",{attrs:{identifier:t.searchQuery},on:{infinite:t.infiniteHandler}},[e("div",{attrs:{slot:"spinner"},slot:"spinner"}),t._v(" "),e("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),e("div",{attrs:{slot:"no-results"},slot:"no-results"},[t._v("\n\t\t\t\t\t"+t._s(t.t("deck","No results found"))+"\n\t\t\t\t")])])],2):e("div",[e("p",[t._v(t._s(t.t("deck","No results found")))])])])],1):t._e()}),[],!1,null,"7d9e2f4e",null);const Ne=Ze.exports;var Le=r(75675),Fe=r(65878),Me=r(20951),Pe=r(31352),ze=r(62511),Ue=r(47312),Oe=r(55988),Ge=r(67247),Re=r(96486);const We={name:"CardSidebarTabDetails",components:{DueDateSelector:Ge.Z,AssignmentSelector:Oe.Z,TagSelector:Ue.Z,Description:ze.Z,CollectionList:Me.G},mixins:[Xt.Z],props:{card:{type:Object,default:null}},data:()=>({addedLabelToCard:null,copiedCard:null,locale:(0,Pe.Kd)(),projectsEnabled:(0,L.j)("core","projects_enabled",!1)}),computed:{...(0,i.rn)({currentBoard:t=>t.currentBoard}),...(0,i.Se)(["canEdit","assignables"]),cardDetailsInModal:{get(){return this.$store.getters.config("cardDetailsInModal")},set(t){this.$store.dispatch("setConfig",{cardDetailsInModal:t})}},labelsSorted(){return[...this.currentBoard.labels].sort(((t,e)=>t.title<e.title?-1:1))}},watch:{card(){this.initialize()}},mounted(){this.initialize()},methods:{async descriptionChanged(t){t!==this.copiedCard.description&&(this.copiedCard.description=t)},async initialize(){this.card&&(this.copiedCard=JSON.parse(JSON.stringify(this.card)),localStorage.setItem("deck.selectedBoardId",this.currentBoard.id),localStorage.setItem("deck.selectedStackId",this.card.stackId))},assignUserToCard(t){this.$store.dispatch("assignCardToUser",{card:this.copiedCard,assignee:{userId:t.uid,type:t.type}})},removeUserFromCard(t){this.$store.dispatch("removeUserFromCard",{card:this.copiedCard,assignee:{userId:t.uid,type:t.type}})},updateCardDue(t){this.$store.dispatch("updateCardDue",{...this.copiedCard,duedate:t?new Date(t).toISOString():null})},debouncedUpdateCardDue:(0,Re.debounce)((function(t){this.updateCardDue(t)}),500),addLabelToCard(t){this.copiedCard.labels.push(t);const e={card:this.copiedCard,labelId:t.id};this.$store.dispatch("addLabel",e)},async addLabelToBoardAndCard(t){await this.$store.dispatch("addLabelToCurrentBoardAndCard",{card:this.copiedCard,newLabel:{title:t,color:this.randomColor()}})},removeLabelFromCard(t){const e=this.copiedCard.labels.findIndex((e=>e.id===t.id));-1!==e&&this.copiedCard.labels.splice(e,1);const a={card:this.copiedCard,labelId:t.id};this.$store.dispatch("removeLabel",a)},stringify(t){return(0,Lt.Z)(t).locale(this.locale).format("LLL")},parse:t=>(0,Lt.Z)(t).toDate()}};var Ye=r(37810),qe={};qe.styleTagTransform=I(),qe.setAttributes=y(),qe.insert=x().bind(null,"head"),qe.domAPI=f(),qe.insertStyleElement=_();g()(Ye.Z,qe);Ye.Z&&Ye.Z.locals&&Ye.Z.locals;const He=(0,T.Z)(We,(function(){var t=this,e=t._self._c;return t.copiedCard?e("div",[e("TagSelector",{attrs:{card:t.card,labels:t.currentBoard.labels,disabled:!t.canEdit},on:{select:t.addLabelToCard,remove:t.removeLabelFromCard,newtag:t.addLabelToBoardAndCard}}),t._v(" "),e("AssignmentSelector",{attrs:{card:t.card,assignables:t.assignables,"can-edit":t.canEdit},on:{select:t.assignUserToCard,remove:t.removeUserFromCard}}),t._v(" "),e("DueDateSelector",{attrs:{card:t.card,"can-edit":t.canEdit},on:{change:t.updateCardDue,input:t.debouncedUpdateCardDue}}),t._v(" "),t.projectsEnabled?e("div",{staticClass:"section-wrapper"},[t.card.id?e("CollectionList",{attrs:{id:`${t.card.id}`,name:t.card.title,type:"deck-card"}}):t._e()],1):t._e(),t._v(" "),e("Description",{key:t.card.id,attrs:{card:t.card,"can-edit":t.canEdit,"show-attachments":""},on:{change:t.descriptionChanged}})],1):t._e()}),[],!1,null,"d1f1d148",null).exports;const Qe={name:"CardSidebarTabAttachments",components:{AttachmentList:r(10811).Z},props:{card:{type:Object,default:null}},methods:{deleteAttachment(t){this.$store.dispatch("deleteAttachment",t)},restoreAttachment(t){this.$store.dispatch("restoreAttachment",t)}}},Ke=Qe;const Ve=(0,T.Z)(Ke,(function(){var t=this;return(0,t._self._c)("AttachmentList",{attrs:{"card-id":t.card.id,removable:!0},on:{"delete-attachment":t.deleteAttachment,"restore-attachment":t.restoreAttachment}})}),[],!1,null,null,null).exports;var Je=r(8434);const Xe={name:"CommentForm",components:{At:r.n(Je)(),NcAvatar:o.Xn,NcUserBubble:o.uq},props:{value:{type:String,default:""}},data(){return{commentText:this.value,error:null}},computed:{...(0,i.rn)({currentBoard:t=>t.currentBoard}),members(){return this.currentBoard.users}},watch:{value(t){this.commentText=t}},methods:{validate(e){this.error=null;const a=this.contentEditableToParsed();return e&&0===a.length&&(this.error=t("deck","The comment cannot be empty.")),a.length>1e3&&(this.error=t("deck","The comment cannot be longer than 1000 characters.")),null===this.error?a:null},submit(){const t=this.validate(!0);if(t){const e=document.createElement("div");e.innerHTML=t;const a=e.textContent||e.innerText||"";this.$emit("input",a),this.$emit("submit",a)}},contentEditableToParsed(){if(!this.$refs.contentEditable)return;const t=this.$refs.contentEditable.cloneNode(!0);return t.querySelectorAll("span[data-at-embedded]").forEach((t=>{const e=t.firstElementChild.attributes["data-mention-id"].value;-1!==e.indexOf(" ")?t.replaceWith(' @"'+e+'" '):t.replaceWith(" @"+e+" ")})),(t=>{t=(t=t.replace(/<br>/g,"\n")).replace(/&nbsp;/g," ");const e=document.createElement("textarea");return e.innerHTML=t,(t=e.value).trim()})(t.innerHTML)},handleKeydown(t){this.atwho||t.shiftKey||(t.preventDefault(),this.submit())},onPaste(t){t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}}};var ta=r(22696),ea={};ea.styleTagTransform=I(),ea.setAttributes=y(),ea.insert=x().bind(null,"head"),ea.domAPI=f(),ea.insertStyleElement=_();g()(ta.Z,ea);ta.Z&&ta.Z.locals&&ta.Z.locals;const aa=(0,T.Z)(Xe,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-form"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("At",{ref:"at",attrs:{members:t.members,"name-key":"displayname","tab-select":!0},scopedSlots:t._u([{key:"item",fn:function(a){return[e("NcAvatar",{staticClass:"atwho-li--avatar",attrs:{user:a.item.uid,size:24}}),t._v(" "),e("span",{staticClass:"atwho-li--name",domProps:{textContent:t._s(a.item.displayname)}})]}},{key:"embeddedItem",fn:function(a){return[e("span",[a.current.uid?e("NcUserBubble",{attrs:{"data-mention-id":a.current.uid,user:a.current.uid,"display-name":a.current.displayname}}):t._e()],1)]}}]),model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}},[t._v(" "),t._v(" "),e("div",{ref:"contentEditable",staticClass:"comment-form__contenteditable",attrs:{dir:"auto",contenteditable:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleKeydown.apply(null,arguments)},paste:t.onPaste,blur:function(e){t.error=null},input:function(e){return t.validate()}}})]),t._v(" "),e("input",{staticClass:"icon-confirm",attrs:{title:t.t("deck","Save"),type:"submit",value:"",disabled:null===t.commentText.length||t.error}}),t._v(" "),t._t("default")],2),t._v(" "),t.error?e("p",[t._v("\n\t\t"+t._s(t.error)+"\n\t")]):t._e()])}),[],!1,null,"11857953",null).exports;var ra=r(99560),na=r.n(ra),ia=r(91492),sa=r(58964);const oa={name:"AtMention",functional:!0,render(t,e){const{user:a,displayName:r}=e.props;return t("span",{attrs:{"data-at-embedded":!0,contenteditable:!1}},[t(o.uq,{props:{user:a,displayName:r},attrs:{"data-mention-id":a}})])}},da={name:"CommentItem",components:{NcAvatar:o.Xn,NcUserBubble:o.uq,NcActions:o.O3,NcActionButton:o.Js,CommentForm:aa,NcRichText:o.rE,ReplyIcon:sa.Z},mixins:[ia.Z],props:{comment:{type:Object,default:void 0},reply:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},data:()=>({edit:!1,commentMsg:""}),computed:{canEdit(){return this.comment.actorId===(0,Ct.ts)().uid},richText(){return t=>{let e=this.parsedMessage(t.message);return t.mentions.forEach(((t,a)=>{const r=na()(t.mentionId);e=e.split("@"+t.mentionId).join(`{user-${r}}`),e=e.split('@"'+t.mentionId+'"').join(`{user-${r}}`)})),e}},richArgs:()=>t=>[...t.mentions].reduce(((t,e,a)=>(t["user-"+na()(e.mentionId)]={component:oa,props:{user:e.mentionId,displayName:e.mentionDisplayName}},t)),{}),parsedMessage:()=>t=>{const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},formattedTimestamp(){return t("deck","Created:")+" "+Y()(this.comment.creationDateTime).format("LLLL")}},methods:{replyTo(){this.$store.dispatch("setReplyTo",this.comment)},showUpdateForm(){this.edit=!0,this.$nextTick((()=>{this.commentMsg=this.$refs.richTextElement.children[0].innerHTML}))},hideUpdateForm(){this.commentMsg="",this.edit=!1},async updateComment(){const t={comment:this.commentMsg,cardId:this.comment.objectId,id:this.comment.id};await this.$store.dispatch("updateComment",t),this.hideUpdateForm()},deleteComment(){const t={id:this.comment.id,cardId:this.comment.objectId};this.$store.dispatch("deleteComment",t)}}},ca=da;var la=r(33279),Aa={};Aa.styleTagTransform=I(),Aa.setAttributes=y(),Aa.insert=x().bind(null,"head"),Aa.domAPI=f(),Aa.insertStyleElement=_();g()(la.Z,Aa);la.Z&&la.Z.locals&&la.Z.locals;const pa=(0,T.Z)(ca,(function(){var t=this,e=t._self._c;return t.reply?e("div",{staticClass:"reply",class:{"reply--preview":t.preview}},[e("div",{staticClass:"reply--wrapper"},[e("div",{staticClass:"reply--header"},[e("div",{staticClass:"reply--hint"},[t._v("\n\t\t\t\t"+t._s(t.t("deck","In reply to"))+"\n\t\t\t\t"),e("NcUserBubble",{attrs:{user:t.comment.actorId,"display-name":t.comment.actorDisplayName}})],1),t._v(" "),t.preview?e("NcActions",{staticClass:"reply--cancel"},[e("NcActionButton",{attrs:{icon:"icon-close"},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("deck","Cancel reply"))+"\n\t\t\t\t")])],1):t._e()],1),t._v(" "),e("NcRichText",{staticClass:"comment--content",attrs:{dir:"auto",text:t.richText(t.comment),arguments:t.richArgs(t.comment),autolink:!0}})],1)]):e("li",{staticClass:"comment"},[e("div",{staticClass:"comment--header"},[e("NcAvatar",{attrs:{user:t.comment.actorId}}),t._v(" "),e("span",{staticClass:"username"},[t._v("\n\t\t\t"+t._s(t.comment.actorDisplayName)+"\n\t\t")]),t._v(" "),e("NcActions",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],attrs:{"force-menu":!0}},[e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return t.replyTo()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ReplyIcon",{attrs:{decorative:""}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Reply"))+"\n\t\t\t")]),t._v(" "),t.canEdit?e("NcActionButton",{attrs:{icon:"icon-rename","close-after-click":!0},on:{click:function(e){return t.showUpdateForm()}}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Update"))+"\n\t\t\t")]):t._e(),t._v(" "),t.canEdit?e("NcActionButton",{attrs:{icon:"icon-delete","close-after-click":!0},on:{click:function(e){return t.deleteComment()}}},[t._v("\n\t\t\t\t"+t._s(t.t("deck","Delete"))+"\n\t\t\t")]):t._e()],1),t._v(" "),t.edit?e("NcActions",[e("NcActionButton",{attrs:{icon:"icon-close"},on:{click:t.hideUpdateForm}})],1):t._e(),t._v(" "),e("div",{staticClass:"spacer"}),t._v(" "),e("div",{staticClass:"timestamp",attrs:{"aria-label":t.formattedTimestamp,title:t.formattedTimestamp}},[t._v("\n\t\t\t"+t._s(t.relativeDate(t.comment.creationDateTime))+"\n\t\t")])],1),t._v(" "),t.comment.replyTo?e("CommentItem",{attrs:{reply:!0,comment:t.comment.replyTo}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],ref:"richTextElement"},[e("NcRichText",{staticClass:"comment--content",attrs:{dir:"auto",text:t.richText(t.comment),arguments:t.richArgs(t.comment),autolink:!0}})],1),t._v(" "),t.edit?e("CommentForm",{attrs:{dir:"auto"},on:{submit:t.updateComment},model:{value:t.commentMsg,callback:function(e){t.commentMsg=e},expression:"commentMsg"}}):t._e()],1)}),[],!1,null,"31ec9839",null).exports,ma={name:"CardSidebarTabComments",components:{NcAvatar:o.Xn,CommentItem:pa,CommentForm:aa,InfiniteLoading:we()},props:{card:{type:Object,default:void 0},tabQuery:{type:String,required:!1,default:null}},data:()=>({newComment:"",isLoading:!1,currentUser:(0,Ct.ts)(),error:null}),computed:{...(0,i.rn)({currentBoard:t=>t.currentBoard,replyTo:t=>t.comment.replyTo}),...(0,i.Se)(["getCommentsForCard","hasMoreComments"]),members(){return this.currentBoard.users}},watch:{card:{immediate:!0,handler(){this.loadComments()}}},methods:{async infiniteHandler(e){this.error=null;try{await this.loadMore(),this.hasMoreComments(this.card.id)?e.loaded():e.complete()}catch(a){console.error("Failed to fetch more comments during infinite loading",a),this.error=t("deck","Failed to load comments"),e.complete()}},async loadComments(){this.$store.dispatch("setReplyTo",null),this.error=null,this.isLoading=!0;try{await this.$store.dispatch("fetchComments",{cardId:this.card.id}),this.isLoading=!1,this.card.commentsUnread>0&&await this.$store.dispatch("markCommentsAsRead",this.card.id)}catch(e){this.isLoading=!1,console.error("Failed to fetch more comments during infinite loading",e),this.error=t("deck","Failed to load comments")}},async createComment(t){const e={cardId:this.card.id,comment:t};await this.$store.dispatch("createComment",e),this.$store.dispatch("setReplyTo",null),this.newComment="",await this.loadComments()},async loadMore(){this.isLoading=!0,await this.$store.dispatch("fetchMore",{cardId:this.card.id}),this.isLoading=!1},cancelReply(){this.$store.dispatch("setReplyTo",null)}}};var ua=r(46360),Ca={};Ca.styleTagTransform=I(),Ca.setAttributes=y(),Ca.insert=x().bind(null,"head"),Ca.domAPI=f(),Ca.insertStyleElement=_();g()(ua.Z,Ca);ua.Z&&ua.Z.locals&&ua.Z.locals;var ha=(0,T.Z)(ma,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"comment--header"},[e("NcAvatar",{attrs:{user:t.currentUser.uid}}),t._v(" "),e("span",{staticClass:"username"},[t._v("\n\t\t\t"+t._s(t.currentUser.displayName)+"\n\t\t")])],1),t._v(" "),t.replyTo?e("CommentItem",{attrs:{comment:t.replyTo,reply:!0,preview:!0},on:{cancel:t.cancelReply}}):t._e(),t._v(" "),e("CommentForm",{on:{submit:t.createComment},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}}),t._v(" "),t.getCommentsForCard(t.card.id).length>0?e("ul",{attrs:{id:"commentsFeed"}},[t._l(t.getCommentsForCard(t.card.id),(function(a){return e("CommentItem",{key:a.id,attrs:{comment:a},on:{doReload:t.loadComments}})})),t._v(" "),e("InfiniteLoading",{attrs:{identifier:t.card.id},on:{infinite:t.infiniteHandler}},[e("div",{staticClass:"icon-loading",attrs:{slot:"spinner"},slot:"spinner"}),t._v(" "),e("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),e("div",{attrs:{slot:"no-results"},slot:"no-results"})])],2):t.isLoading?e("div",{staticClass:"icon icon-loading"}):e("div",{staticClass:"emptycontent"},[e("div",{class:{"icon-comment":!t.error,"icon-error":t.error}}),t._v(" "),e("p",[t._v(t._s(t.error||t.t("deck","No comments yet. Begin the discussion!")))])])],1)}),[],!1,null,"44c03ab6",null);const ga=ha.exports;var va=r(27856),fa=r.n(va),ba=r(86515);const xa={name:"InternalLink",functional:!0,props:{href:{type:String,default:""},name:{type:String,default:""}},render:(t,e)=>t("a",{attrs:{href:e.props.href},style:{"font-weight":600}},e.props.name)},ka={name:"ActivityEntry",components:{NcRichText:o.rE},mixins:[ia.Z,ba.Z],props:{activity:{type:Object,default:null}},computed:{message(){const t=this.activity.subject_rich[0],e=JSON.parse(JSON.stringify(this.activity.subject_rich[1]));if(e.after&&"string"==typeof e.after.id&&e.after.id.startsWith("dt:")){const t=e.after.id.slice(3);e.after.name=(0,Lt.Z)(t).format("L LTS")}return Object.keys(e).forEach((function(t,a){const{type:r}=e[t];switch(r){case"highlight":e[t]={component:xa,props:{href:e[t].link,name:e[t].name}};break;case"user":e[t]={component:o.uq,props:{user:e[t].id,displayName:e[t].name}};break;default:e[t]=`{${t}}`}})),{subject:t,parameters:e}},sanitizedMessage(){return fa().sanitize(this.activity.message,{ALLOWED_TAGS:["ins","del"],ALLOWED_ATTR:["class"]})}}};var ya=r(58775),wa={};wa.styleTagTransform=I(),wa.setAttributes=y(),wa.insert=x().bind(null,"head"),wa.domAPI=f(),wa.insertStyleElement=_();g()(ya.Z,wa);ya.Z&&ya.Z.locals&&ya.Z.locals;var _a=r(95346),Ba={};Ba.styleTagTransform=I(),Ba.setAttributes=y(),Ba.insert=x().bind(null,"head"),Ba.domAPI=f(),Ba.insertStyleElement=_();g()(_a.Z,Ba);_a.Z&&_a.Z.locals&&_a.Z.locals;const Ia=(0,T.Z)(ka,(function(){var t=this,e=t._self._c;return t.activity?e("div",{staticClass:"activity"},[e("div",{staticClass:"activity--header"},[e("img",{staticClass:"activity--icon",attrs:{src:t.activity.icon}}),t._v(" "),e("NcRichText",{staticClass:"activity--subject",attrs:{text:t.message.subject,arguments:t.message.parameters}}),t._v(" "),e("div",{staticClass:"activity--timestamp",attrs:{name:t.formatReadableDate(t.activity.datetime)}},[t._v("\n\t\t\t"+t._s(t.relativeDate(t.activity.datetime))+"\n\t\t")])],1),t._v(" "),t.activity.message?e("p",{staticClass:"activity--message",domProps:{innerHTML:t._s(t.sanitizedMessage)}}):t._e()]):t._e()}),[],!1,null,"4d6286d9",null).exports,Sa={name:"ActivityList",components:{ActivityEntry:Ia,InfiniteLoading:we()},props:{filter:{type:String,default:"deck"},type:{type:String,required:!0},objectId:{type:Number,required:!0},objectType:{type:String,required:!0}},data:()=>({activities:[],isLoading:!1,since:0,endReached:!1}),methods:{async loadActivity(){const t=new URLSearchParams;t.append("format","json"),t.append("type",this.type),t.append("since",this.since),t.append("object_type",this.objectType),t.append("object_id",""+this.objectId),t.append("limit",50);const e=await j.ZP.get((0,Z.Ii)(`apps/activity/api/v2/activity/${this.filter}`)+"?"+t,{validateStatus:t=>t>=200&&t<300||304===t});if(304===e.status)return this.endReached=!0,[];let a=e.data.ocs.data;return"deck"===this.filter&&(a=a.filter((t=>"deck_board"===t.object_type&&t.object_id===this.objectId||"deck_card"===t.object_type&&t.subject_rich[1].board.id===this.objectId))),this.activities.push(...a),0===a.length?(this.endReached=!0,[]):(this.since=a[a.length-1].activity_id,a)},async infiniteHandler(t){await this.loadActivity(),this.endReached?t.complete():t.loaded()},changeObject(){this.since=0,this.activities=[],this.endReached=!1}}};var Da=r(83123),Ta={};Ta.styleTagTransform=I(),Ta.setAttributes=y(),Ta.insert=x().bind(null,"head"),Ta.domAPI=f(),Ta.insertStyleElement=_();g()(Da.Z,Ta);Da.Z&&Da.Z.locals&&Da.Z.locals;const Ea={name:"CardSidebarTabActivity",components:{ActivityList:(0,T.Z)(Sa,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"activity-list"},[t.isLoading?e("div",{staticClass:"icon icon-loading"}):t._e(),t._v(" "),t._l(t.activities,(function(t){return e("ActivityEntry",{key:t.activity_id,attrs:{activity:t}})})),t._v(" "),e("InfiniteLoading",{attrs:{identifier:t.objectId},on:{infinite:t.infiniteHandler,change:t.changeObject}},[e("div",{staticClass:"icon-loading",attrs:{slot:"spinner"},slot:"spinner"}),t._v(" "),e("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),e("div",{attrs:{slot:"no-results"},slot:"no-results"})])],2)}),[],!1,null,"d2d5aa18",null).exports},props:{card:{type:Object,default:null}},data:()=>({id:"activity"})};const $a=(0,T.Z)(Ea,(function(){var t=this,e=t._self._c;return t.$parent.isActive?e("ActivityList",{key:t.card.id,attrs:{filter:"filter","object-id":t.card.id,"object-type":"deck_card",type:"deck"}}):t._e()}),[],!1,null,null,null).exports;var ja=r(42239),Za=r(55299);const Na=(0,Fe.F)(),La={name:"CardSidebar",components:{NcAppSidebar:o.Xu,NcAppSidebarTab:o.j1,NcActionButton:o.Js,CardSidebarTabAttachments:Ve,CardSidebarTabComments:ga,CardSidebarTabActivity:$a,CardSidebarTabDetails:He,ActivityIcon:Za.Z,AttachmentIcon:$t.Z,CommentIcon:Zt.Z,HomeIcon:ja.Z,CardMenuEntries:re},mixins:[ia.Z],props:{id:{type:Number,required:!0},tabId:{type:String,required:!1,default:null},tabQuery:{type:String,required:!1,default:null}},data:()=>({titleEditable:!1,titleEditing:"",hasActivity:Na&&Na.activity,locale:(0,Pe.Kd)()}),computed:{...(0,i.rn)({isFullApp:t=>t.isFullApp,currentBoard:t=>t.currentBoard}),...(0,i.Se)(["canEdit","assignables","cardActions","stackById"]),title(){return this.titleEditable?this.titleEditing:this.currentCard.title},currentCard(){return this.$store.getters.cardById(this.id)},subtitle(){return t("deck","Modified")+": "+this.relativeDate(1e3*this.currentCard.lastModified)+"  "+t("deck","Created")+": "+this.relativeDate(1e3*this.currentCard.createdAt)},subtitleTooltip(){return t("deck","Modified")+": "+this.formatDate(this.currentCard.lastModified)+"\n"+t("deck","Created")+": "+this.formatDate(this.currentCard.createdAt)},cardDetailsInModal:{get(){return this.$store.getters.config("cardDetailsInModal")},set(t){this.$store.dispatch("setConfig",{cardDetailsInModal:t})}}},methods:{handleUpdateTitleEditable(t){this.titleEditable=t,t&&(this.titleEditing=this.currentCard.title)},handleUpdateTitle(t){this.titleEditing=t},handleSubmitTitle(e){""!==e.trim?(this.titleEditable=!1,this.$store.dispatch("updateCardTitle",{...this.currentCard,title:this.titleEditing})):(0,_t.x2)(t("deck","The title cannot be empty."))},closeSidebar(){this.$router?.push({name:"board"}),this.$emit("close")},showModal(){this.$store.dispatch("setConfig",{cardDetailsInModal:!0})},closeModal(){this.$store.dispatch("setConfig",{cardDetailsInModal:!1})},formatDate(t){return Lt.Z.unix(t).locale(this.locale).format("LLLL")}}};var Fa=r(43433),Ma={};Ma.styleTagTransform=I(),Ma.setAttributes=y(),Ma.insert=x().bind(null,"head"),Ma.domAPI=f(),Ma.insertStyleElement=_();g()(Fa.Z,Ma);Fa.Z&&Fa.Z.locals&&Fa.Z.locals;const Pa=(0,T.Z)(La,(function(){var t=this,e=t._self._c;return t.currentBoard&&t.currentCard?e("NcAppSidebar",{attrs:{active:t.tabId,name:t.title,subname:t.subtitle,subtitle:t.subtitleTooltip,"name-editable":t.titleEditable},on:{"update:nameEditable":t.handleUpdateTitleEditable,"update:name":t.handleUpdateTitle,"submit-name":t.handleSubmitTitle,close:t.closeSidebar},scopedSlots:t._u([{key:"secondary-actions",fn:function(){return[t.cardDetailsInModal&&t.isFullApp?e("NcActionButton",{attrs:{icon:"icon-menu-sidebar"},on:{click:function(e){return e.stopPropagation(),t.closeModal()}}},[t._v("\n\t\t\t"+t._s(t.t("deck","Open in sidebar view"))+"\n\t\t")]):t.isFullApp?e("NcActionButton",{attrs:{icon:"icon-external"},on:{click:function(e){return e.stopPropagation(),t.showModal()}}},[t._v("\n\t\t\t"+t._s(t.t("deck","Open in bigger view"))+"\n\t\t")]):t._e(),t._v(" "),e("CardMenuEntries",{attrs:{card:t.currentCard,"hide-details-entry":!0}})]},proxy:!0}],null,!1,1550865687)},[t._v(" "),e("NcAppSidebarTab",{attrs:{id:"details",order:0,name:t.t("deck","Details")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("HomeIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1674571436)},[e("CardSidebarTabDetails",{attrs:{card:t.currentCard}})],1),t._v(" "),e("NcAppSidebarTab",{attrs:{id:"attachments",order:1,name:t.t("deck","Attachments")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AttachmentIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,741344954)},[t._v(" "),e("CardSidebarTabAttachments",{attrs:{card:t.currentCard}})],1),t._v(" "),e("NcAppSidebarTab",{attrs:{id:"comments",order:2,name:t.t("deck","Comments")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CommentIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1715543632)},[t._v(" "),e("CardSidebarTabComments",{attrs:{card:t.currentCard,"tab-query":t.tabQuery}})],1),t._v(" "),t.hasActivity?e("NcAppSidebarTab",{attrs:{id:"timeline",order:3,name:t.t("deck","Activity")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ActivityIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,502128366)},[t._v(" "),e("CardSidebarTabActivity",{attrs:{card:t.currentCard}})],1):t._e()],1):t._e()}),[],!1,null,null,null).exports,za={name:"Board",components:{GlobalSearchResults:Ne,Controls:xt,Container:n.Container,DeckIcon:kt.Z,Draggable:n.Draggable,Stack:ke,NcEmptyContent:o.SL,NcModal:o.Jc,CardSidebar:Pa},inject:["boardApi"],props:{id:{type:Number,default:null}},data:()=>({draggingStack:!1,loading:!0,newStackTitle:"",currentScrollPosX:null,currentMousePosX:null,localModal:null}),computed:{...(0,i.rn)({isFullApp:t=>t.isFullApp,board:t=>t.currentBoard,showArchived:t=>t.showArchived}),...(0,i.Se)(["canEdit","canManage"]),stacksByBoard(){return this.$store.getters.stacksByBoard(this.board.id)},dragHandleSelector(){return this.canEdit?".stack__title":".no-drag"},isEmpty(){return 0===this.stacksByBoard.length}},watch:{id(t,e){this.fetchData()},showArchived(){this.fetchData()}},created(){this.session=mt(this.id),this.fetchData(),this.$root.$on("open-card",(t=>{this.localModal=t}))},beforeDestroy(){this.session.close()},methods:{async fetchData(){this.loading=!0;try{await this.$store.dispatch("loadBoardById",this.id),await this.$store.dispatch("loadStacks",this.id),this.session?.close(),this.session=mt(this.id)}catch(t){this.loading=!1,console.error(t),(0,Le.x)(t)}finally{this.loading=!1}},onDropStack(t){let{removedIndex:e,addedIndex:a}=t;this.$store.dispatch("orderStack",{stack:this.stacksByBoard[e],removedIndex:e,addedIndex:a})},addNewStack(){const t={title:this.newStackTitle,boardId:this.id};this.$store.dispatch("createStack",t),this.newStackTitle=""},onMouseDown(t){this.startMouseDrag(t)},startMouseDrag(t){"dragscrollEnabled"in t.target.dataset&&(t.preventDefault(),this.currentMousePosX=t.clientX,this.currentScrollPosX=this.$refs.board.scrollLeft,window.addEventListener("mousemove",this.handleMouseDrag),window.addEventListener("mouseup",this.stopMouseDrag),window.addEventListener("mouseleave",this.stopMouseDrag))},handleMouseDrag(t){t.preventDefault();const e=t.clientX-this.currentMousePosX;this.$refs.board.scrollLeft=this.currentScrollPosX-e},stopMouseDrag(t){window.removeEventListener("mousemove",this.handleMouseDrag),window.removeEventListener("mouseup",this.stopMouseDrag),window.removeEventListener("mouseleave",this.stopMouseDrag)}}};var Ua=r(72664),Oa={};Oa.styleTagTransform=I(),Oa.setAttributes=y(),Oa.insert=x().bind(null,"head"),Oa.domAPI=f(),Oa.insertStyleElement=_();g()(Ua.Z,Oa);Ua.Z&&Ua.Z.locals&&Ua.Z.locals;var Ga=(0,T.Z)(za,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"board-wrapper",attrs:{tabindex:-1}},[e("Controls",{attrs:{board:t.board}}),t._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[t.loading?e("div",{key:"loading",staticClass:"emptycontent"},[e("div",{staticClass:"icon icon-loading"}),t._v(" "),e("h2",[t._v(t._s(t.t("deck","Loading board")))]),t._v(" "),e("p")]):t.board?t.isEmpty?e("NcEmptyContent",{key:"empty",scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeckIcon")]},proxy:!0},{key:"title",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.t("deck","No lists available"))+"\n\t\t\t")]},proxy:!0},t.canManage?{key:"action",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.t("deck","Create a new list to add cards to this board"))+"\n\t\t\t\t"),e("form",{on:{submit:function(e){return e.preventDefault(),t.addNewStack()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStackTitle,expression:"newStackTitle"},{name:"focus",rawName:"v-focus"}],staticClass:"no-close",attrs:{id:"new-stack-input-main",type:"text",placeholder:t.t("deck","List name"),required:""},domProps:{value:t.newStackTitle},on:{input:function(e){e.target.composing||(t.newStackTitle=e.target.value)}}}),t._v(" "),e("input",{staticClass:"icon-confirm",attrs:{title:"t('deck', 'Add list')",type:"submit",value:""}})])]},proxy:!0}:null],null,!0)}):t.isEmpty||t.loading?t._e():e("div",{key:"board",ref:"board",staticClass:"board",on:{mousedown:t.onMouseDown}},[e("Container",{attrs:{"lock-axix":"y",orientation:"horizontal","drag-handle-selector":t.dragHandleSelector,"data-click-closes-sidebar":"true"},on:{"drag-start":function(e){t.draggingStack=!0},"drag-end":function(e){t.draggingStack=!1},drop:t.onDropStack}},t._l(t.stacksByBoard,(function(a){return e("Draggable",{key:a.id,staticClass:"stack-draggable-wrapper",attrs:{"data-click-closes-sidebar":"true","data-dragscroll-enabled":""}},[e("Stack",{attrs:{stack:a,dragging:t.draggingStack,"data-click-closes-sidebar":"true"}})],1)})),1)],1):e("div",{key:"notfound",staticClass:"emptycontent"},[e("div",{staticClass:"icon icon-deck"}),t._v(" "),e("h2",[t._v(t._s(t.t("deck","Board not found")))]),t._v(" "),e("p")])],1),t._v(" "),t.isFullApp?e("GlobalSearchResults"):t._e(),t._v(" "),t.localModal?e("NcModal",{attrs:{"clear-view-delay":0,"close-button-contained":!0,size:"large"},on:{close:function(e){t.localModal=null}}},[e("div",{staticClass:"modal__content modal__card"},[e("CardSidebar",{attrs:{id:t.localModal},on:{close:function(e){t.localModal=null}}})],1)]):t._e()],1)}),[],!1,null,"7a5373be",null);const Ra=Ga.exports;var Wa=r(94624);const Ya=new M.A,qa={name:"BoardReferenceWidget",store:dt,components:{DeckIcon:kt.Z,NcUserBubble:Wa.Z,Board:Ra},provide:()=>({boardApi:Ya}),props:{richObjectType:{type:String,default:""},richObject:{type:Object,default:null},accessible:{type:Boolean,default:!0},interactive:{type:Boolean,default:!1}},computed:{board(){return this.richObject.board},boardLink(){return(0,Z.nu)("/apps/deck/#/board/{boardId}",{boardId:this.board.id})},boardTooltip(){return t("deck","Deck board {name}\n* Last modified on {lastMod}",{name:this.board.title,lastMod:Lt.Z.unix(this.board.lastModified).format("LLL")})},boardOwnerUserId(){return this.board.owner?.uid??"???"},boardOwnerDisplayName(){return this.board.owner?.displayname??this.boardOwnerUserId}},created(){this.$store.commit("setFullApp",!1)}};var Ha=r(96230),Qa={};Qa.styleTagTransform=I(),Qa.setAttributes=y(),Qa.insert=x().bind(null,"head"),Qa.domAPI=f(),Qa.insertStyleElement=_();g()(Ha.Z,Qa);Ha.Z&&Ha.Z.locals&&Ha.Z.locals;const Ka=(0,T.Z)(qa,(function(){var t=this,e=t._self._c;return t.interactive?e("div",{staticClass:"deck-board-reference-interactive"},[e("Board",{attrs:{id:t.board.id}})],1):e("div",{staticClass:"deck-board-reference"},[e("div",{staticClass:"line"},[e("DeckIcon",{staticClass:"title-icon",attrs:{size:20}}),t._v(" "),e("strong",[e("a",{staticClass:"link",attrs:{href:t.boardLink,title:t.boardTooltip,target:"_blank"}},[t._v("\n\t\t\t\t"+t._s(t.board.title)+"\n\t\t\t")])])],1),t._v(" "),e("div",{staticClass:"line"},[t._v("\n\t\t"+t._s(t.t("deck","Owner")+": ")+"\n\t\t"),e("NcUserBubble",{attrs:{user:t.boardOwnerUserId,"display-name":t.boardOwnerDisplayName}})],1)])}),[],!1,null,"16b47a8d",null).exports},3087:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});const r=a(1359).Z},14809:(t,e,a)=>{"use strict";a(6010)},90983:t=>{"use strict";t.exports="data:image/svg+xml,%3csvg%20viewBox=%270%200%2016%2016%27%20height=%2716%27%20width=%2716%27%20xmlns=%27http://www.w3.org/2000/svg%27%20xml:space=%27preserve%27%20style=%27fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2%27%3e%3cpath%20d=%27M6.4%2019%205%2017.6l5.6-5.6L5%206.4%206.4%205l5.6%205.6L17.6%205%2019%206.4%2013.4%2012l5.6%205.6-1.4%201.4-5.6-5.6L6.4%2019Z%27%20style=%27fill-rule:nonzero%27%20transform=%27matrix%28.85714%200%200%20.85714%20-2.286%20-2.286%29%27/%3e%3c/svg%3e"},71391:t=>{"use strict";t.exports="data:image/svg+xml,%3csvg%20viewBox=%270%200%2016%2016%27%20height=%2716%27%20width=%2716%27%20xmlns=%27http://www.w3.org/2000/svg%27%20xml:space=%27preserve%27%20style=%27fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2%27%3e%3cpath%20d=%27M6.4%2019%205%2017.6l5.6-5.6L5%206.4%206.4%205l5.6%205.6L17.6%205%2019%206.4%2013.4%2012l5.6%205.6-1.4%201.4-5.6-5.6L6.4%2019Z%27%20style=%27fill:%23fff;fill-rule:nonzero%27%20transform=%27matrix%28.85714%200%200%20.85714%20-2.286%20-2.286%29%27/%3e%3c/svg%3e"}}]);
//# sourceMappingURL=deck-node_modules_moment_locale_sync_recursive_-src_views_BoardReferenceWidget_vue-data_image_svg_-373c63.js.map?v=a5d42afc40b060b3e5f7