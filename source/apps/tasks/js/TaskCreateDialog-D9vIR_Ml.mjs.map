{"version":3,"file":"TaskCreateDialog-D9vIR_Ml.mjs","sources":["../node_modules/vue-material-design-icons/ViewHeadline.vue","../src/components/TaskCreateDialog.vue"],"sourcesContent":["<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : true\"\n        :aria-label=\"title\"\n        class=\"material-design-icon view-headline-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M4,5V7H21V5M4,11H21V9H4M4,19H21V17H4M4,15H21V13H4V15Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ViewHeadlineIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\nNextcloud - Tasks\n\n@author Julius Härtl\n@copyright 2021 Julius Härtl <jus@bitgrid.net>\n\n@author Jakob Röhrl\n@copyright 2021 Jakob Röhrl <jakob.roehrl@web.de>\n\n@author Raimund Schlüßler\n@copyright 2021 Raimund Schlüßler <raimund.schluessler@mailbox.org>\n\nThis library is free software; you can redistribute it and/or\nmodify it under the terms of the GNU AFFERO GENERAL PUBLIC LICENSE\nLicense as published by the Free Software Foundation; either\nversion 3 of the License, or any later version.\n\nThis library is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\nGNU AFFERO GENERAL PUBLIC LICENSE for more details.\n\nYou should have received a copy of the GNU Affero General Public\nLicense along with this library. If not, see <http://www.gnu.org/licenses/>.\n\n-->\n\n<template>\n\t<NcModal class=\"task-selector\" size=\"small\" @close=\"close\">\n\t\t<div v-if=\"!creating && !created\" id=\"modal-inner\">\n\t\t\t<div v-if=\"loading\" class=\"loading-overlay\">\n\t\t\t\t<NcLoadingIcon :size=\"40\" />\n\t\t\t</div>\n\t\t\t<h3>{{ t('tasks', 'Create a new task') }}</h3>\n\n\t\t\t<CalendarPickerItem :disabled=\"loading\"\n\t\t\t\t:calendar=\"pendingCalendar\"\n\t\t\t\t:calendars=\"writableCalendars\"\n\t\t\t\t@change-calendar=\"changeCalendar\" />\n\n\t\t\t<div class=\"property property__summary\">\n\t\t\t\t<ViewHeadline :size=\"20\" />\n\t\t\t\t<input v-model=\"pendingSummary\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('tasks', 'Task summary')\"\n\t\t\t\t\t:disabled=\"loading\">\n\t\t\t</div>\n\n\t\t\t<div class=\"property property__notes\">\n\t\t\t\t<TextBoxOutline :size=\"20\" />\n\t\t\t\t<textarea v-model=\"pendingDescription\"\n\t\t\t\t\t:disabled=\"loading\" />\n\t\t\t</div>\n\t\t\t<div class=\"modal-buttons\">\n\t\t\t\t<NcButton @click=\"close\">\n\t\t\t\t\t{{ t('tasks', 'Cancel') }}\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton :disabled=\"loading\"\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t@click=\"addTask\">\n\t\t\t\t\t{{ t('tasks', 'Create task') }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else id=\"modal-inner\">\n\t\t\t<NcEmptyContent v-if=\"creating\" key=\"creating\" :description=\"t('tasks', 'Creating the new task…')\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcLoadingIcon />\n\t\t\t\t</template>\n\t\t\t</NcEmptyContent>\n\t\t\t<NcEmptyContent v-else-if=\"created\" key=\"created\" :description=\"createdMessage\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Check />\n\t\t\t\t</template>\n\t\t\t\t<template #action>\n\t\t\t\t\t<NcButton @click=\"close\">\n\t\t\t\t\t\t{{ t('tasks', 'Close') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t\t<NcButton type=\"primary\" @click=\"openNewTask\">\n\t\t\t\t\t\t{{ t('tasks', 'Open task') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t</template>\n\t\t\t</NcEmptyContent>\n\t\t</div>\n\t</NcModal>\n</template>\n\n<script>\n\nimport CalendarPickerItem from './AppSidebar/CalendarPickerItem.vue'\nimport client from '../services/cdav.js'\n\nimport { translate as t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcEmptyContent from '@nextcloud/vue/dist/Components/NcEmptyContent.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport NcModal from '@nextcloud/vue/dist/Components/NcModal.js'\n\nimport Check from 'vue-material-design-icons/Check.vue'\nimport TextBoxOutline from 'vue-material-design-icons/TextBoxOutline.vue'\nimport ViewHeadline from 'vue-material-design-icons/ViewHeadline.vue'\n\nimport { mapGetters, mapActions } from 'vuex'\n\nexport default {\n\tname: 'TaskCreateDialog',\n\tcomponents: {\n\t\tCalendarPickerItem,\n\t\tCheck,\n\t\tNcButton,\n\t\tNcEmptyContent,\n\t\tNcLoadingIcon,\n\t\tNcModal,\n\t\tTextBoxOutline,\n\t\tViewHeadline,\n\t},\n\tprops: {\n\t\tsummary: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: ['close'],\n\tdata() {\n\t\treturn {\n\t\t\tpendingSummary: '',\n\t\t\tpendingDescription: '',\n\t\t\tpendingCalendar: null,\n\t\t\tloading: true,\n\t\t\tcreating: false,\n\t\t\tcreated: false,\n\t\t\tnewTask: null,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\twritableCalendars: 'getSortedWritableCalendars',\n\t\t\tdefaultCalendar: 'getDefaultCalendar',\n\t\t}),\n\t\tcreatedMessage() {\n\t\t\treturn t('tasks', '\"{task}\" was added to \"{calendar}\"', { task: this.pendingSummary, calendar: this.pendingCalendar.displayName }, undefined, { sanitize: false, escape: false })\n\t\t},\n\t},\n\n\tbeforeMount() {\n\t\tthis.fetchCalendars()\n\t},\n\n\tmounted() {\n\t\tthis.pendingSummary = this.summary\n\t\tthis.pendingDescription = this.description\n\t},\n\n\tmethods: {\n\t\t...mapActions([\n\t\t\t'createTask',\n\t\t]),\n\n\t\tt,\n\n\t\tchangeCalendar(calendar) {\n\t\t\tthis.pendingCalendar = calendar\n\t\t},\n\n\t\tclose() {\n\t\t\tthis.$emit('close')\n\t\t\tthis.$root.$emit('close')\n\t\t},\n\n\t\tasync fetchCalendars() {\n\t\t\tthis.loading = true\n\t\t\tawait client.connect({ enableCalDAV: true })\n\t\t\tawait this.$store.dispatch('fetchCurrentUserPrincipal')\n\t\t\tawait this.$store.dispatch('getCalendarsAndTrashBin')\n\t\t\t// TODO: Would be good to select the default calendar instead of the first one\n\t\t\tthis.pendingCalendar = this.writableCalendars[0]\n\t\t\tthis.loading = false\n\t\t},\n\n\t\tasync addTask() {\n\t\t\tthis.creating = true\n\t\t\tconst task = {\n\t\t\t\tsummary: this.pendingSummary,\n\t\t\t\tnote: this.pendingDescription,\n\t\t\t\tcalendar: this.pendingCalendar,\n\t\t\t}\n\t\t\tthis.newTask = await this.createTask(task)\n\t\t\tthis.creating = false\n\t\t\tthis.created = true\n\t\t},\n\t\topenNewTask() {\n\t\t\twindow.location = generateUrl('apps/tasks') + `/#/calendars/${this.pendingCalendar.id}/tasks/${this.newTask.uri}`\n\t\t},\n\t},\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n\t#modal-inner {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 20px;\n\n\t\t.loading-overlay {\n\t\t\tposition: absolute;\n\t\t\ttop: calc(50% - 20px);\n\t\t\tleft: calc(50% - 20px);\n\t\t\tz-index: 1000;\n\t\t}\n\n\t\t.empty-content {\n\t\t\tmargin: 10vh 0;\n\n\t\t\t:deep(.empty-content__action) {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t}\n\t}\n\n\t.property__item {\n\t\tborder-bottom: none;\n\t\tmargin-bottom: 3px;\n\n\t\t:deep(.multiselect .multiselect__tags) {\n\t\t\tborder: 2px solid var(--color-border-dark);\n\t\t}\n\t}\n\n\t.property {\n\t\tposition: relative;\n\n\t\t.material-design-icon {\n\t\t\tposition: absolute;\n\t\t\ttop: 14px;\n\t\t\tleft: 14px;\n\t\t}\n\n\t\tinput,\n\t\ttextarea {\n\t\t\twidth: 100%;\n\t\t\tpadding-left: 44px !important;\n\t\t}\n\n\t\tinput {\n\t\t\theight: 44px !important;\n\t\t\tmargin: 0;\n\t\t}\n\n\t\ttextarea {\n\t\t\tmin-width: 100%;\n\t\t\tmax-width: 100%;\n\t\t\tmin-height: 100px;\n\t\t}\n\t}\n\n.modal-buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n}\n\n\t:deep(.calendar-picker-option__label),\n\t:deep(.property__item .multiselect__tags) input.multiselect__input {\n\t\tfont-weight: normal;\n\t}\n</style>\n"],"names":["_sfc_main","_hoisted_1","_hoisted_2","_hoisted_3","_createElementBlock","_mergeProps","_ctx","$props","_cache","$event","_createElementVNode","_hoisted_4","_createCommentVNode","CalendarPickerItem","Check","NcButton","NcEmptyContent","NcLoadingIcon","NcModal","TextBoxOutline","ViewHeadline","mapGetters","t","mapActions","calendar","client","task","generateUrl","_hoisted_5","_hoisted_6","_hoisted_7","_createBlock","_component_NcModal","$options","_withCtx","$data","_openBlock","_createVNode","_component_NcLoadingIcon","_component_CalendarPickerItem","_component_ViewHeadline","_component_TextBoxOutline","_component_NcButton","_createTextVNode","_toDisplayString","_hoisted_8","_component_NcEmptyContent","_component_Check"],"mappings":"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","x_google_ignoreList":[0]}